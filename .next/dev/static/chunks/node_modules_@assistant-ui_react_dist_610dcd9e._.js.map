{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/util-hooks/tapSubscribable.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/util-hooks/tapSubscribable.ts"],"sourcesContent":["import { tapState, tapEffect } from \"@assistant-ui/tap\";\nimport { SubscribableWithState } from \"../runtime/subscribable/Subscribable\";\n\nexport const tapSubscribable = <T>(\n  subscribable: Omit<SubscribableWithState<T, any>, \"path\">,\n) => {\n  const [, setState] = tapState(subscribable.getState);\n  tapEffect(() => {\n    setState(subscribable.getState());\n    return subscribable.subscribe(() => {\n      setState(subscribable.getState());\n    });\n  }, [subscribable]);\n\n  return subscribable.getState();\n};\n"],"names":[],"mappings":";;;;;AAAA,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,mBAAmB,CAAC;;AAGjD,MAAM,eAAe,GAAG,CAC7B,YAAyD,EACzD,EAAE;IACF,MAAM,CAAC,EAAE,QAAQ,CAAC,OAAG,wLAAQ,EAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;QACrD,0LAAS,EAAC,GAAG,EAAE;QACb,QAAQ,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC;QAClC,OAAO,YAAY,CAAC,SAAS,CAAC,GAAG,EAAE;YACjC,QAAQ,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;IACL,CAAC,EAAE;QAAC,YAAY;KAAC,CAAC,CAAC;IAEnB,OAAO,YAAY,CAAC,QAAQ,EAAE,CAAC;AACjC,CAAC,CAAC"}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/client/ThreadListItemRuntimeClient.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/client/ThreadListItemRuntimeClient.ts"],"sourcesContent":["import { resource, tapEffect } from \"@assistant-ui/tap\";\nimport { type ClientOutput, tapAssistantEmit } from \"@assistant-ui/store\";\nimport {\n  ThreadListItemEventType,\n  ThreadListItemRuntime,\n} from \"../runtime/ThreadListItemRuntime\";\nimport { Unsubscribe } from \"../../types\";\nimport { tapSubscribable } from \"../util-hooks/tapSubscribable\";\n\nexport const ThreadListItemClient = resource(\n  ({\n    runtime,\n  }: {\n    runtime: ThreadListItemRuntime;\n  }): ClientOutput<\"threadListItem\"> => {\n    const state = tapSubscribable(runtime);\n    const emit = tapAssistantEmit();\n\n    // Bind thread list item events to event manager\n    tapEffect(() => {\n      const unsubscribers: Unsubscribe[] = [];\n\n      // Subscribe to thread list item events\n      const threadListItemEvents: ThreadListItemEventType[] = [\n        \"switchedTo\",\n        \"switchedAway\",\n      ];\n\n      for (const event of threadListItemEvents) {\n        const unsubscribe = runtime.unstable_on(event, () => {\n          emit(`threadListItem.${event}`, {\n            threadId: runtime.getState()!.id,\n          });\n        });\n        unsubscribers.push(unsubscribe);\n      }\n\n      return () => {\n        for (const unsub of unsubscribers) unsub();\n      };\n    }, [runtime, emit]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        switchTo: runtime.switchTo,\n        rename: runtime.rename,\n        archive: runtime.archive,\n        unarchive: runtime.unarchive,\n        delete: runtime.delete,\n        generateTitle: runtime.generateTitle,\n        initialize: runtime.initialize,\n        detach: runtime.detach,\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n"],"names":[],"mappings":";;;;;AAAA,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,mBAAmB,CAAC;AACxD,OAAO,EAAqB,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AAM1E,OAAO,EAAE,eAAe,EAAE,yCAAsC;;;;AAEzD,MAAM,oBAAoB,OAAG,mLAAQ,EAC1C,CAAC,EACC,OAAO,EAGR,EAAkC,EAAE;IACnC,MAAM,KAAK,OAAG,iOAAe,EAAC,OAAO,CAAC,CAAC;IACvC,MAAM,IAAI,OAAG,iNAAgB,EAAE,CAAC;IAEhC,gDAAgD;QAChD,0LAAS,EAAC,GAAG,EAAE;QACb,MAAM,aAAa,GAAkB,EAAE,CAAC;QAExC,uCAAuC;QACvC,MAAM,oBAAoB,GAA8B;YACtD,YAAY;YACZ,cAAc;SACf,CAAC;QAEF,KAAK,MAAM,KAAK,IAAI,oBAAoB,CAAE,CAAC;YACzC,MAAM,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC,KAAK,EAAE,GAAG,EAAE;gBAClD,IAAI,CAAC,CAAA,eAAA,EAAkB,KAAK,EAAE,EAAE;oBAC9B,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAG,CAAC,EAAE;iBACjC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;YACH,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAClC,CAAC;QAED,OAAO,GAAG,EAAE;YACV,KAAK,MAAM,KAAK,IAAI,aAAa,CAAE,KAAK,EAAE,CAAC;QAC7C,CAAC,CAAC;IACJ,CAAC,EAAE;QAAC,OAAO;QAAE,IAAI;KAAC,CAAC,CAAC;IAEpB,OAAO;QACL,KAAK;QACL,OAAO,EAAE;YACP,QAAQ,EAAE,GAAG,CAAG,CAAD,IAAM;YACrB,QAAQ,EAAE,OAAO,CAAC,QAAQ;YAC1B,MAAM,EAAE,OAAO,CAAC,MAAM;YACtB,OAAO,EAAE,OAAO,CAAC,OAAO;YACxB,SAAS,EAAE,OAAO,CAAC,SAAS;YAC5B,MAAM,EAAE,OAAO,CAAC,MAAM;YACtB,aAAa,EAAE,OAAO,CAAC,aAAa;YACpC,UAAU,EAAE,OAAO,CAAC,UAAU;YAC9B,MAAM,EAAE,OAAO,CAAC,MAAM;YACtB,qBAAqB,EAAE,GAAG,CAAG,CAAD,MAAQ;SACrC;KACF,CAAC;AACJ,CAAC,CACF,CAAC"}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/client/AttachmentRuntimeClient.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/client/AttachmentRuntimeClient.ts"],"sourcesContent":["import { resource } from \"@assistant-ui/tap\";\nimport { type ClientOutput } from \"@assistant-ui/store\";\nimport { AttachmentRuntime } from \"../runtime\";\nimport { tapSubscribable } from \"../util-hooks/tapSubscribable\";\n\nexport const AttachmentRuntimeClient = resource(\n  ({ runtime }: { runtime: AttachmentRuntime }): ClientOutput<\"attachment\"> => {\n    const state = tapSubscribable(runtime);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        remove: runtime.remove,\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAG7C,OAAO,EAAE,eAAe,EAAE,yCAAsC;;;AAEzD,MAAM,uBAAuB,OAAG,mLAAQ,EAC7C,CAAC,EAAE,OAAO,EAAkC,EAA8B,EAAE;IAC1E,MAAM,KAAK,OAAG,iOAAe,EAAC,OAAO,CAAC,CAAC;IAEvC,OAAO;QACL,KAAK;QACL,OAAO,EAAE;YACP,QAAQ,EAAE,GAAG,CAAG,CAAD,IAAM;YACrB,MAAM,EAAE,OAAO,CAAC,MAAM;YACtB,qBAAqB,EAAE,GAAG,CAAG,CAAD,MAAQ;SACrC;KACF,CAAC;AACJ,CAAC,CACF,CAAC"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/client/ComposerRuntimeClient.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/client/ComposerRuntimeClient.ts"],"sourcesContent":["import {\n  resource,\n  tapMemo,\n  tapEffect,\n  tapInlineResource,\n  type tapRef,\n  withKey,\n} from \"@assistant-ui/tap\";\nimport {\n  type ClientOutput,\n  tapAssistantEmit,\n  tapClientLookup,\n} from \"@assistant-ui/store\";\nimport {\n  ComposerRuntime,\n  EditComposerRuntime,\n} from \"../runtime/ComposerRuntime\";\nimport { Unsubscribe } from \"../../types\";\nimport { ComposerRuntimeEventType } from \"../runtime-cores/core/ComposerRuntimeCore\";\nimport { ComposerState } from \"../../types/scopes\";\nimport { AttachmentRuntimeClient } from \"./AttachmentRuntimeClient\";\nimport { tapSubscribable } from \"../util-hooks/tapSubscribable\";\n\nconst ComposerAttachmentClientByIndex = resource(\n  ({ runtime, index }: { runtime: ComposerRuntime; index: number }) => {\n    const attachmentRuntime = tapMemo(\n      () => runtime.getAttachmentByIndex(index),\n      [runtime, index],\n    );\n\n    return tapInlineResource(\n      AttachmentRuntimeClient({\n        runtime: attachmentRuntime,\n      }),\n    );\n  },\n);\n\nexport const ComposerClient = resource(\n  ({\n    threadIdRef,\n    messageIdRef,\n    runtime,\n  }: {\n    threadIdRef: tapRef.RefObject<string>;\n    messageIdRef?: tapRef.RefObject<string>;\n    runtime: ComposerRuntime;\n  }): ClientOutput<\"composer\"> => {\n    const runtimeState = tapSubscribable(runtime);\n    const emit = tapAssistantEmit();\n\n    // Bind composer events to event manager\n    tapEffect(() => {\n      const unsubscribers: Unsubscribe[] = [];\n\n      // Subscribe to composer events\n      const composerEvents: ComposerRuntimeEventType[] = [\n        \"send\",\n        \"attachmentAdd\",\n      ];\n\n      for (const event of composerEvents) {\n        const unsubscribe = runtime.unstable_on(event, () => {\n          emit(`composer.${event}`, {\n            threadId: threadIdRef.current,\n            ...(messageIdRef && { messageId: messageIdRef.current }),\n          });\n        });\n        unsubscribers.push(unsubscribe);\n      }\n\n      return () => {\n        for (const unsub of unsubscribers) unsub();\n      };\n    }, [runtime, emit, threadIdRef, messageIdRef]);\n\n    const attachments = tapClientLookup(\n      () =>\n        runtimeState.attachments.map((attachment, idx) =>\n          withKey(\n            attachment.id,\n            ComposerAttachmentClientByIndex({\n              runtime,\n              index: idx,\n            }),\n          ),\n        ),\n      [runtimeState.attachments, runtime],\n    );\n\n    const state = tapMemo<ComposerState>(() => {\n      return {\n        text: runtimeState.text,\n        role: runtimeState.role,\n        attachments: attachments.state,\n        runConfig: runtimeState.runConfig,\n        isEditing: runtimeState.isEditing,\n        canCancel: runtimeState.canCancel,\n        attachmentAccept: runtimeState.attachmentAccept,\n        isEmpty: runtimeState.isEmpty,\n        type: runtimeState.type ?? \"thread\",\n        dictation: runtimeState.dictation,\n        quote: runtimeState.quote,\n      };\n    }, [runtimeState, attachments.state]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        setText: runtime.setText,\n        setRole: runtime.setRole,\n        setRunConfig: runtime.setRunConfig,\n        addAttachment: runtime.addAttachment,\n        reset: runtime.reset,\n        clearAttachments: runtime.clearAttachments,\n        send: runtime.send,\n        cancel: runtime.cancel,\n        beginEdit:\n          (runtime as EditComposerRuntime).beginEdit ??\n          (() => {\n            throw new Error(\"beginEdit is not supported in this runtime\");\n          }),\n        startDictation: runtime.startDictation,\n        stopDictation: runtime.stopDictation,\n        setQuote: runtime.setQuote,\n        attachment: (selector) => {\n          if (\"id\" in selector) {\n            return attachments.get({ key: selector.id });\n          } else {\n            return attachments.get(selector);\n          }\n        },\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 224, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/client/MessagePartRuntimeClient.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/client/MessagePartRuntimeClient.ts"],"sourcesContent":["import { resource } from \"@assistant-ui/tap\";\nimport { type ClientOutput } from \"@assistant-ui/store\";\nimport { MessagePartRuntime } from \"../runtime/MessagePartRuntime\";\nimport { tapSubscribable } from \"../util-hooks/tapSubscribable\";\n\nexport const MessagePartClient = resource(\n  ({ runtime }: { runtime: MessagePartRuntime }): ClientOutput<\"part\"> => {\n    const state = tapSubscribable(runtime);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        addToolResult: (result) => runtime.addToolResult(result),\n        resumeToolCall: (payload) => runtime.resumeToolCall(payload),\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAG7C,OAAO,EAAE,eAAe,EAAE,yCAAsC;;;AAEzD,MAAM,iBAAiB,OAAG,mLAAQ,EACvC,CAAC,EAAE,OAAO,EAAmC,EAAwB,EAAE;IACrE,MAAM,KAAK,OAAG,iOAAe,EAAC,OAAO,CAAC,CAAC;IAEvC,OAAO;QACL,KAAK;QACL,OAAO,EAAE;YACP,QAAQ,EAAE,GAAG,CAAG,CAAD,IAAM;YACrB,aAAa,EAAE,CAAC,MAAM,EAAE,CAAG,CAAD,MAAQ,CAAC,aAAa,CAAC,MAAM,CAAC;YACxD,cAAc,EAAE,CAAC,OAAO,EAAE,CAAG,CAAD,MAAQ,CAAC,cAAc,CAAC,OAAO,CAAC;YAC5D,qBAAqB,EAAE,GAAG,CAAG,CAAD,MAAQ;SACrC;KACF,CAAC;AACJ,CAAC,CACF,CAAC"}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/client/MessageRuntimeClient.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/client/MessageRuntimeClient.ts"],"sourcesContent":["import {\n  withKey,\n  resource,\n  tapInlineResource,\n  tapMemo,\n  tapState,\n} from \"@assistant-ui/tap\";\nimport {\n  type ClientOutput,\n  tapClientLookup,\n  tapClientResource,\n} from \"@assistant-ui/store\";\nimport { MessageRuntime } from \"../runtime/MessageRuntime\";\nimport { tapSubscribable } from \"../util-hooks/tapSubscribable\";\nimport { ComposerClient } from \"./ComposerRuntimeClient\";\nimport { MessagePartClient } from \"./MessagePartRuntimeClient\";\nimport { RefObject } from \"react\";\nimport { MessageState } from \"../../types/scopes\";\nimport { AttachmentRuntimeClient } from \"./AttachmentRuntimeClient\";\n\nconst MessageAttachmentClientByIndex = resource(\n  ({ runtime, index }: { runtime: MessageRuntime; index: number }) => {\n    const attachmentRuntime = tapMemo(\n      () => runtime.getAttachmentByIndex(index),\n      [runtime, index],\n    );\n    return tapInlineResource(\n      AttachmentRuntimeClient({ runtime: attachmentRuntime }),\n    );\n  },\n);\n\nconst MessagePartByIndex = resource(\n  ({ runtime, index }: { runtime: MessageRuntime; index: number }) => {\n    const partRuntime = tapMemo(\n      () => runtime.getMessagePartByIndex(index),\n      [runtime, index],\n    );\n    return tapInlineResource(MessagePartClient({ runtime: partRuntime }));\n  },\n);\n\nexport const MessageClient = resource(\n  ({\n    runtime,\n    threadIdRef,\n  }: {\n    runtime: MessageRuntime;\n    threadIdRef: RefObject<string>;\n  }): ClientOutput<\"message\"> => {\n    const runtimeState = tapSubscribable(runtime);\n\n    const [isCopiedState, setIsCopied] = tapState(false);\n    const [isHoveringState, setIsHovering] = tapState(false);\n\n    const messageIdRef = tapMemo(\n      () => ({\n        get current() {\n          return runtime.getState().id;\n        },\n      }),\n      [runtime],\n    );\n\n    const composer = tapClientResource(\n      ComposerClient({\n        runtime: runtime.composer,\n        threadIdRef,\n        messageIdRef,\n      }),\n    );\n\n    const parts = tapClientLookup(\n      () =>\n        runtimeState.content.map((part, idx) =>\n          withKey(\n            \"toolCallId\" in part && part.toolCallId != null\n              ? `toolCallId-${part.toolCallId}`\n              : `index-${idx}`,\n            MessagePartByIndex({ runtime, index: idx }),\n          ),\n        ),\n      [runtimeState.content, runtime],\n    );\n\n    const attachments = tapClientLookup(\n      () =>\n        (runtimeState.attachments ?? []).map((attachment, idx) =>\n          withKey(\n            attachment.id,\n            MessageAttachmentClientByIndex({ runtime, index: idx }),\n          ),\n        ),\n      [runtimeState.attachments, runtime],\n    );\n\n    const state = tapMemo<MessageState>(() => {\n      return {\n        ...(runtimeState as MessageState),\n\n        parts: parts.state,\n        composer: composer.state,\n\n        isCopied: isCopiedState,\n        isHovering: isHoveringState,\n      };\n    }, [\n      runtimeState,\n      parts.state,\n      composer.state,\n      isCopiedState,\n      isHoveringState,\n    ]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n\n        composer: composer.methods,\n\n        reload: (config) => runtime.reload(config),\n        speak: () => runtime.speak(),\n        stopSpeaking: () => runtime.stopSpeaking(),\n        submitFeedback: (feedback) => runtime.submitFeedback(feedback),\n        switchToBranch: (options) => runtime.switchToBranch(options),\n        getCopyText: () => runtime.unstable_getCopyText(),\n        part: (selector) => {\n          if (\"index\" in selector) {\n            return parts.get({ index: selector.index });\n          } else {\n            return parts.get({ key: `toolCallId-${selector.toolCallId}` });\n          }\n        },\n\n        attachment: (selector) => {\n          if (\"id\" in selector) {\n            return attachments.get({ key: selector.id });\n          } else {\n            return attachments.get(selector);\n          }\n        },\n\n        setIsCopied,\n        setIsHovering,\n\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 373, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/client/ThreadRuntimeClient.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/client/ThreadRuntimeClient.ts"],"sourcesContent":["import { ThreadRuntimeEventType } from \"../runtime-cores/core/ThreadRuntimeCore\";\nimport { ThreadRuntime } from \"../runtime/ThreadRuntime\";\nimport {\n  resource,\n  tapInlineResource,\n  tapMemo,\n  tapEffect,\n  type tapRef,\n  withKey,\n} from \"@assistant-ui/tap\";\nimport {\n  type ClientOutput,\n  tapAssistantEmit,\n  tapClientLookup,\n  tapClientResource,\n} from \"@assistant-ui/store\";\nimport { ComposerClient } from \"./ComposerRuntimeClient\";\nimport { MessageClient } from \"./MessageRuntimeClient\";\nimport { tapSubscribable } from \"../util-hooks/tapSubscribable\";\nimport { Unsubscribe } from \"../../types\";\nimport { ThreadState } from \"../../types/scopes\";\n\nconst MessageClientById = resource(\n  ({\n    runtime,\n    id,\n    threadIdRef,\n  }: {\n    runtime: ThreadRuntime;\n    id: string;\n    threadIdRef: tapRef.RefObject<string>;\n  }) => {\n    const messageRuntime = tapMemo(\n      () => runtime.getMessageById(id),\n      [runtime, id],\n    );\n\n    return tapInlineResource(\n      MessageClient({ runtime: messageRuntime, threadIdRef }),\n    );\n  },\n);\n\nexport const ThreadClient = resource(\n  ({ runtime }: { runtime: ThreadRuntime }): ClientOutput<\"thread\"> => {\n    const runtimeState = tapSubscribable(runtime);\n    const emit = tapAssistantEmit();\n\n    // Bind thread events to event manager\n    tapEffect(() => {\n      const unsubscribers: Unsubscribe[] = [];\n\n      // Subscribe to thread events\n      const threadEvents: ThreadRuntimeEventType[] = [\n        \"runStart\",\n        \"runEnd\",\n        \"initialize\",\n        \"modelContextUpdate\",\n      ];\n\n      for (const event of threadEvents) {\n        const unsubscribe = runtime.unstable_on(event, () => {\n          const threadId = runtime.getState()?.threadId || \"unknown\";\n          emit(`thread.${event}`, {\n            threadId,\n          });\n        });\n        unsubscribers.push(unsubscribe);\n      }\n\n      return () => {\n        for (const unsub of unsubscribers) unsub();\n      };\n    }, [runtime, emit]);\n\n    const threadIdRef = tapMemo(\n      () => ({\n        get current() {\n          return runtime.getState()!.threadId;\n        },\n      }),\n      [runtime],\n    );\n\n    const composer = tapClientResource(\n      ComposerClient({\n        runtime: runtime.composer,\n        threadIdRef,\n      }),\n    );\n\n    const messages = tapClientLookup(\n      () =>\n        runtimeState.messages.map((m) =>\n          withKey(m.id, MessageClientById({ runtime, id: m.id, threadIdRef })),\n        ),\n      [runtimeState.messages, runtime, threadIdRef],\n    );\n\n    const state = tapMemo<ThreadState>(() => {\n      return {\n        isEmpty: messages.state.length === 0 && !runtimeState.isLoading,\n        isDisabled: runtimeState.isDisabled,\n        isLoading: runtimeState.isLoading,\n        isRunning: runtimeState.isRunning,\n        capabilities: runtimeState.capabilities,\n        state: runtimeState.state,\n        suggestions: runtimeState.suggestions,\n        extras: runtimeState.extras,\n        speech: runtimeState.speech,\n\n        composer: composer.state,\n        messages: messages.state,\n      };\n    }, [runtimeState, messages, composer.state]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        composer: composer.methods,\n        append: runtime.append,\n        startRun: runtime.startRun,\n        unstable_resumeRun: runtime.unstable_resumeRun,\n        cancelRun: runtime.cancelRun,\n        getModelContext: runtime.getModelContext,\n        export: runtime.export,\n        import: runtime.import,\n        reset: runtime.reset,\n        stopSpeaking: runtime.stopSpeaking,\n        startVoice: async () => {\n          throw new Error(\"startVoice is not supported in this runtime\");\n        },\n        stopVoice: async () => {\n          throw new Error(\"stopVoice is not supported in this runtime\");\n        },\n        message: (selector) => {\n          if (\"id\" in selector) {\n            return messages.get({ key: selector.id });\n          } else {\n            return messages.get(selector);\n          }\n        },\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 508, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/client/ThreadListRuntimeClient.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/client/ThreadListRuntimeClient.ts"],"sourcesContent":["import {\n  withKey,\n  resource,\n  tapInlineResource,\n  tapMemo,\n} from \"@assistant-ui/tap\";\nimport {\n  type ClientOutput,\n  tapClientLookup,\n  tapClientResource,\n} from \"@assistant-ui/store\";\nimport { ThreadListRuntime } from \"../runtime/ThreadListRuntime\";\nimport { tapSubscribable } from \"../util-hooks/tapSubscribable\";\nimport { ThreadListItemClient } from \"./ThreadListItemRuntimeClient\";\nimport { ThreadClient } from \"./ThreadRuntimeClient\";\nimport { ThreadsState } from \"../../types/scopes\";\nimport type { AssistantRuntime } from \"../runtime/AssistantRuntime\";\n\nconst ThreadListItemClientById = resource(\n  ({ runtime, id }: { runtime: ThreadListRuntime; id: string }) => {\n    const threadListItemRuntime = tapMemo(\n      () => runtime.getItemById(id),\n      [runtime, id],\n    );\n    return tapInlineResource(\n      ThreadListItemClient({\n        runtime: threadListItemRuntime,\n      }),\n    );\n  },\n);\n\nexport const ThreadListClient = resource(\n  ({\n    runtime,\n    __internal_assistantRuntime,\n  }: {\n    runtime: ThreadListRuntime;\n    __internal_assistantRuntime: AssistantRuntime;\n  }): ClientOutput<\"threads\"> => {\n    const runtimeState = tapSubscribable(runtime);\n\n    const main = tapClientResource(\n      ThreadClient({\n        runtime: runtime.main,\n      }),\n    );\n\n    const threadItems = tapClientLookup(\n      () =>\n        Object.keys(runtimeState.threadItems).map((id) =>\n          withKey(id, ThreadListItemClientById({ runtime, id })),\n        ),\n      [runtimeState.threadItems, runtime],\n    );\n\n    const state = tapMemo<ThreadsState>(() => {\n      return {\n        mainThreadId: runtimeState.mainThreadId,\n        newThreadId: runtimeState.newThreadId ?? null,\n        isLoading: runtimeState.isLoading,\n        threadIds: runtimeState.threadIds,\n        archivedThreadIds: runtimeState.archivedThreadIds,\n        threadItems: threadItems.state,\n\n        main: main.state,\n      };\n    }, [runtimeState, threadItems.state, main.state]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        thread: () => main.methods,\n        item: (threadIdOrOptions) => {\n          if (threadIdOrOptions === \"main\") {\n            return threadItems.get({ key: state.mainThreadId });\n          }\n\n          if (\"id\" in threadIdOrOptions) {\n            return threadItems.get({ key: threadIdOrOptions.id });\n          }\n\n          const { index, archived = false } = threadIdOrOptions;\n          const id = archived\n            ? state.archivedThreadIds[index]!\n            : state.threadIds[index]!;\n          return threadItems.get({ key: id });\n        },\n        switchToThread: async (threadId) => {\n          await runtime.switchToThread(threadId);\n        },\n        switchToNewThread: async () => {\n          await runtime.switchToNewThread();\n        },\n        __internal_getAssistantRuntime: () => __internal_assistantRuntime,\n      },\n    };\n  },\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 598, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/model-context/ModelContextTypes.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/model-context/ModelContextTypes.ts"],"sourcesContent":["import { Unsubscribe } from \"../types/Unsubscribe\";\nimport { Tool } from \"assistant-stream\";\n\nexport type LanguageModelV1CallSettings = {\n  maxTokens?: number;\n  temperature?: number;\n  topP?: number;\n  presencePenalty?: number;\n  frequencyPenalty?: number;\n  seed?: number;\n  headers?: Record<string, string | undefined>;\n};\n\nexport type LanguageModelConfig = {\n  apiKey?: string;\n  baseUrl?: string;\n  modelName?: string;\n};\n\nexport type ModelContext = {\n  priority?: number | undefined;\n  system?: string | undefined;\n  tools?: Record<string, Tool<any, any>> | undefined;\n  callSettings?: LanguageModelV1CallSettings | undefined;\n  config?: LanguageModelConfig | undefined;\n};\n\nexport type ModelContextProvider = {\n  getModelContext: () => ModelContext;\n  subscribe?: (callback: () => void) => Unsubscribe;\n};\n\nexport const mergeModelContexts = (\n  configSet: Set<ModelContextProvider>,\n): ModelContext => {\n  const configs = Array.from(configSet)\n    .map((c) => c.getModelContext())\n    .sort((a, b) => (b.priority ?? 0) - (a.priority ?? 0));\n\n  return configs.reduce((acc, config) => {\n    if (config.system) {\n      if (acc.system) {\n        // TODO should the separator be configurable?\n        acc.system += `\\n\\n${config.system}`;\n      } else {\n        acc.system = config.system;\n      }\n    }\n    if (config.tools) {\n      for (const [name, tool] of Object.entries(config.tools)) {\n        const existing = acc.tools?.[name];\n        if (existing && existing !== tool) {\n          throw new Error(\n            `You tried to define a tool with the name ${name}, but it already exists.`,\n          );\n        }\n\n        if (!acc.tools) acc.tools = {};\n        acc.tools[name] = tool;\n      }\n    }\n    if (config.config) {\n      acc.config = {\n        ...acc.config,\n        ...config.config,\n      };\n    }\n    if (config.callSettings) {\n      acc.callSettings = {\n        ...acc.callSettings,\n        ...config.callSettings,\n      };\n    }\n    return acc;\n  }, {} as ModelContext);\n};\n"],"names":[],"mappings":";;;;AAgCO,MAAM,kBAAkB,GAAG,CAChC,SAAoC,EACtB,EAAE;IAChB,MAAM,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAClC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAG,CAAD,AAAE,CAAC,eAAe,EAAE,CAAC,CAC/B,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAG,CAAD,AAAE,CAAC,CAAC,QAAQ,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,IAAI,CAAC,CAAC,CAAC,CAAC;IAEzD,OAAO,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,MAAM,EAAE,EAAE;QACpC,IAAI,MAAM,CAAC,MAAM,EAAE,CAAC;YAClB,IAAI,GAAG,CAAC,MAAM,EAAE,CAAC;gBACf,6CAA6C;gBAC7C,GAAG,CAAC,MAAM,IAAI,CAAA,IAAA,EAAO,MAAM,CAAC,MAAM,EAAE,CAAC;YACvC,CAAC,MAAM,CAAC;gBACN,GAAG,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;YAC7B,CAAC;QACH,CAAC;QACD,IAAI,MAAM,CAAC,KAAK,EAAE,CAAC;YACjB,KAAK,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAE,CAAC;gBACxD,MAAM,QAAQ,GAAG,GAAG,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC;gBACnC,IAAI,QAAQ,IAAI,QAAQ,KAAK,IAAI,EAAE,CAAC;oBAClC,MAAM,IAAI,KAAK,CACb,CAAA,yCAAA,EAA4C,IAAI,CAAA,wBAAA,CAA0B,CAC3E,CAAC;gBACJ,CAAC;gBAED,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,KAAK,GAAG,CAAA,CAAE,CAAC;gBAC/B,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;YACzB,CAAC;QACH,CAAC;QACD,IAAI,MAAM,CAAC,MAAM,EAAE,CAAC;YAClB,GAAG,CAAC,MAAM,GAAG;gBACX,GAAG,GAAG,CAAC,MAAM;gBACb,GAAG,MAAM,CAAC,MAAM;aACjB,CAAC;QACJ,CAAC;QACD,IAAI,MAAM,CAAC,YAAY,EAAE,CAAC;YACxB,GAAG,CAAC,YAAY,GAAG;gBACjB,GAAG,GAAG,CAAC,YAAY;gBACnB,GAAG,MAAM,CAAC,YAAY;aACvB,CAAC;QACJ,CAAC;QACD,OAAO,GAAG,CAAC;IACb,CAAC,EAAE,CAAA,CAAkB,CAAC,CAAC;AACzB,CAAC,CAAC"}},
    {"offset": {"line": 642, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/utils/CompositeContextProvider.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/utils/CompositeContextProvider.ts"],"sourcesContent":["import {\n  type ModelContextProvider,\n  mergeModelContexts,\n} from \"../model-context/ModelContextTypes\";\n\nexport class CompositeContextProvider implements ModelContextProvider {\n  private _providers = new Set<ModelContextProvider>();\n\n  getModelContext() {\n    return mergeModelContexts(this._providers);\n  }\n\n  registerModelContextProvider(provider: ModelContextProvider) {\n    this._providers.add(provider);\n    const unsubscribe = provider.subscribe?.(() => {\n      this.notifySubscribers();\n    });\n    this.notifySubscribers();\n    return () => {\n      this._providers.delete(provider);\n      unsubscribe?.();\n      this.notifySubscribers();\n    };\n  }\n\n  private _subscribers = new Set<() => void>();\n\n  notifySubscribers() {\n    for (const callback of this._subscribers) callback();\n  }\n\n  subscribe(callback: () => void) {\n    this._subscribers.add(callback);\n    return () => this._subscribers.delete(callback);\n  }\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAEL,kBAAkB,GACnB,8CAA2C;;AAEtC,MAAO,wBAAwB;IAC3B,UAAU,GAAG,IAAI,GAAG,EAAwB,CAAC;IAErD,eAAe,GAAA;QACb,WAAO,oNAAkB,EAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAC7C,CAAC;IAED,4BAA4B,CAAC,QAA8B,EAAA;QACzD,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC9B,MAAM,WAAW,GAAG,QAAQ,CAAC,SAAS,EAAE,CAAC,GAAG,EAAE;YAC5C,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC3B,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,OAAO,GAAG,EAAE;YACV,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YACjC,WAAW,EAAE,EAAE,CAAC;YAChB,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC3B,CAAC,CAAC;IACJ,CAAC;IAEO,YAAY,GAAG,IAAI,GAAG,EAAc,CAAC;IAE7C,iBAAiB,GAAA;QACf,KAAK,MAAM,QAAQ,IAAI,IAAI,CAAC,YAAY,CAAE,QAAQ,EAAE,CAAC;IACvD,CAAC;IAED,SAAS,CAAC,QAAoB,EAAA;QAC5B,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAChC,OAAO,GAAG,CAAG,CAAD,GAAK,CAAC,YAAY,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IAClD,CAAC;CACF"}},
    {"offset": {"line": 678, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/client/ModelContextClient.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/client/ModelContextClient.ts"],"sourcesContent":["import { resource, tapMemo, tapState } from \"@assistant-ui/tap\";\nimport { type ClientOutput } from \"@assistant-ui/store\";\nimport { CompositeContextProvider } from \"../utils/CompositeContextProvider\";\nimport type { ModelContextState } from \"../types/scopes\";\n\nconst version = 1;\n\nexport const ModelContext = resource((): ClientOutput<\"modelContext\"> => {\n  const [state] = tapState<ModelContextState>(\n    () => ({ version: version + 1 }) as unknown as ModelContextState,\n  );\n  const composite = tapMemo(() => new CompositeContextProvider(), []);\n\n  return {\n    state,\n    methods: {\n      getState: () => state,\n      getModelContext: () => composite.getModelContext(),\n      subscribe: (callback) => composite.subscribe(callback),\n      register: (provider) => composite.registerModelContextProvider(provider),\n    },\n  };\n});\n"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAEhE,OAAO,EAAE,wBAAwB,EAAE,6CAA0C;;;AAG7E,MAAM,OAAO,GAAG,CAAC,CAAC;AAEX,MAAM,YAAY,OAAG,mLAAQ,EAAC,GAAiC,EAAE;IACtE,MAAM,CAAC,KAAK,CAAC,OAAG,wLAAQ,EACtB,GAAG,CAAG,CAAD,AAAE;YAAE,OAAO,EAAE,OAAO,GAAG,CAAC;QAAA,CAAE,CAAiC,CACjE,CAAC;IACF,MAAM,SAAS,OAAG,sLAAO,EAAC,GAAG,CAAG,CAAD,GAAK,sNAAwB,EAAE,EAAE,EAAE,CAAC,CAAC;IAEpE,OAAO;QACL,KAAK;QACL,OAAO,EAAE;YACP,QAAQ,EAAE,GAAG,CAAG,CAAD,IAAM;YACrB,eAAe,EAAE,GAAG,CAAG,CAAD,QAAU,CAAC,eAAe,EAAE;YAClD,SAAS,EAAE,CAAC,QAAQ,EAAE,CAAG,CAAD,QAAU,CAAC,SAAS,CAAC,QAAQ,CAAC;YACtD,QAAQ,EAAE,CAAC,QAAQ,EAAE,CAAG,CAAD,QAAU,CAAC,4BAA4B,CAAC,QAAQ,CAAC;SACzE;KACF,CAAC;AACJ,CAAC,CAAC,CAAC"}},
    {"offset": {"line": 708, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/client/Tools.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/client/Tools.ts"],"sourcesContent":["import { resource, tapState, tapEffect, tapCallback } from \"@assistant-ui/tap\";\nimport {\n  tapAssistantClientRef,\n  type ClientOutput,\n  attachDefaultPeers,\n} from \"@assistant-ui/store\";\nimport { ToolsState } from \"../types/scopes\";\nimport type { Tool } from \"assistant-stream\";\nimport { type Toolkit } from \"../model-context/toolbox\";\nimport { ToolCallMessagePartComponent } from \"../types\";\nimport { ModelContext } from \"./ModelContextClient\";\n\nexport const Tools = resource(\n  ({ toolkit }: { toolkit?: Toolkit }): ClientOutput<\"tools\"> => {\n    const [state, setState] = tapState<ToolsState>(() => ({\n      tools: {},\n    }));\n\n    const clientRef = tapAssistantClientRef();\n\n    const setToolUI = tapCallback(\n      (toolName: string, render: ToolCallMessagePartComponent) => {\n        setState((prev) => {\n          return {\n            ...prev,\n            tools: {\n              ...prev.tools,\n              [toolName]: [...(prev.tools[toolName] ?? []), render],\n            },\n          };\n        });\n\n        return () => {\n          setState((prev) => {\n            return {\n              ...prev,\n              tools: {\n                ...prev.tools,\n                [toolName]:\n                  prev.tools[toolName]?.filter((r) => r !== render) ?? [],\n              },\n            };\n          });\n        };\n      },\n      [],\n    );\n\n    tapEffect(() => {\n      if (!toolkit) return;\n      const unsubscribes: (() => void)[] = [];\n\n      // Register tool UIs (exclude symbols)\n      for (const [toolName, tool] of Object.entries(toolkit)) {\n        if (tool.render) {\n          unsubscribes.push(setToolUI(toolName, tool.render));\n        }\n      }\n\n      // Register tools with model context (exclude symbols)\n      const toolsWithoutRender = Object.entries(toolkit).reduce(\n        (acc, [name, tool]) => {\n          const { render, ...rest } = tool;\n          acc[name] = rest;\n          return acc;\n        },\n        {} as Record<string, Tool<any, any>>,\n      );\n\n      const modelContextProvider = {\n        getModelContext: () => ({\n          tools: toolsWithoutRender,\n        }),\n      };\n\n      unsubscribes.push(\n        clientRef.current!.modelContext().register(modelContextProvider),\n      );\n\n      return () => {\n        unsubscribes.forEach((fn) => fn());\n      };\n    }, [toolkit, setToolUI, clientRef]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        setToolUI,\n      },\n    };\n  },\n);\n\nattachDefaultPeers(Tools, {\n  modelContext: ModelContext(),\n});\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 796, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/client/Suggestions.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/client/Suggestions.ts"],"sourcesContent":["import { resource, tapState, withKey } from \"@assistant-ui/tap\";\nimport { type ClientOutput, tapClientLookup } from \"@assistant-ui/store\";\nimport type { SuggestionsState, SuggestionState } from \"../types/scopes\";\n\nexport type SuggestionConfig =\n  | string\n  | { title: string; label: string; prompt: string };\n\nconst SuggestionClient = resource(\n  (state: SuggestionState): ClientOutput<\"suggestion\"> => {\n    return {\n      state,\n      methods: {\n        getState: () => state,\n      },\n    };\n  },\n);\n\nconst SuggestionsResource = resource(\n  (suggestions?: SuggestionConfig[]): ClientOutput<\"suggestions\"> => {\n    const [state] = tapState<SuggestionsState>(() => {\n      const normalizedSuggestions = (suggestions ?? []).map((s) => {\n        if (typeof s === \"string\") {\n          return {\n            title: s,\n            label: \"\",\n            prompt: s,\n          };\n        }\n        return {\n          title: s.title,\n          label: s.label,\n          prompt: s.prompt,\n        };\n      });\n\n      return {\n        suggestions: normalizedSuggestions,\n      };\n    });\n\n    const suggestionClients = tapClientLookup(\n      () =>\n        state.suggestions.map((suggestion, index) =>\n          withKey(index, SuggestionClient(suggestion)),\n        ),\n      [state.suggestions],\n    );\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        suggestion: ({ index }: { index: number }) => {\n          return suggestionClients.get({ index });\n        },\n      },\n    };\n  },\n);\n\nexport const Suggestions: {\n  (): import(\"@assistant-ui/tap\").ResourceElement<\n    ClientOutput<\"suggestions\">,\n    undefined\n  >;\n  (\n    suggestions: SuggestionConfig[],\n  ): import(\"@assistant-ui/tap\").ResourceElement<\n    ClientOutput<\"suggestions\">,\n    SuggestionConfig[]\n  >;\n} = SuggestionsResource as any;\n"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,mBAAmB,CAAC;AAChE,OAAO,EAAqB,eAAe,EAAE,MAAM,qBAAqB,CAAC;;;AAOzE,MAAM,gBAAgB,OAAG,mLAAQ,EAC/B,CAAC,KAAsB,EAA8B,EAAE;IACrD,OAAO;QACL,KAAK;QACL,OAAO,EAAE;YACP,QAAQ,EAAE,GAAG,CAAG,CAAD,IAAM;SACtB;KACF,CAAC;AACJ,CAAC,CACF,CAAC;AAEF,MAAM,mBAAmB,OAAG,mLAAQ,EAClC,CAAC,WAAgC,EAA+B,EAAE;IAChE,MAAM,CAAC,KAAK,CAAC,OAAG,wLAAQ,EAAmB,GAAG,EAAE;QAC9C,MAAM,qBAAqB,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE;YAC1D,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE,CAAC;gBAC1B,OAAO;oBACL,KAAK,EAAE,CAAC;oBACR,KAAK,EAAE,EAAE;oBACT,MAAM,EAAE,CAAC;iBACV,CAAC;YACJ,CAAC;YACD,OAAO;gBACL,KAAK,EAAE,CAAC,CAAC,KAAK;gBACd,KAAK,EAAE,CAAC,CAAC,KAAK;gBACd,MAAM,EAAE,CAAC,CAAC,MAAM;aACjB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,OAAO;YACL,WAAW,EAAE,qBAAqB;SACnC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,MAAM,iBAAiB,OAAG,2LAAe,EACvC,GAAG,CACD,CADG,IACE,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,KAAK,EAAE,EAAE,GAC1C,iLAAO,EAAC,KAAK,EAAE,gBAAgB,CAAC,UAAU,CAAC,CAAC,CAC7C,EACH;QAAC,KAAK,CAAC,WAAW;KAAC,CACpB,CAAC;IAEF,OAAO;QACL,KAAK;QACL,OAAO,EAAE;YACP,QAAQ,EAAE,GAAG,CAAG,CAAD,IAAM;YACrB,UAAU,EAAE,CAAC,EAAE,KAAK,EAAqB,EAAE,EAAE;gBAC3C,OAAO,iBAAiB,CAAC,GAAG,CAAC;oBAAE,KAAK;gBAAA,CAAE,CAAC,CAAC;YAC1C,CAAC;SACF;KACF,CAAC;AACJ,CAAC,CACF,CAAC;AAEK,MAAM,WAAW,GAWpB,mBAA0B,CAAC"}},
    {"offset": {"line": 854, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/RuntimeAdapter.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/RuntimeAdapter.ts"],"sourcesContent":["import { resource, tapEffect, tapInlineResource } from \"@assistant-ui/tap\";\nimport type { AssistantRuntime } from \"./runtime/AssistantRuntime\";\nimport { ThreadListClient } from \"./client/ThreadListRuntimeClient\";\nimport {\n  tapAssistantClientRef,\n  Derived,\n  attachDefaultPeers,\n} from \"@assistant-ui/store\";\nimport { ModelContext } from \"../client/ModelContextClient\";\nimport { Tools, Suggestions } from \"../model-context\";\n\nexport const RuntimeAdapter = resource((runtime: AssistantRuntime) => {\n  const clientRef = tapAssistantClientRef();\n\n  tapEffect(() => {\n    return runtime.registerModelContextProvider(\n      clientRef.current!.modelContext(),\n    );\n  }, [runtime, clientRef]);\n\n  return tapInlineResource(\n    ThreadListClient({\n      runtime: runtime.threads,\n      __internal_assistantRuntime: runtime,\n    }),\n  );\n});\n\nattachDefaultPeers(RuntimeAdapter, {\n  modelContext: ModelContext(),\n  tools: Tools({}),\n  suggestions: Suggestions(),\n  threadListItem: Derived({\n    source: \"threads\",\n    query: { type: \"main\" },\n    get: (aui) => aui.threads().item(\"main\"),\n  }),\n  thread: Derived({\n    source: \"threads\",\n    query: { type: \"main\" },\n    get: (aui) => aui.threads().thread(\"main\"),\n  }),\n  composer: Derived({\n    source: \"thread\",\n    query: {},\n    get: (aui) => aui.threads().thread(\"main\").composer,\n  }),\n});\n"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,iBAAiB,EAAE,MAAM,mBAAmB,CAAC;AAE3E,OAAO,EAAE,gBAAgB,EAAE,4CAAyC;;;AACpE,OAAO,EACL,qBAAqB,EACrB,OAAO,EACP,kBAAkB,GACnB,MAAM,qBAAqB,CAAC;AAC7B,OAAO,EAAE,YAAY,EAAE,wCAAqC;;AAC5D,OAAO,EAAE,KAAK,EAAE,WAAW,EAAE,kCAAyB;;;;;;AAE/C,MAAM,cAAc,OAAG,mLAAQ,EAAC,CAAC,OAAyB,EAAE,EAAE;IACnE,MAAM,SAAS,OAAG,sNAAqB,EAAE,CAAC;QAE1C,0LAAS,EAAC,GAAG,EAAE;QACb,OAAO,OAAO,CAAC,4BAA4B,CACzC,SAAS,CAAC,OAAQ,CAAC,YAAY,EAAE,CAClC,CAAC;IACJ,CAAC,EAAE;QAAC,OAAO;QAAE,SAAS;KAAC,CAAC,CAAC;IAEzB,WAAO,8MAAiB,MACtB,mOAAgB,EAAC;QACf,OAAO,EAAE,OAAO,CAAC,OAAO;QACxB,2BAA2B,EAAE,OAAO;KACrC,CAAC,CACH,CAAC;AACJ,CAAC,CAAC,CAAC;IAEH,iMAAkB,EAAC,cAAc,EAAE;IACjC,YAAY,MAAE,qMAAY,EAAE;IAC5B,KAAK,MAAE,iLAAK,EAAC,CAAA,CAAE,CAAC;IAChB,WAAW,MAAE,6LAAW,EAAE;IAC1B,cAAc,MAAE,2KAAO,EAAC;QACtB,MAAM,EAAE,SAAS;QACjB,KAAK,EAAE;YAAE,IAAI,EAAE,MAAM;QAAA,CAAE;QACvB,GAAG,EAAE,CAAC,GAAG,EAAE,CAAG,CAAD,EAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC;KACzC,CAAC;IACF,MAAM,MAAE,2KAAO,EAAC;QACd,MAAM,EAAE,SAAS;QACjB,KAAK,EAAE;YAAE,IAAI,EAAE,MAAM;QAAA,CAAE;QACvB,GAAG,EAAE,CAAC,GAAG,EAAE,CAAG,CAAD,EAAI,CAAC,OAAO,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;KAC3C,CAAC;IACF,QAAQ,MAAE,2KAAO,EAAC;QAChB,MAAM,EAAE,QAAQ;QAChB,KAAK,EAAE,CAAA,CAAE;QACT,GAAG,EAAE,CAAC,GAAG,EAAE,CAAG,CAAD,EAAI,CAAC,OAAO,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,QAAQ;KACpD,CAAC;CACH,CAAC,CAAC"}},
    {"offset": {"line": 914, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/context/stores/ThreadViewport.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/context/stores/ThreadViewport.tsx"],"sourcesContent":["\"use client\";\n\nimport { create } from \"zustand\";\nimport type { Unsubscribe } from \"../../types/Unsubscribe\";\n\nexport type SizeHandle = {\n  /** Update the height */\n  setHeight: (height: number) => void;\n  /** Unregister this handle */\n  unregister: Unsubscribe;\n};\n\ntype SizeRegistry = {\n  register: () => SizeHandle;\n};\n\nconst createSizeRegistry = (\n  onChange: (total: number) => void,\n): SizeRegistry => {\n  const entries = new Map<symbol, number>();\n\n  const recalculate = () => {\n    let total = 0;\n    for (const height of entries.values()) {\n      total += height;\n    }\n    onChange(total);\n  };\n\n  return {\n    register: () => {\n      const id = Symbol();\n      entries.set(id, 0);\n\n      return {\n        setHeight: (height: number) => {\n          if (entries.get(id) !== height) {\n            entries.set(id, height);\n            recalculate();\n          }\n        },\n        unregister: () => {\n          entries.delete(id);\n          recalculate();\n        },\n      };\n    },\n  };\n};\n\nexport type ThreadViewportState = {\n  readonly isAtBottom: boolean;\n  readonly scrollToBottom: (config?: {\n    behavior?: ScrollBehavior | undefined;\n  }) => void;\n  readonly onScrollToBottom: (\n    callback: ({ behavior }: { behavior: ScrollBehavior }) => void,\n  ) => Unsubscribe;\n\n  /** Controls scroll anchoring: \"top\" anchors user messages at top, \"bottom\" is classic behavior */\n  readonly turnAnchor: \"top\" | \"bottom\";\n\n  /** Raw height values from registered elements */\n  readonly height: {\n    /** Total viewport height */\n    readonly viewport: number;\n    /** Total content inset height (footer, anchor message, etc.) */\n    readonly inset: number;\n    /** Height of the anchor user message (full height) */\n    readonly userMessage: number;\n  };\n\n  /** Register a viewport and get a handle to update its height */\n  readonly registerViewport: () => SizeHandle;\n\n  /** Register a content inset (footer, anchor message, etc.) and get a handle to update its height */\n  readonly registerContentInset: () => SizeHandle;\n\n  /** Register the anchor user message height */\n  readonly registerUserMessageHeight: () => SizeHandle;\n};\n\nexport type ThreadViewportStoreOptions = {\n  turnAnchor?: \"top\" | \"bottom\" | undefined;\n};\n\nexport const makeThreadViewportStore = (\n  options: ThreadViewportStoreOptions = {},\n) => {\n  const scrollToBottomListeners = new Set<\n    (config: { behavior: ScrollBehavior }) => void\n  >();\n\n  const viewportRegistry = createSizeRegistry((total) => {\n    store.setState({\n      height: {\n        ...store.getState().height,\n        viewport: total,\n      },\n    });\n  });\n  const insetRegistry = createSizeRegistry((total) => {\n    store.setState({\n      height: {\n        ...store.getState().height,\n        inset: total,\n      },\n    });\n  });\n  const userMessageRegistry = createSizeRegistry((total) => {\n    store.setState({\n      height: {\n        ...store.getState().height,\n        userMessage: total,\n      },\n    });\n  });\n\n  const store = create<ThreadViewportState>(() => ({\n    isAtBottom: true,\n    scrollToBottom: ({ behavior = \"auto\" } = {}) => {\n      for (const listener of scrollToBottomListeners) {\n        listener({ behavior });\n      }\n    },\n    onScrollToBottom: (callback) => {\n      scrollToBottomListeners.add(callback);\n      return () => {\n        scrollToBottomListeners.delete(callback);\n      };\n    },\n\n    turnAnchor: options.turnAnchor ?? \"bottom\",\n\n    height: {\n      viewport: 0,\n      inset: 0,\n      userMessage: 0,\n    },\n\n    registerViewport: viewportRegistry.register,\n    registerContentInset: insetRegistry.register,\n    registerUserMessageHeight: userMessageRegistry.register,\n  }));\n\n  return store;\n};\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAAE,MAAM,EAAE,MAAM,SAAS,CAAC;AAFjC,YAAY,CAAC;;AAgBb,MAAM,kBAAkB,GAAG,CACzB,QAAiC,EACnB,EAAE;IAChB,MAAM,OAAO,GAAG,IAAI,GAAG,EAAkB,CAAC;IAE1C,MAAM,WAAW,GAAG,GAAG,EAAE;QACvB,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,KAAK,MAAM,MAAM,IAAI,OAAO,CAAC,MAAM,EAAE,CAAE,CAAC;YACtC,KAAK,IAAI,MAAM,CAAC;QAClB,CAAC;QACD,QAAQ,CAAC,KAAK,CAAC,CAAC;IAClB,CAAC,CAAC;IAEF,OAAO;QACL,QAAQ,EAAE,GAAG,EAAE;YACb,MAAM,EAAE,GAAG,MAAM,EAAE,CAAC;YACpB,OAAO,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;YAEnB,OAAO;gBACL,SAAS,EAAE,CAAC,MAAc,EAAE,EAAE;oBAC5B,IAAI,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,MAAM,EAAE,CAAC;wBAC/B,OAAO,CAAC,GAAG,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;wBACxB,WAAW,EAAE,CAAC;oBAChB,CAAC;gBACH,CAAC;gBACD,UAAU,EAAE,GAAG,EAAE;oBACf,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;oBACnB,WAAW,EAAE,CAAC;gBAChB,CAAC;aACF,CAAC;QACJ,CAAC;KACF,CAAC;AACJ,CAAC,CAAC;AAsCK,MAAM,uBAAuB,GAAG,CACrC,UAAsC,CAAA,CAAE,EACxC,EAAE;IACF,MAAM,uBAAuB,GAAG,IAAI,GAAG,EAEpC,CAAC;IAEJ,MAAM,gBAAgB,GAAG,kBAAkB,CAAC,CAAC,KAAK,EAAE,EAAE;QACpD,KAAK,CAAC,QAAQ,CAAC;YACb,MAAM,EAAE;gBACN,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,MAAM;gBAC1B,QAAQ,EAAE,KAAK;aAChB;SACF,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IACH,MAAM,aAAa,GAAG,kBAAkB,CAAC,CAAC,KAAK,EAAE,EAAE;QACjD,KAAK,CAAC,QAAQ,CAAC;YACb,MAAM,EAAE;gBACN,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,MAAM;gBAC1B,KAAK,EAAE,KAAK;aACb;SACF,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IACH,MAAM,mBAAmB,GAAG,kBAAkB,CAAC,CAAC,KAAK,EAAE,EAAE;QACvD,KAAK,CAAC,QAAQ,CAAC;YACb,MAAM,EAAE;gBACN,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,MAAM;gBAC1B,WAAW,EAAE,KAAK;aACnB;SACF,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,MAAM,KAAK,OAAG,qJAAM,EAAsB,GAAG,CAAG,CAAD,AAAE;YAC/C,UAAU,EAAE,IAAI;YAChB,cAAc,EAAE,CAAC,EAAE,QAAQ,GAAG,MAAM,EAAE,GAAG,CAAA,CAAE,EAAE,EAAE;gBAC7C,KAAK,MAAM,QAAQ,IAAI,uBAAuB,CAAE,CAAC;oBAC/C,QAAQ,CAAC;wBAAE,QAAQ;oBAAA,CAAE,CAAC,CAAC;gBACzB,CAAC;YACH,CAAC;YACD,gBAAgB,EAAE,CAAC,QAAQ,EAAE,EAAE;gBAC7B,uBAAuB,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gBACtC,OAAO,GAAG,EAAE;oBACV,uBAAuB,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBAC3C,CAAC,CAAC;YACJ,CAAC;YAED,UAAU,EAAE,OAAO,CAAC,UAAU,IAAI,QAAQ;YAE1C,MAAM,EAAE;gBACN,QAAQ,EAAE,CAAC;gBACX,KAAK,EAAE,CAAC;gBACR,WAAW,EAAE,CAAC;aACf;YAED,gBAAgB,EAAE,gBAAgB,CAAC,QAAQ;YAC3C,oBAAoB,EAAE,aAAa,CAAC,QAAQ;YAC5C,yBAAyB,EAAE,mBAAmB,CAAC,QAAQ;SACxD,CAAC,CAAC,CAAC;IAEJ,OAAO,KAAK,CAAC;AACf,CAAC,CAAC"}},
    {"offset": {"line": 1006, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/context/react/utils/createContextHook.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/context/react/utils/createContextHook.ts"],"sourcesContent":["\"use client\";\n\nimport { useContext, Context } from \"react\";\n\n/**\n * Creates a context hook with optional support.\n * @param context - The React context to consume.\n * @param providerName - The name of the provider for error messages.\n * @returns A hook function that provides the context value.\n */\nexport function createContextHook<T>(\n  context: Context<T | null>,\n  providerName: string,\n) {\n  function useContextHook(options?: {\n    optional?: boolean | undefined;\n  }): T | null {\n    const contextValue = useContext(context);\n    if (!options?.optional && !contextValue) {\n      throw new Error(`This component must be used within ${providerName}.`);\n    }\n    return contextValue;\n  }\n\n  return useContextHook;\n}\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAAE,UAAU,EAAW,MAAM,OAAO,CAAC;AAF5C,YAAY,CAAC;;AAUP,SAAU,iBAAiB,CAC/B,OAA0B,EAC1B,YAAoB;IAEpB,SAAS,cAAc,CAAC,OAEvB;QACC,MAAM,YAAY,OAAG,2KAAU,EAAC,OAAO,CAAC,CAAC;QACzC,IAAI,CAAC,OAAO,EAAE,QAAQ,IAAI,CAAC,YAAY,EAAE,CAAC;YACxC,MAAM,IAAI,KAAK,CAAC,CAAA,mCAAA,EAAsC,YAAY,CAAA,CAAA,CAAG,CAAC,CAAC;QACzE,CAAC;QACD,OAAO,YAAY,CAAC;IACtB,CAAC;IAED,OAAO,cAAc,CAAC;AACxB,CAAC"}},
    {"offset": {"line": 1027, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/context/react/utils/createContextStoreHook.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/context/react/utils/createContextStoreHook.ts"],"sourcesContent":["import { UseBoundStore } from \"zustand\";\nimport { ReadonlyStore } from \"../../ReadonlyStore\";\n\n/**\n * Creates hooks for accessing a store within a context.\n * @param contextHook - The hook to access the context.\n * @param contextKey - The key of the store in the context.\n * @returns An object containing the hooks: `use...` and `use...Store`.\n */\nexport function createContextStoreHook<T, K extends keyof T & string>(\n  contextHook: (options?: { optional?: boolean }) => T | null,\n  contextKey: K,\n) {\n  type StoreType = T[K];\n  type StateType = StoreType extends ReadonlyStore<infer S> ? S : never;\n\n  // Define useStoreStoreHook with overloads\n  function useStoreStoreHook(): ReadonlyStore<StateType>;\n  function useStoreStoreHook(options: {\n    optional: true;\n  }): ReadonlyStore<StateType> | null;\n  function useStoreStoreHook(options?: {\n    optional?: boolean;\n  }): ReadonlyStore<StateType> | null {\n    const context = contextHook(options);\n    if (!context) return null;\n    return context[contextKey] as ReadonlyStore<StateType>;\n  }\n\n  // Define useStoreHook with overloads\n  function useStoreHook(): StateType;\n  function useStoreHook<TSelected>(\n    selector: (state: StateType) => TSelected,\n  ): TSelected;\n  function useStoreHook(options: { optional: true }): StateType | null;\n  function useStoreHook<TSelected>(options: {\n    optional: true;\n    selector?: (state: StateType) => TSelected;\n  }): TSelected | null;\n  function useStoreHook<TSelected>(\n    param?:\n      | ((state: StateType) => TSelected)\n      | {\n          optional?: boolean;\n          selector?: (state: StateType) => TSelected;\n        },\n  ): TSelected | StateType | null {\n    let optional = false;\n    let selector: ((state: StateType) => TSelected) | undefined;\n\n    if (typeof param === \"function\") {\n      selector = param;\n    } else if (param && typeof param === \"object\") {\n      optional = !!param.optional;\n      selector = param.selector;\n    }\n\n    const store = useStoreStoreHook({\n      optional,\n    } as any) as UseBoundStore<ReadonlyStore<StateType>>;\n    if (!store) return null;\n    return selector ? store(selector) : store();\n  }\n\n  // Return an object with keys based on contextKey\n  return {\n    [contextKey]: useStoreHook,\n    [`${contextKey}Store`]: useStoreStoreHook,\n  } as {\n    [P in K]: typeof useStoreHook;\n  } & {\n    [P in `${K}Store`]: typeof useStoreStoreHook;\n  };\n}\n"],"names":[],"mappings":"AAGA;;;;;GAKG;;;;AACG,SAAU,sBAAsB,CACpC,WAA2D,EAC3D,UAAa;IAUb,SAAS,iBAAiB,CAAC,OAE1B;QACC,MAAM,OAAO,GAAG,WAAW,CAAC,OAAO,CAAC,CAAC;QACrC,IAAI,CAAC,OAAO,EAAE,OAAO,IAAI,CAAC;QAC1B,OAAO,OAAO,CAAC,UAAU,CAA6B,CAAC;IACzD,CAAC;IAYD,SAAS,YAAY,CACnB,KAKK;QAEL,IAAI,QAAQ,GAAG,KAAK,CAAC;QACrB,IAAI,QAAuD,CAAC;QAE5D,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE,CAAC;YAChC,QAAQ,GAAG,KAAK,CAAC;QACnB,CAAC,MAAM,IAAI,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE,CAAC;YAC9C,QAAQ,GAAG,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC;YAC5B,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;QAC5B,CAAC;QAED,MAAM,KAAK,GAAG,iBAAiB,CAAC;YAC9B,QAAQ;SACF,CAA4C,CAAC;QACrD,IAAI,CAAC,KAAK,EAAE,OAAO,IAAI,CAAC;QACxB,OAAO,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;IAC9C,CAAC;IAED,iDAAiD;IACjD,OAAO;QACL,CAAC,UAAU,CAAC,EAAE,YAAY;QAC1B,CAAC,GAAG,UAAU,CAAA,KAAA,CAAO,CAAC,EAAE,iBAAiB;KAK1C,CAAC;AACJ,CAAC"}},
    {"offset": {"line": 1067, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/context/react/ThreadViewportContext.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/context/react/ThreadViewportContext.ts"],"sourcesContent":["\"use client\";\n\nimport { createContext } from \"react\";\nimport { ReadonlyStore } from \"../ReadonlyStore\";\nimport { UseBoundStore } from \"zustand\";\nimport { createContextHook } from \"./utils/createContextHook\";\nimport { createContextStoreHook } from \"./utils/createContextStoreHook\";\nimport { ThreadViewportState } from \"../stores\";\n\nexport type ThreadViewportContextValue = {\n  useThreadViewport: UseBoundStore<ReadonlyStore<ThreadViewportState>>;\n};\n\nexport const ThreadViewportContext =\n  createContext<ThreadViewportContextValue | null>(null);\n\nconst useThreadViewportContext = createContextHook(\n  ThreadViewportContext,\n  \"ThreadPrimitive.Viewport\",\n);\n\nexport const { useThreadViewport, useThreadViewportStore } =\n  createContextStoreHook(useThreadViewportContext, \"useThreadViewport\");\n"],"names":[],"mappings":";;;;;;;;AAEA,OAAO,EAAE,aAAa,EAAE,MAAM,OAAO,CAAC;AAGtC,OAAO,EAAE,iBAAiB,EAAE,qCAAkC;AAC9D,OAAO,EAAE,sBAAsB,EAAE,0CAAuC;AANxE,YAAY,CAAC;;;;AAaN,MAAM,qBAAqB,OAChC,8KAAa,EAAoC,IAAI,CAAC,CAAC;AAEzD,MAAM,wBAAwB,OAAG,4NAAiB,EAChD,qBAAqB,EACrB,0BAA0B,CAC3B,CAAC;AAEK,MAAM,EAAE,iBAAiB,EAAE,sBAAsB,EAAE,OACxD,sOAAsB,EAAC,wBAAwB,EAAE,mBAAmB,CAAC,CAAC"}},
    {"offset": {"line": 1089, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/context/ReadonlyStore.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/context/ReadonlyStore.ts"],"sourcesContent":["import type { StoreApi } from \"zustand\";\n\nexport type ReadonlyStore<T> = Omit<StoreApi<T>, \"setState\" | \"destroy\">;\n\nexport const writableStore = <T>(store: ReadonlyStore<T> | undefined) => {\n  return store as unknown as StoreApi<T>;\n};\n"],"names":[],"mappings":";;;;AAIO,MAAM,aAAa,GAAG,CAAI,KAAmC,EAAE,EAAE;IACtE,OAAO,KAA+B,CAAC;AACzC,CAAC,CAAC"}},
    {"offset": {"line": 1100, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/context/providers/ThreadViewportProvider.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/context/providers/ThreadViewportProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport { useEffect, useState } from \"react\";\nimport {\n  makeThreadViewportStore,\n  type ThreadViewportStoreOptions,\n} from \"../stores/ThreadViewport\";\nimport {\n  ThreadViewportContext,\n  ThreadViewportContextValue,\n  useThreadViewportStore,\n} from \"../react/ThreadViewportContext\";\nimport { writableStore } from \"../ReadonlyStore\";\n\nexport type ThreadViewportProviderProps = PropsWithChildren<{\n  options?: ThreadViewportStoreOptions;\n}>;\n\nconst useThreadViewportStoreValue = (options: ThreadViewportStoreOptions) => {\n  const outerViewport = useThreadViewportStore({ optional: true });\n  const [store] = useState(() => makeThreadViewportStore(options));\n\n  // Forward scrollToBottom from outer viewport to inner viewport\n  useEffect(() => {\n    return outerViewport?.getState().onScrollToBottom(() => {\n      store.getState().scrollToBottom();\n    });\n  }, [outerViewport, store]);\n\n  useEffect(() => {\n    if (!outerViewport) return;\n    return store.subscribe((state) => {\n      if (outerViewport.getState().isAtBottom !== state.isAtBottom) {\n        writableStore(outerViewport).setState({ isAtBottom: state.isAtBottom });\n      }\n    });\n  }, [store, outerViewport]);\n\n  // Sync options to store when they change\n  useEffect(() => {\n    const nextState = {\n      turnAnchor: options.turnAnchor ?? \"bottom\",\n    };\n\n    const currentState = store.getState();\n    if (currentState.turnAnchor !== nextState.turnAnchor) {\n      writableStore(store).setState(nextState);\n    }\n  }, [store, options.turnAnchor]);\n\n  return store;\n};\n\nexport const ThreadPrimitiveViewportProvider: FC<\n  ThreadViewportProviderProps\n> = ({ children, options = {} }) => {\n  const useThreadViewport = useThreadViewportStoreValue(options);\n\n  const [context] = useState<ThreadViewportContextValue>(() => {\n    return {\n      useThreadViewport,\n    };\n  });\n\n  return (\n    <ThreadViewportContext.Provider value={context}>\n      {children}\n    </ThreadViewportContext.Provider>\n  );\n};\n"],"names":[],"mappings":";;;;;AAGA,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAC5C,OAAO,EACL,uBAAuB,GAExB,oCAAiC;AAClC,OAAO,EACL,qBAAqB,EAErB,sBAAsB,GACvB,0CAAuC;AACxC,OAAO,EAAE,aAAa,EAAE,4BAAyB;AAbjD,YAAY,CAAC;;;;;;AAmBb,MAAM,2BAA2B,GAAG,CAAC,OAAmC,EAAE,EAAE;IAC1E,MAAM,aAAa,OAAG,4NAAsB,EAAC;QAAE,QAAQ,EAAE,IAAI;IAAA,CAAE,CAAC,CAAC;IACjE,MAAM,CAAC,KAAK,CAAC,OAAG,yKAAQ;gDAAC,GAAG,EAAE,GAAC,uNAAuB,EAAC,OAAO,CAAC,CAAC,CAAC;;IAEjE,+DAA+D;QAC/D,0KAAS;iDAAC,GAAG,EAAE;YACb,OAAO,aAAa,EAAE,QAAQ,EAAE,CAAC,gBAAgB;yDAAC,GAAG,EAAE;oBACrD,KAAK,CAAC,QAAQ,EAAE,CAAC,cAAc,EAAE,CAAC;gBACpC,CAAC,CAAC,CAAC;;QACL,CAAC;gDAAE;QAAC,aAAa;QAAE,KAAK;KAAC,CAAC,CAAC;QAE3B,0KAAS;iDAAC,GAAG,EAAE;YACb,IAAI,CAAC,aAAa,EAAE,OAAO;YAC3B,OAAO,KAAK,CAAC,SAAS;yDAAC,CAAC,KAAK,EAAE,EAAE;oBAC/B,IAAI,aAAa,CAAC,QAAQ,EAAE,CAAC,UAAU,KAAK,KAAK,CAAC,UAAU,EAAE,CAAC;4BAC7D,kMAAa,EAAC,aAAa,CAAC,CAAC,QAAQ,CAAC;4BAAE,UAAU,EAAE,KAAK,CAAC,UAAU;wBAAA,CAAE,CAAC,CAAC;oBAC1E,CAAC;gBACH,CAAC,CAAC,CAAC;;QACL,CAAC;gDAAE;QAAC,KAAK;QAAE,aAAa;KAAC,CAAC,CAAC;IAE3B,yCAAyC;QACzC,0KAAS;iDAAC,GAAG,EAAE;YACb,MAAM,SAAS,GAAG;gBAChB,UAAU,EAAE,OAAO,CAAC,UAAU,IAAI,QAAQ;aAC3C,CAAC;YAEF,MAAM,YAAY,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;YACtC,IAAI,YAAY,CAAC,UAAU,KAAK,SAAS,CAAC,UAAU,EAAE,CAAC;oBACrD,kMAAa,EAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;YAC3C,CAAC;QACH,CAAC;gDAAE;QAAC,KAAK;QAAE,OAAO,CAAC,UAAU;KAAC,CAAC,CAAC;IAEhC,OAAO,KAAK,CAAC;AACf,CAAC,CAAC;AAEK,MAAM,+BAA+B,GAExC,CAAC,EAAE,QAAQ,EAAE,OAAO,GAAG,CAAA,CAAE,EAAE,EAAE,EAAE;IACjC,MAAM,iBAAiB,GAAG,2BAA2B,CAAC,OAAO,CAAC,CAAC;IAE/D,MAAM,CAAC,OAAO,CAAC,OAAG,yKAAQ;oDAA6B,GAAG,EAAE;YAC1D,OAAO;gBACL,iBAAiB;aAClB,CAAC;QACJ,CAAC,CAAC,CAAC;;IAEH,OAAO,IACL,6KAAA,EAAC,2NAAqB,CAAC,QAAQ,EAAA;QAAC,KAAK,EAAE,OAAO;QAAA,UAC3C,QAAQ;IAAA,EACsB,CAClC,CAAC;AACJ,CAAC,CAAC"}},
    {"offset": {"line": 1187, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/devtools/DevToolsHooks.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/devtools/DevToolsHooks.ts"],"sourcesContent":["import { AssistantClient } from \"@assistant-ui/store\";\nimport { Unsubscribe } from \"../types\";\n\nexport interface EventLog {\n  time: Date;\n  event: string;\n  data: unknown;\n}\n\ninterface DevToolsApiEntry {\n  api: Partial<AssistantClient>;\n  logs: EventLog[];\n}\n\ninterface DevToolsHook {\n  apis: Map<number, DevToolsApiEntry>;\n  nextId: number;\n  listeners: Set<(apiId: number) => void>;\n}\n\ndeclare global {\n  interface Window {\n    __ASSISTANT_UI_DEVTOOLS_HOOK__?: DevToolsHook;\n  }\n}\n\nlet cachedHook: DevToolsHook | undefined;\n\nconst getHook = (): DevToolsHook => {\n  if (cachedHook) {\n    return cachedHook;\n  }\n\n  const createHook = (): DevToolsHook => ({\n    apis: new Map(),\n    nextId: 0,\n    listeners: new Set(),\n  });\n\n  if (typeof window === \"undefined\") {\n    cachedHook = createHook();\n    return cachedHook;\n  }\n\n  const existingHook = window.__ASSISTANT_UI_DEVTOOLS_HOOK__;\n  if (existingHook) {\n    cachedHook = existingHook;\n    return existingHook;\n  }\n\n  const newHook = createHook();\n  window.__ASSISTANT_UI_DEVTOOLS_HOOK__ = newHook;\n  cachedHook = newHook;\n  return newHook;\n};\n\nexport class DevToolsHooks {\n  static subscribe(listener: () => void): Unsubscribe {\n    const hook = getHook();\n    hook.listeners.add(listener);\n    return () => {\n      hook.listeners.delete(listener);\n    };\n  }\n\n  static clearEventLogs(apiId: number): void {\n    const hook = getHook();\n    const entry = hook.apis.get(apiId);\n    if (!entry) return;\n\n    entry.logs = [];\n    DevToolsHooks.notifyListeners(apiId);\n  }\n\n  static getApis(): Map<number, DevToolsApiEntry> {\n    return getHook().apis;\n  }\n\n  private static notifyListeners(apiId: number): void {\n    const hook = getHook();\n    hook.listeners.forEach((listener) => listener(apiId));\n  }\n}\n\nexport class DevToolsProviderApi {\n  private static readonly MAX_EVENT_LOGS_PER_API = 200;\n\n  static register(aui: Partial<AssistantClient>): Unsubscribe {\n    const hook = getHook();\n\n    for (const entry of hook.apis.values()) {\n      if (entry.api === aui) {\n        return () => {};\n      }\n    }\n\n    const apiId = hook.nextId++;\n    const entry: DevToolsApiEntry = {\n      api: aui,\n      logs: [],\n    };\n\n    const eventUnsubscribe = aui.on?.(\"*\", (e) => {\n      const entry = hook.apis.get(apiId);\n      if (!entry) return;\n\n      entry.logs.push({\n        time: new Date(),\n        event: e.event,\n        data: e.payload,\n      });\n\n      if (entry.logs.length > DevToolsProviderApi.MAX_EVENT_LOGS_PER_API) {\n        entry.logs = entry.logs.slice(\n          -DevToolsProviderApi.MAX_EVENT_LOGS_PER_API,\n        );\n      }\n\n      DevToolsProviderApi.notifyListeners(apiId);\n    });\n\n    const stateUnsubscribe = aui.subscribe?.(() => {\n      DevToolsProviderApi.notifyListeners(apiId);\n    });\n\n    hook.apis.set(apiId, entry);\n    DevToolsProviderApi.notifyListeners(apiId);\n\n    return () => {\n      const hook = getHook();\n      const entry = hook.apis.get(apiId);\n      if (!entry) return;\n\n      eventUnsubscribe?.();\n      stateUnsubscribe?.();\n\n      hook.apis.delete(apiId);\n\n      DevToolsProviderApi.notifyListeners(apiId);\n    };\n  }\n\n  private static notifyListeners(apiId: number): void {\n    const hook = getHook();\n    hook.listeners.forEach((listener) => listener(apiId));\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1291, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/AssistantRuntimeProvider.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/AssistantRuntimeProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport { FC, memo, PropsWithChildren, useEffect } from \"react\";\nimport { useAui, AuiProvider, AssistantClient } from \"@assistant-ui/store\";\nimport { AssistantRuntime } from \"./runtime/AssistantRuntime\";\nimport { AssistantRuntimeCore } from \"./runtime-cores/core/AssistantRuntimeCore\";\nimport { RuntimeAdapter } from \"./RuntimeAdapter\";\nimport { ThreadPrimitiveViewportProvider } from \"../context/providers/ThreadViewportProvider\";\nimport { DevToolsProviderApi } from \"../devtools\";\n\nexport namespace AssistantRuntimeProvider {\n  export type Props = PropsWithChildren<{\n    /**\n     * The runtime to provide to the rest of your app.\n     */\n    runtime: AssistantRuntime;\n\n    /**\n     * The aui instance to extend. If not provided, a new aui instance will be created.\n     */\n    aui?: AssistantClient;\n  }>;\n}\n\nconst getRenderComponent = (runtime: AssistantRuntime) => {\n  return (runtime as { _core?: AssistantRuntimeCore })._core?.RenderComponent;\n};\n\nexport const AssistantRuntimeProviderImpl: FC<\n  AssistantRuntimeProvider.Props\n> = ({ children, aui: parent = null, runtime }) => {\n  const aui = useAui({ threads: RuntimeAdapter(runtime) }, { parent: parent });\n\n  useEffect(() => {\n    if (typeof process === \"undefined\" || process.env.NODE_ENV === \"production\")\n      return;\n    return DevToolsProviderApi.register(aui);\n  }, [aui]);\n\n  const RenderComponent = getRenderComponent(runtime);\n\n  return (\n    <AuiProvider value={aui}>\n      {RenderComponent && <RenderComponent />}\n\n      {/* TODO temporarily allow accessing viewport state from outside the viewport */}\n      {/* TODO figure out if this behavior should be deprecated, since it is quite hacky */}\n      <ThreadPrimitiveViewportProvider>\n        {children}\n      </ThreadPrimitiveViewportProvider>\n    </AuiProvider>\n  );\n};\n\nexport const AssistantRuntimeProvider = memo(AssistantRuntimeProviderImpl);\n"],"names":[],"mappings":";;;;;;AAkCe;;AAhCf,OAAO,EAAM,IAAI,EAAqB,SAAS,EAAE,MAAM,OAAO,CAAC;;AAC/D,OAAO,EAAE,MAAM,EAAE,WAAW,EAAmB,MAAM,qBAAqB,CAAC;AAG3E,OAAO,EAAE,cAAc,EAAE,4BAAyB;AAClD,OAAO,EAAE,+BAA+B,EAAE,uDAAoD;AAC9F,OAAO,EAAE,mBAAmB,EAAE,6BAAoB;AARlD,YAAY,CAAC;;;;;;;AAwBb,MAAM,kBAAkB,GAAG,CAAC,OAAyB,EAAE,EAAE;IACvD,OAAQ,OAA4C,CAAC,KAAK,EAAE,eAAe,CAAC;AAC9E,CAAC,CAAC;AAEK,MAAM,4BAA4B,GAErC,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,MAAM,GAAG,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE;IAChD,MAAM,GAAG,OAAG,yKAAM,EAAC;QAAE,OAAO,MAAE,8MAAc,EAAC,OAAO,CAAC;IAAA,CAAE,EAAE;QAAE,MAAM,EAAE,MAAM;IAAA,CAAE,CAAC,CAAC;QAE7E,0KAAS;kDAAC,GAAG,EAAE;YACb,IAAI,kLAAc,KAAK,WAAW,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,gCAAK,YAAY,EACzE,OAAO;YACT,OAAO,yMAAmB,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QAC3C,CAAC;iDAAE;QAAC,GAAG;KAAC,CAAC,CAAC;IAEV,MAAM,eAAe,GAAG,kBAAkB,CAAC,OAAO,CAAC,CAAC;IAEpD,OAAO,IACL,8KAAA,EAAC,8MAAW,EAAA;QAAC,KAAK,EAAE,GAAG;QAAA,UAAA;YACpB,eAAe,QAAI,6KAAA,EAAC,eAAe,EAAA,CAAA,EAAG;gBAIvC,6KAAA,EAAC,0OAA+B,EAAA;gBAAA,UAC7B,QAAQ;YAAA,EACuB;SAAA;IAAA,EACtB,CACf,CAAC;AACJ,CAAC,CAAC;AAEK,MAAM,wBAAwB,OAAG,qKAAI,EAAC,4BAA4B,CAAC,CAAC"}},
    {"offset": {"line": 1345, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/utils/idUtils.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/utils/idUtils.tsx"],"sourcesContent":["import { customAlphabet } from \"nanoid/non-secure\";\n\nexport const generateId = customAlphabet(\n  \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\",\n  7,\n);\n\nconst optimisticPrefix = \"__optimistic__\";\nexport const generateOptimisticId = () => `${optimisticPrefix}${generateId()}`;\nexport const isOptimisticId = (id: string) => id.startsWith(optimisticPrefix);\n\nconst errorPrefix = \"__error__\";\nexport const generateErrorMessageId = () => `${errorPrefix}${generateId()}`;\nexport const isErrorMessageId = (id: string) => id.startsWith(errorPrefix);\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA,OAAO,EAAE,cAAc,EAAE,MAAM,mBAAmB,CAAC;;AAE5C,MAAM,UAAU,OAAG,qKAAc,EACtC,gEAAgE,EAChE,CAAC,CACF,CAAC;AAEF,MAAM,gBAAgB,GAAG,gBAAgB,CAAC;AACnC,MAAM,oBAAoB,GAAG,GAAG,CAAG,CAAD,EAAI,gBAAgB,GAAG,UAAU,EAAE,EAAE,CAAC;AACxE,MAAM,cAAc,GAAG,CAAC,EAAU,EAAE,CAAG,CAAD,CAAG,CAAC,UAAU,CAAC,gBAAgB,CAAC,CAAC;AAE9E,MAAM,WAAW,GAAG,WAAW,CAAC;AACzB,MAAM,sBAAsB,GAAG,GAAG,CAAG,CAAD,EAAI,WAAW,GAAG,UAAU,EAAE,EAAE,CAAC;AACrE,MAAM,gBAAgB,GAAG,CAAC,EAAU,EAAE,CAAG,CAAD,CAAG,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC"}},
    {"offset": {"line": 1370, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/external-store/ThreadMessageLike.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/ThreadMessageLike.tsx"],"sourcesContent":["import { parsePartialJsonObject } from \"assistant-stream/utils\";\nimport { generateId } from \"../../../utils/idUtils\";\nimport {\n  MessageStatus,\n  TextMessagePart,\n  ImageMessagePart,\n  ThreadMessage,\n  ThreadAssistantMessagePart,\n  ThreadAssistantMessage,\n  ThreadUserMessagePart,\n  ThreadUserMessage,\n  ThreadSystemMessage,\n  CompleteAttachment,\n  FileMessagePart,\n  DataMessagePart,\n  Unstable_AudioMessagePart,\n} from \"../../../types\";\nimport {\n  ReasoningMessagePart,\n  SourceMessagePart,\n  ThreadStep,\n} from \"../../../types/AssistantTypes\";\nimport { ReadonlyJSONObject, ReadonlyJSONValue } from \"assistant-stream/utils\";\n\nexport type ThreadMessageLike = {\n  readonly role: \"assistant\" | \"user\" | \"system\";\n  readonly content:\n    | string\n    | readonly (\n        | TextMessagePart\n        | ReasoningMessagePart\n        | SourceMessagePart\n        | ImageMessagePart\n        | FileMessagePart\n        | DataMessagePart\n        | Unstable_AudioMessagePart\n        | {\n            readonly type: \"tool-call\";\n            readonly toolCallId?: string;\n            readonly toolName: string;\n            readonly args?: ReadonlyJSONObject;\n            readonly argsText?: string;\n            readonly artifact?: any;\n            readonly result?: any | undefined;\n            readonly isError?: boolean | undefined;\n            readonly parentId?: string | undefined;\n            readonly messages?: readonly ThreadMessage[] | undefined;\n          }\n      )[];\n  readonly id?: string | undefined;\n  readonly createdAt?: Date | undefined;\n  readonly status?: MessageStatus | undefined;\n  readonly attachments?: readonly CompleteAttachment[] | undefined;\n  readonly metadata?:\n    | {\n        readonly unstable_state?: ReadonlyJSONValue;\n        readonly unstable_annotations?:\n          | readonly ReadonlyJSONValue[]\n          | undefined;\n        readonly unstable_data?: readonly ReadonlyJSONValue[] | undefined;\n        readonly steps?: readonly ThreadStep[] | undefined;\n        readonly submittedFeedback?: { readonly type: \"positive\" | \"negative\" };\n        readonly custom?: Record<string, unknown> | undefined;\n      }\n    | undefined;\n};\n\nexport const fromThreadMessageLike = (\n  like: ThreadMessageLike,\n  fallbackId: string,\n  fallbackStatus: MessageStatus,\n): ThreadMessage => {\n  const { role, id, createdAt, attachments, status, metadata } = like;\n  const common = {\n    id: id ?? fallbackId,\n    createdAt: createdAt ?? new Date(),\n  };\n\n  const content =\n    typeof like.content === \"string\"\n      ? [{ type: \"text\" as const, text: like.content }]\n      : like.content;\n\n  const sanitizeImageContent = ({\n    image,\n    ...rest\n  }: ImageMessagePart): ImageMessagePart | null => {\n    const match = image.match(\n      /^data:image\\/(png|jpeg|jpg|gif|webp);base64,(.*)$/,\n    );\n    if (match) {\n      return { ...rest, image };\n    }\n    console.warn(`Invalid image data format detected`);\n    return null;\n  };\n\n  if (role !== \"user\" && attachments?.length)\n    throw new Error(\"attachments are only supported for user messages\");\n\n  if (role !== \"assistant\" && status)\n    throw new Error(\"status is only supported for assistant messages\");\n\n  if (role !== \"assistant\" && metadata?.steps)\n    throw new Error(\"metadata.steps is only supported for assistant messages\");\n\n  switch (role) {\n    case \"assistant\":\n      return {\n        ...common,\n        role,\n        content: content\n          .map((part): ThreadAssistantMessagePart | null => {\n            const type = part.type;\n            switch (type) {\n              case \"text\":\n              case \"reasoning\":\n                if (part.text.trim().length === 0) return null;\n                return part;\n\n              case \"file\":\n              case \"source\":\n                return part;\n\n              case \"image\":\n                return sanitizeImageContent(part);\n\n              case \"data\":\n                return part;\n\n              case \"tool-call\": {\n                const { parentId, messages, ...basePart } = part;\n                const commonProps = {\n                  ...basePart,\n                  toolCallId: part.toolCallId ?? `tool-${generateId()}`,\n                  ...(parentId !== undefined && { parentId }),\n                  ...(messages !== undefined && { messages }),\n                };\n\n                if (part.args) {\n                  return {\n                    ...commonProps,\n                    args: part.args,\n                    argsText: part.argsText ?? JSON.stringify(part.args),\n                  };\n                }\n                return {\n                  ...commonProps,\n                  args: parsePartialJsonObject(part.argsText ?? \"\") ?? {},\n                  argsText: part.argsText ?? \"\",\n                };\n              }\n\n              default: {\n                const unhandledType: \"audio\" = type;\n                throw new Error(\n                  `Unsupported assistant message part type: ${unhandledType}`,\n                );\n              }\n            }\n          })\n          .filter((c) => !!c),\n        status: status ?? fallbackStatus,\n        metadata: {\n          unstable_state: metadata?.unstable_state ?? null,\n          unstable_annotations: metadata?.unstable_annotations ?? [],\n          unstable_data: metadata?.unstable_data ?? [],\n          custom: metadata?.custom ?? {},\n          steps: metadata?.steps ?? [],\n          ...(metadata?.submittedFeedback && {\n            submittedFeedback: metadata.submittedFeedback,\n          }),\n        },\n      } satisfies ThreadAssistantMessage;\n\n    case \"user\":\n      return {\n        ...common,\n        role,\n        content: content.map((part): ThreadUserMessagePart => {\n          const type = part.type;\n          switch (type) {\n            case \"text\":\n            case \"image\":\n            case \"audio\":\n            case \"file\":\n              return part;\n\n            default: {\n              const unhandledType:\n                | \"tool-call\"\n                | \"reasoning\"\n                | \"source\"\n                | \"data\" = type;\n              throw new Error(\n                `Unsupported user message part type: ${unhandledType}`,\n              );\n            }\n          }\n        }),\n        attachments: attachments ?? [],\n        metadata: {\n          custom: metadata?.custom ?? {},\n        },\n      } satisfies ThreadUserMessage;\n\n    case \"system\":\n      if (content.length !== 1 || content[0]!.type !== \"text\")\n        throw new Error(\n          \"System messages must have exactly one text message part.\",\n        );\n\n      return {\n        ...common,\n        role,\n        content: content as [TextMessagePart],\n        metadata: {\n          custom: metadata?.custom ?? {},\n        },\n      } satisfies ThreadSystemMessage;\n\n    default: {\n      const unsupportedRole: never = role;\n      throw new Error(`Unknown message role: ${unsupportedRole}`);\n    }\n  }\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1513, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/utils/json/is-json.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/utils/json/is-json.ts"],"sourcesContent":["import {\n  ReadonlyJSONArray,\n  ReadonlyJSONObject,\n  ReadonlyJSONValue,\n} from \"assistant-stream/utils\";\n\nexport function isJSONValue(\n  value: unknown,\n  currentDepth: number = 0,\n): value is ReadonlyJSONValue {\n  // Protect against too deep recursion\n  if (currentDepth > 100) {\n    return false;\n  }\n\n  if (\n    value === null ||\n    typeof value === \"string\" ||\n    typeof value === \"boolean\"\n  ) {\n    return true;\n  }\n\n  // Handle special number cases\n  if (typeof value === \"number\") {\n    return !Number.isNaN(value) && Number.isFinite(value);\n  }\n\n  if (Array.isArray(value)) {\n    return value.every((item) => isJSONValue(item, currentDepth + 1));\n  }\n\n  if (typeof value === \"object\") {\n    return Object.entries(value).every(\n      ([key, val]) =>\n        typeof key === \"string\" && isJSONValue(val, currentDepth + 1),\n    );\n  }\n\n  return false;\n}\n\nexport function isJSONArray(value: unknown): value is ReadonlyJSONArray {\n  return Array.isArray(value) && value.every(isJSONValue);\n}\n\nexport function isJSONObject(value: unknown): value is ReadonlyJSONObject {\n  return (\n    value != null &&\n    typeof value === \"object\" &&\n    Object.entries(value).every(\n      ([key, val]) => typeof key === \"string\" && isJSONValue(val),\n    )\n  );\n}\n"],"names":[],"mappings":";;;;;;;;AAMM,SAAU,WAAW,CACzB,KAAc,EACd,eAAuB,CAAC;IAExB,qCAAqC;IACrC,IAAI,YAAY,GAAG,GAAG,EAAE,CAAC;QACvB,OAAO,KAAK,CAAC;IACf,CAAC;IAED,IACE,KAAK,KAAK,IAAI,IACd,OAAO,KAAK,KAAK,QAAQ,IACzB,OAAO,KAAK,KAAK,SAAS,EAC1B,CAAC;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,8BAA8B;IAC9B,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE,CAAC;QAC9B,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IACxD,CAAC;IAED,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC;QACzB,OAAO,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI,EAAE,CAAG,CAAD,UAAY,CAAC,IAAI,EAAE,YAAY,GAAG,CAAC,CAAC,CAAC,CAAC;IACpE,CAAC;IAED,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE,CAAC;QAC9B,OAAO,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,KAAK,CAChC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,CACX,CADa,MACN,GAAG,KAAK,QAAQ,IAAI,WAAW,CAAC,GAAG,EAAE,YAAY,GAAG,CAAC,CAAC,CAChE,CAAC;IACJ,CAAC;IAED,OAAO,KAAK,CAAC;AACf,CAAC;AAEK,SAAU,WAAW,CAAC,KAAc;IACxC,OAAO,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;AAC1D,CAAC;AAEK,SAAU,YAAY,CAAC,KAAc;IACzC,OAAO,AACL,KAAK,IAAI,IAAI,IACb,OAAO,KAAK,KAAK,QAAQ,IACzB,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,KAAK,CACzB,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,CAAG,CAAD,MAAQ,GAAG,KAAK,QAAQ,IAAI,WAAW,CAAC,GAAG,CAAC,CAC5D,CACF,CAAC;AACJ,CAAC"}},
    {"offset": {"line": 1551, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/cloud/auiV0.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/cloud/auiV0.ts"],"sourcesContent":["import { ThreadMessage } from \"../../types\";\nimport { MessageStatus } from \"../../types/AssistantTypes\";\nimport { fromThreadMessageLike } from \"../runtime-cores/external-store/ThreadMessageLike\";\nimport { CloudMessage } from \"assistant-cloud\";\nimport { isJSONValue } from \"../../utils/json/is-json\";\nimport { ReadonlyJSONObject, ReadonlyJSONValue } from \"assistant-stream/utils\";\nimport { ExportedMessageRepositoryItem } from \"../runtime-cores/utils/MessageRepository\";\n\ntype AuiV0MessageMessagePart =\n  | {\n      readonly type: \"text\";\n      readonly text: string;\n    }\n  | {\n      readonly type: \"reasoning\";\n      readonly text: string;\n    }\n  | {\n      readonly type: \"source\";\n      readonly sourceType: \"url\";\n      readonly id: string;\n      readonly url: string;\n      readonly title?: string;\n    }\n  | {\n      readonly type: \"tool-call\";\n      readonly toolCallId: string;\n      readonly toolName: string;\n      readonly args: ReadonlyJSONObject;\n      readonly result?: ReadonlyJSONValue;\n      readonly isError?: true;\n    }\n  | {\n      readonly type: \"tool-call\";\n      readonly toolCallId: string;\n      readonly toolName: string;\n      readonly argsText: string;\n      readonly result?: ReadonlyJSONValue;\n      readonly isError?: true;\n    }\n  | {\n      readonly type: \"image\";\n      readonly image: string;\n    }\n  | {\n      readonly type: \"file\";\n      readonly data: string;\n      readonly mimeType: string;\n      readonly filename?: string;\n    };\n\ntype AuiV0Message = {\n  readonly role: \"assistant\" | \"user\" | \"system\";\n  readonly status?: MessageStatus;\n  readonly content: readonly AuiV0MessageMessagePart[];\n  readonly metadata: {\n    readonly unstable_state?: ReadonlyJSONValue;\n    readonly unstable_annotations: readonly ReadonlyJSONValue[];\n    readonly unstable_data: readonly ReadonlyJSONValue[];\n    readonly steps: readonly {\n      readonly usage?: {\n        readonly promptTokens: number;\n        readonly completionTokens: number;\n      };\n    }[];\n    readonly custom: ReadonlyJSONObject;\n  };\n};\n\nexport const auiV0Encode = (message: ThreadMessage): AuiV0Message => {\n  // TODO attachments are currently intentionally ignored\n  // info: ID and createdAt are ignored (we use the server value instead)\n  return {\n    role: message.role,\n    content: message.content.map((part) => {\n      const type = part.type;\n      switch (type) {\n        case \"text\": {\n          return {\n            type: \"text\",\n            text: part.text,\n          };\n        }\n\n        case \"reasoning\": {\n          return {\n            type: \"reasoning\",\n            text: part.text,\n          };\n        }\n\n        case \"source\": {\n          return {\n            type: \"source\",\n            sourceType: part.sourceType,\n            id: part.id,\n            url: part.url,\n            ...(part.title ? { title: part.title } : undefined),\n          };\n        }\n\n        case \"tool-call\": {\n          if (!isJSONValue(part.result)) {\n            console.warn(\n              `tool-call result is not JSON! ${JSON.stringify(part)}`,\n            );\n          }\n          return {\n            type: \"tool-call\",\n            toolCallId: part.toolCallId,\n            toolName: part.toolName,\n            ...(JSON.stringify(part.args) === part.argsText\n              ? {\n                  args: part.args,\n                }\n              : { argsText: part.argsText }),\n            ...(part.result\n              ? { result: part.result as ReadonlyJSONValue }\n              : {}),\n            ...(part.isError ? { isError: true } : {}),\n          };\n        }\n\n        case \"image\": {\n          return {\n            type: \"image\",\n            image: part.image,\n          };\n        }\n\n        case \"file\": {\n          return {\n            type: \"file\",\n            data: part.data,\n            mimeType: part.mimeType,\n            ...(part.filename ? { filename: part.filename } : undefined),\n          };\n        }\n\n        default: {\n          const unhandledType: \"audio\" | \"data\" = type;\n          throw new Error(\n            `Message part type not supported by aui/v0: ${unhandledType}`,\n          );\n        }\n      }\n    }),\n    metadata: message.metadata as AuiV0Message[\"metadata\"],\n    ...(message.status\n      ? {\n          status:\n            message.status?.type === \"running\"\n              ? {\n                  type: \"incomplete\",\n                  reason: \"cancelled\",\n                }\n              : message.status,\n        }\n      : undefined),\n  };\n};\n\nexport const auiV0Decode = (\n  cloudMessage: CloudMessage & { format: \"aui/v0\" },\n): ExportedMessageRepositoryItem => {\n  const payload = cloudMessage.content as unknown as AuiV0Message;\n  const message = fromThreadMessageLike(\n    {\n      id: cloudMessage.id,\n      createdAt: cloudMessage.created_at,\n      ...payload,\n    },\n    cloudMessage.id,\n    {\n      type: \"complete\",\n      reason: \"unknown\",\n    },\n  );\n\n  return {\n    parentId: cloudMessage.parent_id,\n    message,\n  };\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1670, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/cloud/AssistantCloudThreadHistoryAdapter.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/cloud/AssistantCloudThreadHistoryAdapter.tsx"],"sourcesContent":["import { RefObject, useState } from \"react\";\nimport { ThreadHistoryAdapter } from \"../runtime-cores/adapters/thread-history/ThreadHistoryAdapter\";\nimport { ExportedMessageRepositoryItem } from \"../runtime-cores/utils/MessageRepository\";\nimport { AssistantCloud } from \"assistant-cloud\";\nimport { auiV0Decode, auiV0Encode } from \"./auiV0\";\nimport {\n  MessageFormatAdapter,\n  MessageFormatItem,\n  MessageFormatRepository,\n  MessageStorageEntry,\n} from \"../runtime-cores/adapters/thread-history/MessageFormatAdapter\";\nimport { GenericThreadHistoryAdapter } from \"../runtime-cores/adapters/thread-history/ThreadHistoryAdapter\";\nimport { ReadonlyJSONObject } from \"assistant-stream/utils\";\nimport { AssistantClient, useAui } from \"@assistant-ui/store\";\nimport { ThreadListItemMethods } from \"../../types/scopes\";\n\n// Global WeakMap to store message ID mappings across adapter instances\nconst globalMessageIdMapping = new WeakMap<\n  ThreadListItemMethods,\n  Record<string, string | Promise<string>>\n>();\n\nclass FormattedThreadHistoryAdapter<TMessage, TStorageFormat>\n  implements GenericThreadHistoryAdapter<TMessage>\n{\n  constructor(\n    private parent: AssistantCloudThreadHistoryAdapter,\n    private formatAdapter: MessageFormatAdapter<TMessage, TStorageFormat>,\n  ) {}\n\n  async append(item: MessageFormatItem<TMessage>) {\n    // Encode the message using the format adapter\n    const encoded = this.formatAdapter.encode(item);\n    const messageId = this.formatAdapter.getId(item.message);\n\n    // Delegate to parent's internal append method with the encoded format\n    return this.parent._appendWithFormat(\n      item.parentId,\n      messageId,\n      this.formatAdapter.format,\n      encoded,\n    );\n  }\n\n  async load(): Promise<MessageFormatRepository<TMessage>> {\n    // Delegate to parent's internal load method with format filter\n    return this.parent._loadWithFormat(\n      this.formatAdapter.format,\n      (message: MessageStorageEntry<TStorageFormat>) =>\n        this.formatAdapter.decode(message),\n    );\n  }\n}\n\nclass AssistantCloudThreadHistoryAdapter implements ThreadHistoryAdapter {\n  constructor(\n    private cloudRef: RefObject<AssistantCloud>,\n    private aui: AssistantClient,\n  ) {}\n\n  private get _getIdForLocalId(): Record<string, string | Promise<string>> {\n    if (!globalMessageIdMapping.has(this.aui.threadListItem())) {\n      globalMessageIdMapping.set(this.aui.threadListItem(), {});\n    }\n    return globalMessageIdMapping.get(this.aui.threadListItem())!;\n  }\n\n  withFormat<TMessage, TStorageFormat>(\n    formatAdapter: MessageFormatAdapter<TMessage, TStorageFormat>,\n  ): GenericThreadHistoryAdapter<TMessage> {\n    return new FormattedThreadHistoryAdapter(this, formatAdapter);\n  }\n\n  async append({ parentId, message }: ExportedMessageRepositoryItem) {\n    const { remoteId } = await this.aui.threadListItem().initialize();\n    const task = this.cloudRef.current.threads.messages\n      .create(remoteId, {\n        parent_id: parentId\n          ? ((await this._getIdForLocalId[parentId]) ?? parentId)\n          : null,\n        format: \"aui/v0\",\n        content: auiV0Encode(message),\n      })\n      .then(({ message_id }) => {\n        this._getIdForLocalId[message.id] = message_id;\n        return message_id;\n      });\n\n    this._getIdForLocalId[message.id] = task;\n\n    return task.then(() => {});\n  }\n\n  async load() {\n    const remoteId = this.aui.threadListItem().getState().remoteId;\n    if (!remoteId) return { messages: [] };\n    const { messages } = await this.cloudRef.current.threads.messages.list(\n      remoteId,\n      {\n        format: \"aui/v0\",\n      },\n    );\n    const payload = {\n      messages: messages\n        .filter(\n          (m): m is typeof m & { format: \"aui/v0\" } => m.format === \"aui/v0\",\n        )\n        .map(auiV0Decode)\n        .reverse(),\n    };\n    return payload;\n  }\n\n  // Internal methods for FormattedThreadHistoryAdapter\n  async _appendWithFormat<T>(\n    parentId: string | null,\n    messageId: string,\n    format: string,\n    content: T,\n  ) {\n    const { remoteId } = await this.aui.threadListItem().initialize();\n\n    const task = this.cloudRef.current.threads.messages\n      .create(remoteId, {\n        parent_id: parentId\n          ? ((await this._getIdForLocalId[parentId]) ?? parentId)\n          : null,\n        format,\n        content: content as ReadonlyJSONObject,\n      })\n      .then(({ message_id }) => {\n        this._getIdForLocalId[messageId] = message_id;\n        return message_id;\n      });\n\n    this._getIdForLocalId[messageId] = task;\n\n    return task.then(() => {});\n  }\n\n  async _loadWithFormat<TMessage, TStorageFormat>(\n    format: string,\n    decoder: (\n      message: MessageStorageEntry<TStorageFormat>,\n    ) => MessageFormatItem<TMessage>,\n  ): Promise<MessageFormatRepository<TMessage>> {\n    const remoteId = this.aui.threadListItem().getState().remoteId;\n    if (!remoteId) return { messages: [] };\n\n    const { messages } = await this.cloudRef.current.threads.messages.list(\n      remoteId,\n      {\n        format,\n      },\n    );\n\n    return {\n      messages: messages\n        .filter((m) => m.format === format)\n        .map((m) =>\n          decoder({\n            id: m.id,\n            parent_id: m.parent_id,\n            format: m.format,\n            content: m.content as TStorageFormat,\n          }),\n        )\n        .reverse(),\n    };\n  }\n}\n\nexport const useAssistantCloudThreadHistoryAdapter = (\n  cloudRef: RefObject<AssistantCloud>,\n): ThreadHistoryAdapter => {\n  const aui = useAui();\n  const [adapter] = useState(\n    () => new AssistantCloudThreadHistoryAdapter(cloudRef, aui),\n  );\n\n  return adapter;\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1786, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/adapters/RuntimeAdapterProvider.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/adapters/RuntimeAdapterProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, FC, ReactNode, useContext } from \"react\";\nimport { ThreadHistoryAdapter } from \"./thread-history/ThreadHistoryAdapter\";\nimport { AttachmentAdapter } from \"./attachment/AttachmentAdapter\";\nimport { ModelContextProvider } from \"../../../model-context\";\n\nexport type RuntimeAdapters = {\n  modelContext?: ModelContextProvider;\n  history?: ThreadHistoryAdapter;\n  attachments?: AttachmentAdapter;\n};\n\nconst RuntimeAdaptersContext = createContext<RuntimeAdapters | null>(null);\n\nexport namespace RuntimeAdapterProvider {\n  export type Props = {\n    adapters: RuntimeAdapters;\n    children: ReactNode;\n  };\n}\n\nexport const RuntimeAdapterProvider: FC<RuntimeAdapterProvider.Props> = ({\n  adapters,\n  children,\n}) => {\n  const context = useContext(RuntimeAdaptersContext);\n  return (\n    <RuntimeAdaptersContext.Provider\n      value={{\n        ...context,\n        ...adapters,\n      }}\n    >\n      {children}\n    </RuntimeAdaptersContext.Provider>\n  );\n};\n\nexport const useRuntimeAdapters = () => {\n  const adapters = useContext(RuntimeAdaptersContext);\n  return adapters;\n};\n"],"names":[],"mappings":";;;;;;;AAEA,OAAO,EAAE,aAAa,EAAiB,UAAU,EAAE,MAAM,OAAO,CAAC;AAFjE,YAAY,CAAC;;;AAab,MAAM,sBAAsB,OAAG,8KAAa,EAAyB,IAAI,CAAC,CAAC;AASpE,MAAM,sBAAsB,GAAqC,CAAC,EACvE,QAAQ,EACR,QAAQ,EACT,EAAE,EAAE;IACH,MAAM,OAAO,OAAG,2KAAU,EAAC,sBAAsB,CAAC,CAAC;IACnD,OAAO,IACL,6KAAA,EAAC,sBAAsB,CAAC,QAAQ,EAAA;QAC9B,KAAK,EAAE;YACL,GAAG,OAAO;YACV,GAAG,QAAQ;SACZ;QAAA,UAEA,QAAQ;IAAA,EACuB,CACnC,CAAC;AACJ,CAAC,CAAC;AAEK,MAAM,kBAAkB,GAAG,GAAG,EAAE;IACrC,MAAM,QAAQ,OAAG,2KAAU,EAAC,sBAAsB,CAAC,CAAC;IACpD,OAAO,QAAQ,CAAC;AAClB,CAAC,CAAC"}},
    {"offset": {"line": 1816, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/remote-thread-list/adapter/in-memory.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/adapter/in-memory.tsx"],"sourcesContent":["import { AssistantStream, AssistantStreamChunk } from \"assistant-stream\";\nimport {\n  RemoteThreadInitializeResponse,\n  RemoteThreadListAdapter,\n  RemoteThreadListResponse,\n  RemoteThreadMetadata,\n} from \"../types\";\n\nexport class InMemoryThreadListAdapter implements RemoteThreadListAdapter {\n  list(): Promise<RemoteThreadListResponse> {\n    return Promise.resolve({\n      threads: [],\n    });\n  }\n\n  rename(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  archive(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  unarchive(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  delete(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  initialize(threadId: string): Promise<RemoteThreadInitializeResponse> {\n    return Promise.resolve({ remoteId: threadId, externalId: undefined });\n  }\n\n  generateTitle(): Promise<AssistantStream> {\n    return Promise.resolve(new ReadableStream<AssistantStreamChunk>());\n  }\n\n  fetch(_threadId: string): Promise<RemoteThreadMetadata> {\n    return Promise.reject(new Error(\"Thread not found\"));\n  }\n}\n"],"names":[],"mappings":";;;;AAQM,MAAO,yBAAyB;IACpC,IAAI,GAAA;QACF,OAAO,OAAO,CAAC,OAAO,CAAC;YACrB,OAAO,EAAE,EAAE;SACZ,CAAC,CAAC;IACL,CAAC;IAED,MAAM,GAAA;QACJ,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;IAC3B,CAAC;IAED,OAAO,GAAA;QACL,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;IAC3B,CAAC;IAED,SAAS,GAAA;QACP,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;IAC3B,CAAC;IAED,MAAM,GAAA;QACJ,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;IAC3B,CAAC;IAED,UAAU,CAAC,QAAgB,EAAA;QACzB,OAAO,OAAO,CAAC,OAAO,CAAC;YAAE,QAAQ,EAAE,QAAQ;YAAE,UAAU,EAAE,SAAS;QAAA,CAAE,CAAC,CAAC;IACxE,CAAC;IAED,aAAa,GAAA;QACX,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,cAAc,EAAwB,CAAC,CAAC;IACrE,CAAC;IAED,KAAK,CAAC,SAAiB,EAAA;QACrB,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAC,CAAC;IACvD,CAAC;CACF"}},
    {"offset": {"line": 1855, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/adapters/attachment/CloudFileAttachmentAdapter.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/adapters/attachment/CloudFileAttachmentAdapter.ts"],"sourcesContent":["import type { AssistantCloud } from \"assistant-cloud\";\nimport {\n  Attachment,\n  PendingAttachment,\n  CompleteAttachment,\n} from \"../../../../types/AttachmentTypes\";\nimport { ThreadUserMessagePart } from \"../../../../types/MessagePartTypes\";\nimport { AttachmentAdapter } from \"./AttachmentAdapter\";\n\nconst guessAttachmentType = (\n  contentType: string,\n): \"image\" | \"document\" | \"file\" => {\n  if (contentType.startsWith(\"image/\")) return \"image\";\n  if (contentType.startsWith(\"text/\")) return \"document\";\n  return \"file\";\n};\n\nexport class CloudFileAttachmentAdapter implements AttachmentAdapter {\n  public accept = \"*\";\n\n  constructor(private cloud: AssistantCloud) {}\n\n  private uploadedUrls = new Map<string, string>();\n\n  public async *add({\n    file,\n  }: {\n    file: File;\n  }): AsyncGenerator<PendingAttachment, void> {\n    const id = crypto.randomUUID();\n    const type = guessAttachmentType(file.type);\n    let attachment: PendingAttachment = {\n      id,\n      type,\n      name: file.name,\n      contentType: file.type,\n      file,\n      status: { type: \"running\", reason: \"uploading\", progress: 0 },\n    };\n    yield attachment;\n\n    try {\n      const { signedUrl, publicUrl } =\n        await this.cloud.files.generatePresignedUploadUrl({\n          filename: file.name,\n        });\n      await fetch(signedUrl, {\n        method: \"PUT\",\n        body: file,\n        headers: {\n          \"Content-Type\": file.type,\n        },\n        mode: \"cors\",\n      });\n      this.uploadedUrls.set(id, publicUrl);\n      attachment = {\n        ...attachment,\n        status: { type: \"requires-action\", reason: \"composer-send\" },\n      };\n      yield attachment;\n    } catch {\n      attachment = {\n        ...attachment,\n        status: { type: \"incomplete\", reason: \"error\" },\n      };\n      yield attachment;\n    }\n  }\n\n  public async remove(attachment: Attachment): Promise<void> {\n    this.uploadedUrls.delete(attachment.id);\n  }\n\n  public async send(\n    attachment: PendingAttachment,\n  ): Promise<CompleteAttachment> {\n    const url = this.uploadedUrls.get(attachment.id);\n    if (!url) throw new Error(\"Attachment not uploaded\");\n    this.uploadedUrls.delete(attachment.id);\n\n    let content: ThreadUserMessagePart[];\n    if (attachment.type === \"image\") {\n      content = [{ type: \"image\", image: url, filename: attachment.name }];\n    } else {\n      content = [\n        {\n          type: \"file\",\n          data: url,\n          mimeType: attachment.contentType,\n          filename: attachment.name,\n        },\n      ];\n    }\n\n    return {\n      ...attachment,\n      status: { type: \"complete\" },\n      content,\n    };\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1958, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/remote-thread-list/adapter/cloud.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/adapter/cloud.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  FC,\n  PropsWithChildren,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n} from \"react\";\nimport { AssistantCloud } from \"assistant-cloud\";\nimport { RemoteThreadListAdapter } from \"../types\";\nimport { useAssistantCloudThreadHistoryAdapter } from \"../../../cloud/AssistantCloudThreadHistoryAdapter\";\nimport { RuntimeAdapterProvider } from \"../../adapters/RuntimeAdapterProvider\";\nimport { InMemoryThreadListAdapter } from \"./in-memory\";\nimport { CloudFileAttachmentAdapter } from \"../../adapters\";\n\ntype ThreadData = {\n  externalId: string | undefined;\n};\n\ntype CloudThreadListAdapterOptions = {\n  cloud?: AssistantCloud | undefined;\n\n  create?: (() => Promise<ThreadData>) | undefined;\n  delete?: ((threadId: string) => Promise<void>) | undefined;\n};\n\nconst baseUrl =\n  typeof process !== \"undefined\" &&\n  process?.env?.[\"NEXT_PUBLIC_ASSISTANT_BASE_URL\"];\nconst autoCloud = baseUrl\n  ? new AssistantCloud({ baseUrl, anonymous: true })\n  : undefined;\n\nexport const useCloudThreadListAdapter = (\n  adapter: CloudThreadListAdapterOptions,\n): RemoteThreadListAdapter => {\n  const adapterRef = useRef(adapter);\n  useEffect(() => {\n    adapterRef.current = adapter;\n  }, [adapter]);\n\n  const unstable_Provider = useCallback<FC<PropsWithChildren>>(\n    function Provider({ children }) {\n      const history = useAssistantCloudThreadHistoryAdapter({\n        get current() {\n          return adapterRef.current.cloud ?? autoCloud!;\n        },\n      });\n      const cloudInstance = adapterRef.current.cloud ?? autoCloud!;\n      const attachments = useMemo(\n        () => new CloudFileAttachmentAdapter(cloudInstance),\n        [cloudInstance],\n      );\n\n      const adapters = useMemo(\n        () => ({\n          history,\n          attachments,\n        }),\n        [history, attachments],\n      );\n\n      return (\n        <RuntimeAdapterProvider adapters={adapters}>\n          {children}\n        </RuntimeAdapterProvider>\n      );\n    },\n    [],\n  );\n\n  const cloud = adapter.cloud ?? autoCloud;\n  if (!cloud) return new InMemoryThreadListAdapter();\n\n  return {\n    list: async () => {\n      const { threads } = await cloud.threads.list();\n      return {\n        threads: threads.map((t) => ({\n          status: t.is_archived ? \"archived\" : \"regular\",\n          remoteId: t.id,\n          title: t.title,\n          externalId: t.external_id ?? undefined,\n        })),\n      };\n    },\n\n    initialize: async () => {\n      const createTask = adapter.create?.() ?? Promise.resolve();\n      const t = await createTask;\n      const external_id = t ? t.externalId : undefined;\n      const { thread_id: remoteId } = await cloud.threads.create({\n        last_message_at: new Date(),\n        external_id,\n      });\n\n      return { externalId: external_id, remoteId: remoteId };\n    },\n\n    rename: async (threadId, newTitle) => {\n      return cloud.threads.update(threadId, { title: newTitle });\n    },\n    archive: async (threadId) => {\n      return cloud.threads.update(threadId, { is_archived: true });\n    },\n    unarchive: async (threadId) => {\n      return cloud.threads.update(threadId, { is_archived: false });\n    },\n    delete: async (threadId) => {\n      await adapter.delete?.(threadId);\n      return cloud.threads.delete(threadId);\n    },\n\n    generateTitle: async (threadId, messages) => {\n      // Filter messages to only include content types the title generator understands\n      // (reasoning, source, etc. are not needed for title generation)\n      // TODO serialize these to a more efficient format\n      const filteredMessages = messages.map((msg) => ({\n        ...msg,\n        content: msg.content.filter(\n          (part) => part.type === \"text\" || part.type === \"tool-call\",\n        ),\n      }));\n\n      return cloud.runs.stream({\n        thread_id: threadId,\n        assistant_id: \"system/thread_title\",\n        messages: filteredMessages,\n      });\n    },\n\n    fetch: async (threadId: string) => {\n      const thread = await cloud.threads.get(threadId);\n      return {\n        status: thread.is_archived ? \"archived\" : \"regular\",\n        remoteId: thread.id,\n        title: thread.title,\n        externalId: thread.external_id ?? undefined,\n      };\n    },\n\n    unstable_Provider,\n  };\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2103, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/core/BaseAssistantRuntimeCore.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/core/BaseAssistantRuntimeCore.tsx"],"sourcesContent":["import { type ModelContextProvider } from \"../../../model-context/ModelContextTypes\";\nimport type { Unsubscribe } from \"../../../types/Unsubscribe\";\nimport type { AssistantRuntimeCore } from \"./AssistantRuntimeCore\";\nimport { CompositeContextProvider } from \"../../../utils/CompositeContextProvider\";\nimport { ThreadListRuntimeCore } from \"./ThreadListRuntimeCore\";\n\nexport abstract class BaseAssistantRuntimeCore implements AssistantRuntimeCore {\n  protected readonly _contextProvider = new CompositeContextProvider();\n  public abstract get threads(): ThreadListRuntimeCore;\n\n  public registerModelContextProvider(\n    provider: ModelContextProvider,\n  ): Unsubscribe {\n    return this._contextProvider.registerModelContextProvider(provider);\n  }\n\n  public getModelContextProvider(): ModelContextProvider {\n    return this._contextProvider;\n  }\n}\n"],"names":[],"mappings":";;;;AAGA,OAAO,EAAE,wBAAwB,EAAE,mDAAgD;;AAG7E,MAAgB,wBAAwB;IACzB,gBAAgB,GAAG,IAAI,sNAAwB,EAAE,CAAC;IAG9D,4BAA4B,CACjC,QAA8B,EAAA;QAE9B,OAAO,IAAI,CAAC,gBAAgB,CAAC,4BAA4B,CAAC,QAAQ,CAAC,CAAC;IACtE,CAAC;IAEM,uBAAuB,GAAA;QAC5B,OAAO,IAAI,CAAC,gBAAgB,CAAC;IAC/B,CAAC;CACF"}},
    {"offset": {"line": 2122, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/context/providers/ThreadListItemProvider.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/context/providers/ThreadListItemProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { useAui, AuiProvider, Derived } from \"@assistant-ui/store\";\nimport type { ThreadListItemRuntime } from \"../../legacy-runtime/runtime/ThreadListItemRuntime\";\nimport { ThreadListItemClient } from \"../../legacy-runtime/client/ThreadListItemRuntimeClient\";\n\nexport const ThreadListItemByIndexProvider: FC<\n  PropsWithChildren<{\n    index: number;\n    archived: boolean;\n  }>\n> = ({ index, archived, children }) => {\n  const aui = useAui({\n    threadListItem: Derived({\n      source: \"threads\",\n      query: { type: \"index\", index, archived },\n      get: (aui) => aui.threads().item({ index, archived }),\n    }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n\nexport const ThreadListItemRuntimeProvider: FC<\n  PropsWithChildren<{\n    runtime: ThreadListItemRuntime;\n  }>\n> = ({ runtime, children }) => {\n  const aui = useAui({\n    threadListItem: ThreadListItemClient({ runtime }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n"],"names":[],"mappings":";;;;;;;AAGA,OAAO,EAAE,MAAM,EAAE,WAAW,EAAE,OAAO,EAAE,MAAM,qBAAqB,CAAC;;;AAEnE,OAAO,EAAE,oBAAoB,EAAE,mEAAgE;AAL/F,YAAY,CAAC;;;;AAON,MAAM,6BAA6B,GAKtC,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,EAAE,EAAE;IACpC,MAAM,GAAG,OAAG,yKAAM,EAAC;QACjB,cAAc,EAAE,+KAAO,EAAC;YACtB,MAAM,EAAE,SAAS;YACjB,KAAK,EAAE;gBAAE,IAAI,EAAE,OAAO;gBAAE,KAAK;gBAAE,QAAQ;YAAA,CAAE;YACzC,GAAG;6DAAE,CAAC,GAAG,EAAE,CAAG,CAAD,EAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;wBAAE,KAAK;wBAAE,QAAQ;oBAAA,CAAE,CAAC;;SACtD,CAAC;KACH,CAAC,CAAC;IAEH,OAAO,iLAAA,EAAC,8MAAW,EAAA;QAAC,KAAK,EAAE,GAAG;QAAA,UAAG,QAAQ;IAAA,EAAe,CAAC;AAC3D,CAAC,CAAC;AAEK,MAAM,6BAA6B,GAItC,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,EAAE,EAAE;IAC5B,MAAM,GAAG,GAAG,6KAAM,EAAC;QACjB,cAAc,MAAE,2OAAoB,EAAC;YAAE,OAAO;QAAA,CAAE,CAAC;KAClD,CAAC,CAAC;IAEH,WAAO,6KAAA,EAAC,8MAAW,EAAA;QAAC,KAAK,EAAE,GAAG;QAAA,UAAG,QAAQ;IAAA,EAAe,CAAC;AAC3D,CAAC,CAAC"}},
    {"offset": {"line": 2174, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/remote-thread-list/BaseSubscribable.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/BaseSubscribable.tsx"],"sourcesContent":["import { Unsubscribe } from \"../../../types\";\n\nexport class BaseSubscribable {\n  private _subscribers = new Set<() => void>();\n\n  public subscribe(callback: () => void): Unsubscribe {\n    this._subscribers.add(callback);\n    return () => this._subscribers.delete(callback);\n  }\n\n  public waitForUpdate() {\n    return new Promise<void>((resolve) => {\n      const unsubscribe = this.subscribe(() => {\n        unsubscribe();\n        resolve();\n      });\n    });\n  }\n\n  protected _notifySubscribers() {\n    const errors = [];\n    for (const callback of this._subscribers) {\n      try {\n        callback();\n      } catch (error) {\n        errors.push(error);\n      }\n    }\n\n    if (errors.length > 0) {\n      if (errors.length === 1) {\n        throw errors[0];\n      } else {\n        for (const error of errors) {\n          console.error(error);\n        }\n        throw new AggregateError(errors);\n      }\n    }\n  }\n}\n"],"names":[],"mappings":";;;;AAEM,MAAO,gBAAgB;IACnB,YAAY,GAAG,IAAI,GAAG,EAAc,CAAC;IAEtC,SAAS,CAAC,QAAoB,EAAA;QACnC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAChC,OAAO,GAAG,CAAG,CAAD,GAAK,CAAC,YAAY,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IAClD,CAAC;IAEM,aAAa,GAAA;QAClB,OAAO,IAAI,OAAO,CAAO,CAAC,OAAO,EAAE,EAAE;YACnC,MAAM,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE;gBACtC,WAAW,EAAE,CAAC;gBACd,OAAO,EAAE,CAAC;YACZ,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAES,kBAAkB,GAAA;QAC1B,MAAM,MAAM,GAAG,EAAE,CAAC;QAClB,KAAK,MAAM,QAAQ,IAAI,IAAI,CAAC,YAAY,CAAE,CAAC;YACzC,IAAI,CAAC;gBACH,QAAQ,EAAE,CAAC;YACb,CAAC,CAAC,OAAO,KAAK,EAAE,CAAC;gBACf,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACrB,CAAC;QACH,CAAC;QAED,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YACtB,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBACxB,MAAM,MAAM,CAAC,CAAC,CAAC,CAAC;YAClB,CAAC,MAAM,CAAC;gBACN,KAAK,MAAM,KAAK,IAAI,MAAM,CAAE,CAAC;oBAC3B,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBACvB,CAAC;gBACD,MAAM,IAAI,cAAc,CAAC,MAAM,CAAC,CAAC;YACnC,CAAC;QACH,CAAC;IACH,CAAC;CACF"}},
    {"offset": {"line": 2217, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime/subscribable/BaseSubject.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime/subscribable/BaseSubject.ts"],"sourcesContent":["import { Unsubscribe } from \"../../../types/Unsubscribe\";\n\nexport abstract class BaseSubject {\n  private _subscriptions = new Set<() => void>();\n  private _connection: Unsubscribe | undefined;\n\n  protected get isConnected() {\n    return !!this._connection;\n  }\n\n  protected abstract _connect(): Unsubscribe;\n\n  protected notifySubscribers() {\n    for (const callback of this._subscriptions) callback();\n  }\n\n  private _updateConnection() {\n    if (this._subscriptions.size > 0) {\n      if (this._connection) return;\n      this._connection = this._connect();\n    } else {\n      this._connection?.();\n      this._connection = undefined;\n    }\n  }\n\n  public subscribe(callback: () => void) {\n    this._subscriptions.add(callback);\n    this._updateConnection();\n\n    return () => {\n      this._subscriptions.delete(callback);\n      this._updateConnection();\n    };\n  }\n}\n"],"names":[],"mappings":";;;;AAEM,MAAgB,WAAW;IACvB,cAAc,GAAG,IAAI,GAAG,EAAc,CAAC;IACvC,WAAW,CAA0B;IAE7C,IAAc,WAAW,GAAA;QACvB,OAAO,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IAIS,iBAAiB,GAAA;QACzB,KAAK,MAAM,QAAQ,IAAI,IAAI,CAAC,cAAc,CAAE,QAAQ,EAAE,CAAC;IACzD,CAAC;IAEO,iBAAiB,GAAA;QACvB,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,GAAG,CAAC,EAAE,CAAC;YACjC,IAAI,IAAI,CAAC,WAAW,EAAE,OAAO;YAC7B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QACrC,CAAC,MAAM,CAAC;YACN,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC;YACrB,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC;QAC/B,CAAC;IACH,CAAC;IAEM,SAAS,CAAC,QAAoB,EAAA;QACnC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAClC,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAEzB,OAAO,GAAG,EAAE;YACV,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YACrC,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC3B,CAAC,CAAC;IACJ,CAAC;CACF"}},
    {"offset": {"line": 2252, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime/subscribable/SKIP_UPDATE.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime/subscribable/SKIP_UPDATE.ts"],"sourcesContent":["export const SKIP_UPDATE = Symbol(\"skip-update\");\nexport type SKIP_UPDATE = typeof SKIP_UPDATE;\n"],"names":[],"mappings":";;;;AAAO,MAAM,WAAW,GAAG,MAAM,CAAC,aAAa,CAAC,CAAC"}},
    {"offset": {"line": 2261, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime/subscribable/LazyMemoizeSubject.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime/subscribable/LazyMemoizeSubject.ts"],"sourcesContent":["import { BaseSubject } from \"./BaseSubject\";\nimport { SKIP_UPDATE } from \"./SKIP_UPDATE\";\nimport { SubscribableWithState } from \"./Subscribable\";\n\nexport class LazyMemoizeSubject<TState extends object, TPath>\n  extends BaseSubject\n  implements SubscribableWithState<TState, TPath>\n{\n  public get path() {\n    return this.binding.path;\n  }\n\n  constructor(\n    private binding: SubscribableWithState<TState | SKIP_UPDATE, TPath>,\n  ) {\n    super();\n  }\n\n  private _previousStateDirty = true;\n  private _previousState: TState | undefined;\n  public getState = () => {\n    if (!this.isConnected || this._previousStateDirty) {\n      const newState = this.binding.getState();\n      if (newState !== SKIP_UPDATE) {\n        this._previousState = newState;\n      }\n      this._previousStateDirty = false;\n    }\n    if (this._previousState === undefined)\n      throw new Error(\"Entry not available in the store\");\n    return this._previousState;\n  };\n\n  protected _connect() {\n    const callback = () => {\n      this._previousStateDirty = true;\n      this.notifySubscribers();\n    };\n\n    return this.binding.subscribe(callback);\n  }\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,WAAW,EAAE,yBAAsB;AAC5C,OAAO,EAAE,WAAW,EAAE,yBAAsB;;;AAGtC,MAAO,kBACX,SAAQ,mOAAW;IAQT,QAAA;IALV,IAAW,IAAI,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;IAC3B,CAAC;IAED,YACU,OAA2D,CAAA;QAEnE,KAAK,EAAE,CAAC;QAFA,IAAA,CAAA,OAAO,GAAP,OAAO,CAAoD;IAGrE,CAAC;IAEO,mBAAmB,GAAG,IAAI,CAAC;IAC3B,cAAc,CAAqB;IACpC,QAAQ,GAAG,GAAG,EAAE;QACrB,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAClD,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACzC,IAAI,QAAQ,KAAK,mOAAW,EAAE,CAAC;gBAC7B,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC;YACjC,CAAC;YACD,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;QACnC,CAAC;QACD,IAAI,IAAI,CAAC,cAAc,KAAK,SAAS,EACnC,MAAM,IAAI,KAAK,CAAC,kCAAkC,CAAC,CAAC;QACtD,OAAO,IAAI,CAAC,cAAc,CAAC;IAC7B,CAAC,CAAC;IAEQ,QAAQ,GAAA;QAChB,MAAM,QAAQ,GAAG,GAAG,EAAE;YACpB,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAChC,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC3B,CAAC,CAAC;QAEF,OAAO,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;IAC1C,CAAC;CACF"}},
    {"offset": {"line": 2303, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime/ThreadListItemRuntime.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime/ThreadListItemRuntime.ts"],"sourcesContent":["import { Unsubscribe } from \"../../types\";\nimport { ThreadListItemRuntimePath } from \"./RuntimePathTypes\";\nimport { SubscribableWithState } from \"./subscribable/Subscribable\";\nimport { ThreadListRuntimeCoreBinding } from \"./ThreadListRuntime\";\n\nexport type ThreadListItemEventType = \"switchedTo\" | \"switchedAway\";\n\nimport type {\n  ThreadListItemState,\n  ThreadListItemStatus,\n} from \"./RuntimeBindings\";\n\nexport type { ThreadListItemState, ThreadListItemStatus };\n\nexport type ThreadListItemRuntime = {\n  readonly path: ThreadListItemRuntimePath;\n  getState(): ThreadListItemState;\n\n  initialize(): Promise<{ remoteId: string; externalId: string | undefined }>;\n  generateTitle(): Promise<void>;\n\n  switchTo(): Promise<void>;\n  rename(newTitle: string): Promise<void>;\n  archive(): Promise<void>;\n  unarchive(): Promise<void>;\n  delete(): Promise<void>;\n\n  /**\n   * Detaches the ThreadListItem instance, unmounting the ThreadRuntime hook.\n   */\n  detach(): void;\n\n  subscribe(callback: () => void): Unsubscribe;\n\n  unstable_on(\n    event: ThreadListItemEventType,\n    callback: () => void,\n  ): Unsubscribe;\n\n  /** @internal */\n  __internal_getRuntime(): ThreadListItemRuntime;\n};\n\nexport type ThreadListItemStateBinding = SubscribableWithState<\n  ThreadListItemState,\n  ThreadListItemRuntimePath\n>;\n\nexport class ThreadListItemRuntimeImpl implements ThreadListItemRuntime {\n  public get path() {\n    return this._core.path;\n  }\n\n  constructor(\n    private _core: ThreadListItemStateBinding,\n    private _threadListBinding: ThreadListRuntimeCoreBinding,\n  ) {\n    this.__internal_bindMethods();\n  }\n\n  protected __internal_bindMethods() {\n    this.switchTo = this.switchTo.bind(this);\n    this.rename = this.rename.bind(this);\n    this.archive = this.archive.bind(this);\n    this.unarchive = this.unarchive.bind(this);\n    this.delete = this.delete.bind(this);\n    this.initialize = this.initialize.bind(this);\n    this.generateTitle = this.generateTitle.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n    this.unstable_on = this.unstable_on.bind(this);\n    this.getState = this.getState.bind(this);\n    this.detach = this.detach.bind(this);\n  }\n\n  public getState(): ThreadListItemState {\n    return this._core.getState();\n  }\n\n  public switchTo(): Promise<void> {\n    const state = this._core.getState();\n    return this._threadListBinding.switchToThread(state.id);\n  }\n\n  public rename(newTitle: string): Promise<void> {\n    const state = this._core.getState();\n\n    return this._threadListBinding.rename(state.id, newTitle);\n  }\n\n  public archive(): Promise<void> {\n    const state = this._core.getState();\n\n    return this._threadListBinding.archive(state.id);\n  }\n\n  public unarchive(): Promise<void> {\n    const state = this._core.getState();\n\n    return this._threadListBinding.unarchive(state.id);\n  }\n\n  public delete(): Promise<void> {\n    const state = this._core.getState();\n\n    return this._threadListBinding.delete(state.id);\n  }\n\n  public initialize(): Promise<{\n    remoteId: string;\n    externalId: string | undefined;\n  }> {\n    const state = this._core.getState();\n    return this._threadListBinding.initialize(state.id);\n  }\n\n  public generateTitle(): Promise<void> {\n    const state = this._core.getState();\n    return this._threadListBinding.generateTitle(state.id);\n  }\n\n  public unstable_on(event: ThreadListItemEventType, callback: () => void) {\n    // if the runtime is bound to a specific thread, trigger if isMain is toggled\n    // if the runtime is bound to the main thread, trigger switchedTo if threadId changes\n\n    let prevIsMain = this._core.getState().isMain;\n    let prevThreadId = this._core.getState().id;\n    return this.subscribe(() => {\n      const currentState = this._core.getState();\n      const newIsMain = currentState.isMain;\n      const newThreadId = currentState.id;\n      if (prevIsMain === newIsMain && prevThreadId === newThreadId) return;\n      prevIsMain = newIsMain;\n      prevThreadId = newThreadId;\n\n      if (event === \"switchedTo\" && !newIsMain) return;\n      if (event === \"switchedAway\" && newIsMain) return;\n      callback();\n    });\n  }\n\n  public subscribe(callback: () => void): Unsubscribe {\n    return this._core.subscribe(callback);\n  }\n\n  public detach(): void {\n    const state = this._core.getState();\n\n    this._threadListBinding.detach(state.id);\n  }\n\n  /** @internal */\n  public __internal_getRuntime(): ThreadListItemRuntime {\n    return this;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2394, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime/subscribable/shallowEqual.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime/subscribable/shallowEqual.ts"],"sourcesContent":["export function shallowEqual<T extends object>(\n  objA: T | undefined,\n  objB: T | undefined,\n) {\n  if (objA === undefined && objB === undefined) return true;\n  if (objA === undefined) return false;\n  if (objB === undefined) return false;\n\n  for (const key of Object.keys(objA)) {\n    const valueA = objA[key as keyof T];\n    const valueB = objB[key as keyof T];\n    if (!Object.is(valueA, valueB)) return false;\n  }\n\n  return true;\n}\n"],"names":[],"mappings":";;;;AAAM,SAAU,YAAY,CAC1B,IAAmB,EACnB,IAAmB;IAEnB,IAAI,IAAI,KAAK,SAAS,IAAI,IAAI,KAAK,SAAS,EAAE,OAAO,IAAI,CAAC;IAC1D,IAAI,IAAI,KAAK,SAAS,EAAE,OAAO,KAAK,CAAC;IACrC,IAAI,IAAI,KAAK,SAAS,EAAE,OAAO,KAAK,CAAC;IAErC,KAAK,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAE,CAAC;QACpC,MAAM,MAAM,GAAG,IAAI,CAAC,GAAc,CAAC,CAAC;QACpC,MAAM,MAAM,GAAG,IAAI,CAAC,GAAc,CAAC,CAAC;QACpC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE,OAAO,KAAK,CAAC;IAC/C,CAAC;IAED,OAAO,IAAI,CAAC;AACd,CAAC"}},
    {"offset": {"line": 2413, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime/subscribable/ShallowMemoizeSubject.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime/subscribable/ShallowMemoizeSubject.ts"],"sourcesContent":["import { shallowEqual } from \"./shallowEqual\";\nimport { BaseSubject } from \"./BaseSubject\";\nimport { SubscribableWithState } from \"./Subscribable\";\nimport { SKIP_UPDATE } from \"./SKIP_UPDATE\";\n\nexport class ShallowMemoizeSubject<TState extends object, TPath>\n  extends BaseSubject\n  implements SubscribableWithState<TState, TPath>\n{\n  public get path() {\n    return this.binding.path;\n  }\n\n  constructor(\n    private binding: SubscribableWithState<TState | SKIP_UPDATE, TPath>,\n  ) {\n    super();\n    const state = binding.getState();\n    if (state === SKIP_UPDATE)\n      throw new Error(\"Entry not available in the store\");\n    this._previousState = state;\n  }\n\n  private _previousState: TState;\n  public getState = () => {\n    if (!this.isConnected) this._syncState();\n    return this._previousState;\n  };\n\n  private _syncState() {\n    const state = this.binding.getState();\n    if (state === SKIP_UPDATE) return false;\n    if (shallowEqual(state, this._previousState)) return false;\n    this._previousState = state;\n    return true;\n  }\n\n  protected _connect() {\n    const callback = () => {\n      if (this._syncState()) {\n        this.notifySubscribers();\n      }\n    };\n\n    return this.binding.subscribe(callback);\n  }\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,YAAY,EAAE,0BAAuB;AAC9C,OAAO,EAAE,WAAW,EAAE,yBAAsB;AAE5C,OAAO,EAAE,WAAW,EAAE,yBAAsB;;;;AAEtC,MAAO,qBACX,SAAQ,mOAAW;IAQT,QAAA;IALV,IAAW,IAAI,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;IAC3B,CAAC;IAED,YACU,OAA2D,CAAA;QAEnE,KAAK,EAAE,CAAC;QAFA,IAAA,CAAA,OAAO,GAAP,OAAO,CAAoD;QAGnE,MAAM,KAAK,GAAG,OAAO,CAAC,QAAQ,EAAE,CAAC;QACjC,IAAI,KAAK,KAAK,mOAAW,EACvB,MAAM,IAAI,KAAK,CAAC,kCAAkC,CAAC,CAAC;QACtD,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;IAC9B,CAAC;IAEO,cAAc,CAAS;IACxB,QAAQ,GAAG,GAAG,EAAE;QACrB,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC;QACzC,OAAO,IAAI,CAAC,cAAc,CAAC;IAC7B,CAAC,CAAC;IAEM,UAAU,GAAA;QAChB,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;QACtC,IAAI,KAAK,KAAK,mOAAW,EAAE,OAAO,KAAK,CAAC;QACxC,QAAI,qOAAY,EAAC,KAAK,EAAE,IAAI,CAAC,cAAc,CAAC,EAAE,OAAO,KAAK,CAAC;QAC3D,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,OAAO,IAAI,CAAC;IACd,CAAC;IAES,QAAQ,GAAA;QAChB,MAAM,QAAQ,GAAG,GAAG,EAAE;YACpB,IAAI,IAAI,CAAC,UAAU,EAAE,EAAE,CAAC;gBACtB,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC3B,CAAC;QACH,CAAC,CAAC;QAEF,OAAO,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;IAC1C,CAAC;CACF"}},
    {"offset": {"line": 2460, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/external-store/getExternalStoreMessage.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/getExternalStoreMessage.tsx"],"sourcesContent":["import { ThreadState } from \"../../runtime\";\nimport { ThreadMessage } from \"../../../types\";\n\nexport const symbolInnerMessage = Symbol(\"innerMessage\");\nconst symbolInnerMessages = Symbol(\"innerMessages\");\n\ntype WithInnerMessages<T> = {\n  [symbolInnerMessage]?: T | T[];\n  [symbolInnerMessages]?: T[];\n};\n\n/**\n * @deprecated Use `getExternalStoreMessages` (plural) instead. This function will be removed in 0.12.0.\n */\nexport const getExternalStoreMessage = <T,>(input: ThreadMessage) => {\n  const withInnerMessages = input as WithInnerMessages<T>;\n  return withInnerMessages[symbolInnerMessage];\n};\n\nconst EMPTY_ARRAY: never[] = [];\n\nexport const getExternalStoreMessages = <T,>(\n  input: ThreadState | ThreadMessage | ThreadMessage[\"content\"][number],\n) => {\n  // TODO temp until 0.12.0 (migrate useExternalStoreRuntime to always set an array)\n\n  const container = (\n    \"messages\" in input ? input.messages : input\n  ) as WithInnerMessages<T>;\n  const value = container[symbolInnerMessages] || container[symbolInnerMessage];\n  if (!value) return EMPTY_ARRAY;\n  if (Array.isArray(value)) {\n    return value;\n  }\n  container[symbolInnerMessages] = [value];\n  return container[symbolInnerMessages];\n};\n"],"names":[],"mappings":";;;;;;;;AAGO,MAAM,kBAAkB,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC;AACzD,MAAM,mBAAmB,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC;AAU7C,MAAM,uBAAuB,GAAG,CAAK,KAAoB,EAAE,EAAE;IAClE,MAAM,iBAAiB,GAAG,KAA6B,CAAC;IACxD,OAAO,iBAAiB,CAAC,kBAAkB,CAAC,CAAC;AAC/C,CAAC,CAAC;AAEF,MAAM,WAAW,GAAY,EAAE,CAAC;AAEzB,MAAM,wBAAwB,GAAG,CACtC,KAAqE,EACrE,EAAE;IACF,kFAAkF;IAElF,MAAM,SAAS,GAAG,AAChB,UAAU,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CACrB,CAAC;IAC1B,MAAM,KAAK,GAAG,SAAS,CAAC,mBAAmB,CAAC,IAAI,SAAS,CAAC,kBAAkB,CAAC,CAAC;IAC9E,IAAI,CAAC,KAAK,EAAE,OAAO,WAAW,CAAC;IAC/B,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC;QACzB,OAAO,KAAK,CAAC;IACf,CAAC;IACD,SAAS,CAAC,mBAAmB,CAAC,GAAG;QAAC,KAAK;KAAC,CAAC;IACzC,OAAO,SAAS,CAAC,mBAAmB,CAAC,CAAC;AACxC,CAAC,CAAC"}},
    {"offset": {"line": 2492, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/utils/getThreadMessageText.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/utils/getThreadMessageText.tsx"],"sourcesContent":["import type {\n  AppendMessage,\n  TextMessagePart,\n  ThreadMessage,\n} from \"../types/AssistantTypes\";\n\nexport const getThreadMessageText = (\n  message: ThreadMessage | AppendMessage,\n) => {\n  const textParts = message.content.filter(\n    (part) => part.type === \"text\",\n  ) as TextMessagePart[];\n\n  return textParts.map((part) => part.text).join(\"\\n\\n\");\n};\n"],"names":[],"mappings":";;;;AAMO,MAAM,oBAAoB,GAAG,CAClC,OAAsC,EACtC,EAAE;IACF,MAAM,SAAS,GAAG,OAAO,CAAC,OAAO,CAAC,MAAM,CACtC,CAAC,IAAI,EAAE,CAAG,CAAD,GAAK,CAAC,IAAI,KAAK,MAAM,CACV,CAAC;IAEvB,OAAO,SAAS,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAG,CAAD,GAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACzD,CAAC,CAAC"}},
    {"offset": {"line": 2504, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime/AttachmentRuntime.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime/AttachmentRuntime.ts"],"sourcesContent":["import { SubscribableWithState } from \"./subscribable/Subscribable\";\n\nimport type { ComposerRuntimeCoreBinding } from \"./RuntimeBindings\";\nimport {\n  Attachment,\n  CompleteAttachment,\n  PendingAttachment,\n  Unsubscribe,\n} from \"../../types\";\nimport { AttachmentRuntimePath } from \"./RuntimePathTypes\";\n\ntype MessageAttachmentState = CompleteAttachment & {\n  readonly source: \"message\";\n};\n\ntype ThreadComposerAttachmentState = PendingAttachment & {\n  readonly source: \"thread-composer\";\n};\n\ntype EditComposerAttachmentState = Attachment & {\n  readonly source: \"edit-composer\";\n};\n\nexport type AttachmentState =\n  | ThreadComposerAttachmentState\n  | EditComposerAttachmentState\n  | MessageAttachmentState;\n\ntype AttachmentSnapshotBinding<Source extends AttachmentRuntimeSource> =\n  SubscribableWithState<\n    AttachmentState & { source: Source },\n    AttachmentRuntimePath & { attachmentSource: Source }\n  >;\n\ntype AttachmentRuntimeSource = AttachmentState[\"source\"];\n\nexport type AttachmentRuntime<\n  TSource extends AttachmentRuntimeSource = AttachmentRuntimeSource,\n> = {\n  readonly path: AttachmentRuntimePath & { attachmentSource: TSource };\n  readonly source: TSource;\n  getState(): AttachmentState & { source: TSource };\n  remove(): Promise<void>;\n  subscribe(callback: () => void): Unsubscribe;\n};\n\nexport abstract class AttachmentRuntimeImpl<\n  Source extends AttachmentRuntimeSource = AttachmentRuntimeSource,\n> implements AttachmentRuntime\n{\n  public get path() {\n    return this._core.path;\n  }\n\n  public abstract get source(): Source;\n\n  constructor(private _core: AttachmentSnapshotBinding<Source>) {\n    this.__internal_bindMethods();\n  }\n\n  protected __internal_bindMethods() {\n    this.getState = this.getState.bind(this);\n    this.remove = this.remove.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n  }\n\n  public getState(): AttachmentState & { source: Source } {\n    return this._core.getState();\n  }\n\n  public abstract remove(): Promise<void>;\n\n  public subscribe(callback: () => void) {\n    return this._core.subscribe(callback);\n  }\n}\n\nabstract class ComposerAttachmentRuntime<\n  Source extends \"thread-composer\" | \"edit-composer\",\n> extends AttachmentRuntimeImpl<Source> {\n  constructor(\n    core: AttachmentSnapshotBinding<Source>,\n    private _composerApi: ComposerRuntimeCoreBinding,\n  ) {\n    super(core);\n  }\n\n  public remove() {\n    const core = this._composerApi.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    return core.removeAttachment(this.getState().id);\n  }\n}\n\nexport class ThreadComposerAttachmentRuntimeImpl extends ComposerAttachmentRuntime<\"thread-composer\"> {\n  public get source(): \"thread-composer\" {\n    return \"thread-composer\";\n  }\n}\n\nexport class EditComposerAttachmentRuntimeImpl extends ComposerAttachmentRuntime<\"edit-composer\"> {\n  public get source(): \"edit-composer\" {\n    return \"edit-composer\";\n  }\n}\n\nexport class MessageAttachmentRuntimeImpl extends AttachmentRuntimeImpl<\"message\"> {\n  public get source(): \"message\" {\n    return \"message\";\n  }\n\n  constructor(core: AttachmentSnapshotBinding<\"message\">) {\n    super(core);\n  }\n\n  public remove(): never {\n    throw new Error(\"Message attachments cannot be removed\");\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;AA8CM,MAAgB,qBAAqB;IAUrB,MAAA;IANpB,IAAW,IAAI,GAAA;QACb,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;IACzB,CAAC;IAID,YAAoB,KAAwC,CAAA;QAAxC,IAAA,CAAA,KAAK,GAAL,KAAK,CAAmC;QAC1D,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAChC,CAAC;IAES,sBAAsB,GAAA;QAC9B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7C,CAAC;IAEM,QAAQ,GAAA;QACb,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;IAC/B,CAAC;IAIM,SAAS,CAAC,QAAoB,EAAA;QACnC,OAAO,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;IACxC,CAAC;CACF;AAED,MAAe,yBAEb,SAAQ,qBAA6B;IAG3B,aAAA;IAFV,YACE,IAAuC,EAC/B,YAAwC,CAAA;QAEhD,KAAK,CAAC,IAAI,CAAC,CAAC;QAFJ,IAAA,CAAA,YAAY,GAAZ,YAAY,CAA4B;IAGlD,CAAC;IAEM,MAAM,GAAA;QACX,MAAM,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC;QAC1C,IAAI,CAAC,IAAI,EAAE,MAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;QACxD,OAAO,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;IACnD,CAAC;CACF;AAEK,MAAO,mCAAoC,SAAQ,yBAA4C;IACnG,IAAW,MAAM,GAAA;QACf,OAAO,iBAAiB,CAAC;IAC3B,CAAC;CACF;AAEK,MAAO,iCAAkC,SAAQ,yBAA0C;IAC/F,IAAW,MAAM,GAAA;QACf,OAAO,eAAe,CAAC;IACzB,CAAC;CACF;AAEK,MAAO,4BAA6B,SAAQ,qBAAgC;IAChF,IAAW,MAAM,GAAA;QACf,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,YAAY,IAA0C,CAAA;QACpD,KAAK,CAAC,IAAI,CAAC,CAAC;IACd,CAAC;IAEM,MAAM,GAAA;QACX,MAAM,IAAI,KAAK,CAAC,uCAAuC,CAAC,CAAC;IAC3D,CAAC;CACF"}},
    {"offset": {"line": 2572, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime/subscribable/EventSubscriptionSubject.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime/subscribable/EventSubscriptionSubject.ts"],"sourcesContent":["import { Unsubscribe } from \"../../../types\";\nimport { BaseSubject } from \"./BaseSubject\";\nimport { EventSubscribable } from \"./Subscribable\";\n\nexport class EventSubscriptionSubject<\n  TEvent extends string,\n> extends BaseSubject {\n  constructor(private config: EventSubscribable<TEvent>) {\n    super();\n  }\n\n  public getState() {\n    return this.config.binding.getState();\n  }\n\n  public outerSubscribe(callback: () => void) {\n    return this.config.binding.subscribe(callback);\n  }\n\n  protected _connect(): Unsubscribe {\n    const callback = () => {\n      this.notifySubscribers();\n    };\n\n    let lastState = this.config.binding.getState();\n    let innerUnsubscribe = lastState?.unstable_on(this.config.event, callback);\n    const onRuntimeUpdate = () => {\n      const newState = this.config.binding.getState();\n      if (newState === lastState) return;\n      lastState = newState;\n\n      innerUnsubscribe?.();\n      innerUnsubscribe = this.config.binding\n        .getState()\n        ?.unstable_on(this.config.event, callback);\n    };\n\n    const outerUnsubscribe = this.outerSubscribe(onRuntimeUpdate);\n    return () => {\n      outerUnsubscribe?.();\n      innerUnsubscribe?.();\n    };\n  }\n}\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,WAAW,EAAE,yBAAsB;;AAGtC,MAAO,wBAEX,SAAQ,mOAAW;IACC,OAAA;IAApB,YAAoB,MAAiC,CAAA;QACnD,KAAK,EAAE,CAAC;QADU,IAAA,CAAA,MAAM,GAAN,MAAM,CAA2B;IAErD,CAAC;IAEM,QAAQ,GAAA;QACb,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;IACxC,CAAC;IAEM,cAAc,CAAC,QAAoB,EAAA;QACxC,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;IACjD,CAAC;IAES,QAAQ,GAAA;QAChB,MAAM,QAAQ,GAAG,GAAG,EAAE;YACpB,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC3B,CAAC,CAAC;QAEF,IAAI,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;QAC/C,IAAI,gBAAgB,GAAG,SAAS,EAAE,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC3E,MAAM,eAAe,GAAG,GAAG,EAAE;YAC3B,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YAChD,IAAI,QAAQ,KAAK,SAAS,EAAE,OAAO;YACnC,SAAS,GAAG,QAAQ,CAAC;YAErB,gBAAgB,EAAE,EAAE,CAAC;YACrB,gBAAgB,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CACnC,QAAQ,EAAE,EACT,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC/C,CAAC,CAAC;QAEF,MAAM,gBAAgB,GAAG,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;QAC9D,OAAO,GAAG,EAAE;YACV,gBAAgB,EAAE,EAAE,CAAC;YACrB,gBAAgB,EAAE,EAAE,CAAC;QACvB,CAAC,CAAC;IACJ,CAAC;CACF"}},
    {"offset": {"line": 2614, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime/ComposerRuntime.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime/ComposerRuntime.ts"],"sourcesContent":["import type {\n  Attachment,\n  PendingAttachment,\n} from \"../../types/AttachmentTypes\";\nimport type {\n  ComposerRuntimeCore,\n  ComposerRuntimeEventType,\n  DictationState,\n  ThreadComposerRuntimeCore,\n} from \"../runtime-cores/core/ComposerRuntimeCore\";\nimport type { Unsubscribe } from \"../../types\";\nimport type { MessageRole, RunConfig } from \"../../types/AssistantTypes\";\nimport type { QuoteInfo } from \"../../types/QuoteTypes\";\nimport type {\n  ThreadComposerRuntimeCoreBinding,\n  EditComposerRuntimeCoreBinding,\n  ComposerRuntimeCoreBinding,\n} from \"./RuntimeBindings\";\nimport type { ComposerRuntimePath } from \"./RuntimePathTypes\";\n\nimport { LazyMemoizeSubject } from \"./subscribable/LazyMemoizeSubject\";\nimport {\n  type AttachmentRuntime,\n  type AttachmentState,\n  EditComposerAttachmentRuntimeImpl,\n  ThreadComposerAttachmentRuntimeImpl,\n} from \"./AttachmentRuntime\";\nimport { ShallowMemoizeSubject } from \"./subscribable/ShallowMemoizeSubject\";\nimport { SKIP_UPDATE } from \"./subscribable/SKIP_UPDATE\";\nimport { EventSubscriptionSubject } from \"./subscribable/EventSubscriptionSubject\";\n\nexport type {\n  ThreadComposerRuntimeCoreBinding,\n  EditComposerRuntimeCoreBinding,\n  ComposerRuntimeCoreBinding,\n};\n\ntype BaseComposerState = {\n  readonly canCancel: boolean;\n  readonly isEditing: boolean;\n  readonly isEmpty: boolean;\n\n  readonly text: string;\n  readonly role: MessageRole;\n  readonly attachments: readonly Attachment[];\n  readonly runConfig: RunConfig;\n\n  readonly attachmentAccept: string;\n\n  /**\n   * The current state of dictation.\n   * Undefined when dictation is not active.\n   */\n  readonly dictation: DictationState | undefined;\n\n  /**\n   * The currently quoted text, if any.\n   * Undefined when no quote is set.\n   */\n  readonly quote: QuoteInfo | undefined;\n};\n\nexport type ThreadComposerState = BaseComposerState & {\n  readonly type: \"thread\";\n\n  readonly attachments: readonly PendingAttachment[];\n};\n\nexport type EditComposerState = BaseComposerState & {\n  readonly type: \"edit\";\n};\n\nexport type ComposerState = ThreadComposerState | EditComposerState;\n\nconst EMPTY_ARRAY = Object.freeze([]);\nconst EMPTY_OBJECT = Object.freeze({});\nconst getThreadComposerState = (\n  runtime: ThreadComposerRuntimeCore | undefined,\n): ThreadComposerState => {\n  return Object.freeze({\n    type: \"thread\",\n\n    isEditing: runtime?.isEditing ?? false,\n    canCancel: runtime?.canCancel ?? false,\n    isEmpty: runtime?.isEmpty ?? true,\n\n    attachments: runtime?.attachments ?? EMPTY_ARRAY,\n    text: runtime?.text ?? \"\",\n    role: runtime?.role ?? \"user\",\n    runConfig: runtime?.runConfig ?? EMPTY_OBJECT,\n    attachmentAccept: runtime?.attachmentAccept ?? \"\",\n    dictation: runtime?.dictation,\n    quote: runtime?.quote,\n\n    value: runtime?.text ?? \"\",\n  });\n};\n\nconst getEditComposerState = (\n  runtime: ComposerRuntimeCore | undefined,\n): EditComposerState => {\n  return Object.freeze({\n    type: \"edit\",\n\n    isEditing: runtime?.isEditing ?? false,\n    canCancel: runtime?.canCancel ?? false,\n    isEmpty: runtime?.isEmpty ?? true,\n\n    text: runtime?.text ?? \"\",\n    role: runtime?.role ?? \"user\",\n    attachments: runtime?.attachments ?? EMPTY_ARRAY,\n    runConfig: runtime?.runConfig ?? EMPTY_OBJECT,\n    attachmentAccept: runtime?.attachmentAccept ?? \"\",\n    dictation: runtime?.dictation,\n    quote: runtime?.quote,\n\n    value: runtime?.text ?? \"\",\n  });\n};\n\nexport type ComposerRuntime = {\n  readonly path: ComposerRuntimePath;\n  readonly type: \"edit\" | \"thread\";\n\n  /**\n   * Get the current state of the composer. Includes any data that has been added to the composer.\n   */\n  getState(): ComposerState;\n\n  /**\n   * Given a standard js File object, add it to the composer. A composer can have multiple attachments.\n   * @param file The file to add to the composer.\n   */\n  addAttachment(file: File): Promise<void>;\n\n  /**\n   * Set the text of the composer.\n   * @param text The text to set in the composer.\n   */\n  setText(text: string): void;\n\n  /**\n   * Set the role of the composer. For instance, if you'd like a specific message to have the 'assistant' role, you can do so here.\n   * @param role The role to set in the composer.\n   */\n  setRole(role: MessageRole): void;\n\n  /**\n   * Set the run config of the composer. This is used to send custom configuration data to the model.\n   * Within your backend, you can access this data using the `runConfig` object.\n   * Example:\n   * ```ts\n   * composerRuntime.setRunConfig({\n   *   custom: { customField: \"customValue\" }\n   * });\n   * ```\n   * @param runConfig The run config to set in the composer.\n   */\n  setRunConfig(runConfig: RunConfig): void;\n\n  /**\n   * Reset the composer. This will clear the entire state of the composer, including all text and attachments.\n   */\n  reset(): Promise<void>;\n\n  /**\n   * Clear all attachments from the composer.\n   */\n  clearAttachments(): Promise<void>;\n\n  /**\n   * Send a message. This will send whatever text or attachments are in the composer.\n   */\n  send(): void;\n\n  /**\n   * Cancel the current run. In edit mode, this will exit edit mode.\n   */\n  cancel(): void;\n\n  /**\n   * Listens for changes to the composer state.\n   * @param callback The callback to call when the composer state changes.\n   */\n  subscribe(callback: () => void): Unsubscribe;\n\n  /**\n   * Get an attachment by index.\n   * @param idx The index of the attachment to get.\n   */\n  getAttachmentByIndex(idx: number): AttachmentRuntime;\n\n  /**\n   * Start dictation to convert voice to text input.\n   * Requires a DictationAdapter to be configured.\n   */\n  startDictation(): void;\n\n  /**\n   * Stop the current dictation session.\n   */\n  stopDictation(): void;\n\n  /**\n   * Set a quote for the next message. Pass undefined to clear.\n   * @param quote The quote info to set, or undefined to clear.\n   */\n  setQuote(quote: QuoteInfo | undefined): void;\n\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  unstable_on(\n    event: ComposerRuntimeEventType,\n    callback: () => void,\n  ): Unsubscribe;\n};\n\nexport abstract class ComposerRuntimeImpl implements ComposerRuntime {\n  public get path() {\n    return this._core.path;\n  }\n\n  public abstract get type(): \"edit\" | \"thread\";\n\n  constructor(protected _core: ComposerRuntimeCoreBinding) {}\n\n  protected __internal_bindMethods() {\n    this.setText = this.setText.bind(this);\n    this.setRunConfig = this.setRunConfig.bind(this);\n    this.getState = this.getState.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n    this.addAttachment = this.addAttachment.bind(this);\n    this.reset = this.reset.bind(this);\n    this.clearAttachments = this.clearAttachments.bind(this);\n    this.send = this.send.bind(this);\n    this.cancel = this.cancel.bind(this);\n    this.setRole = this.setRole.bind(this);\n    this.getAttachmentByIndex = this.getAttachmentByIndex.bind(this);\n    this.startDictation = this.startDictation.bind(this);\n    this.stopDictation = this.stopDictation.bind(this);\n    this.setQuote = this.setQuote.bind(this);\n    this.unstable_on = this.unstable_on.bind(this);\n  }\n\n  public abstract getState(): ComposerState;\n\n  public setText(text: string) {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.setText(text);\n  }\n\n  public setRunConfig(runConfig: RunConfig) {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.setRunConfig(runConfig);\n  }\n\n  public addAttachment(file: File) {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    return core.addAttachment(file);\n  }\n\n  public reset() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    return core.reset();\n  }\n\n  public clearAttachments() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    return core.clearAttachments();\n  }\n\n  public send() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.send();\n  }\n\n  public cancel() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.cancel();\n  }\n\n  public setRole(role: MessageRole) {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.setRole(role);\n  }\n\n  public startDictation() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.startDictation();\n  }\n\n  public stopDictation() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.stopDictation();\n  }\n\n  public setQuote(quote: QuoteInfo | undefined) {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.setQuote(quote);\n  }\n\n  public subscribe(callback: () => void) {\n    return this._core.subscribe(callback);\n  }\n\n  private _eventSubscriptionSubjects = new Map<\n    string,\n    EventSubscriptionSubject<ComposerRuntimeEventType>\n  >();\n\n  public unstable_on(\n    event: ComposerRuntimeEventType,\n    callback: () => void,\n  ): Unsubscribe {\n    let subject = this._eventSubscriptionSubjects.get(event);\n    if (!subject) {\n      subject = new EventSubscriptionSubject({\n        event: event,\n        binding: this._core,\n      });\n      this._eventSubscriptionSubjects.set(event, subject);\n    }\n    return subject.subscribe(callback);\n  }\n\n  public abstract getAttachmentByIndex(idx: number): AttachmentRuntime;\n}\n\nexport type ThreadComposerRuntime = Omit<\n  ComposerRuntime,\n  \"getState\" | \"getAttachmentByIndex\"\n> & {\n  readonly path: ComposerRuntimePath & { composerSource: \"thread\" };\n  readonly type: \"thread\";\n  getState(): ThreadComposerState;\n\n  getAttachmentByIndex(\n    idx: number,\n  ): AttachmentRuntime & { source: \"thread-composer\" };\n};\n\nexport class ThreadComposerRuntimeImpl\n  extends ComposerRuntimeImpl\n  implements ThreadComposerRuntime\n{\n  public override get path() {\n    return this._core.path as ComposerRuntimePath & {\n      composerSource: \"thread\";\n    };\n  }\n\n  public get type() {\n    return \"thread\" as const;\n  }\n\n  private _getState;\n\n  constructor(core: ThreadComposerRuntimeCoreBinding) {\n    const stateBinding = new LazyMemoizeSubject({\n      path: core.path,\n      getState: () => getThreadComposerState(core.getState()),\n      subscribe: (callback) => core.subscribe(callback),\n    });\n    super({\n      path: core.path,\n      getState: () => core.getState(),\n      subscribe: (callback) => stateBinding.subscribe(callback),\n    });\n    this._getState = stateBinding.getState.bind(stateBinding);\n\n    this.__internal_bindMethods();\n  }\n\n  public override getState(): ThreadComposerState {\n    return this._getState();\n  }\n\n  public getAttachmentByIndex(idx: number) {\n    return new ThreadComposerAttachmentRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ...this.path,\n          attachmentSource: \"thread-composer\",\n          attachmentSelector: { type: \"index\", index: idx },\n          ref: `${this.path.ref}.attachments[${idx}]`,\n        },\n        getState: () => {\n          const attachments = this.getState().attachments;\n          const attachment = attachments[idx];\n          if (!attachment) return SKIP_UPDATE;\n\n          return {\n            ...attachment,\n            source: \"thread-composer\",\n          } satisfies AttachmentState & { source: \"thread-composer\" };\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n}\n\nexport type EditComposerRuntime = Omit<\n  ComposerRuntime,\n  \"getState\" | \"getAttachmentByIndex\"\n> & {\n  readonly path: ComposerRuntimePath & { composerSource: \"edit\" };\n  readonly type: \"edit\";\n\n  getState(): EditComposerState;\n  beginEdit(): void;\n\n  getAttachmentByIndex(\n    idx: number,\n  ): AttachmentRuntime & { source: \"edit-composer\" };\n};\n\nexport class EditComposerRuntimeImpl\n  extends ComposerRuntimeImpl\n  implements EditComposerRuntime\n{\n  public override get path() {\n    return this._core.path as ComposerRuntimePath & { composerSource: \"edit\" };\n  }\n\n  public get type() {\n    return \"edit\" as const;\n  }\n\n  private _getState;\n  constructor(\n    core: EditComposerRuntimeCoreBinding,\n    private _beginEdit: () => void,\n  ) {\n    const stateBinding = new LazyMemoizeSubject({\n      path: core.path,\n      getState: () => getEditComposerState(core.getState()),\n      subscribe: (callback) => core.subscribe(callback),\n    });\n\n    super({\n      path: core.path,\n      getState: () => core.getState(),\n      subscribe: (callback) => stateBinding.subscribe(callback),\n    });\n\n    this._getState = stateBinding.getState.bind(stateBinding);\n\n    this.__internal_bindMethods();\n  }\n\n  public override __internal_bindMethods() {\n    super.__internal_bindMethods();\n    this.beginEdit = this.beginEdit.bind(this);\n  }\n\n  public override getState(): EditComposerState {\n    return this._getState();\n  }\n\n  public beginEdit() {\n    this._beginEdit();\n  }\n\n  public getAttachmentByIndex(idx: number) {\n    return new EditComposerAttachmentRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ...this.path,\n          attachmentSource: \"edit-composer\",\n          attachmentSelector: { type: \"index\", index: idx },\n          ref: `${this.path.ref}.attachments[${idx}]`,\n        },\n        getState: () => {\n          const attachments = this.getState().attachments;\n          const attachment = attachments[idx];\n          if (!attachment) return SKIP_UPDATE;\n\n          return {\n            ...attachment,\n            source: \"edit-composer\",\n          } satisfies AttachmentState & { source: \"edit-composer\" };\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2873, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime/MessagePartRuntime.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime/MessagePartRuntime.ts"],"sourcesContent":["import {\n  ThreadAssistantMessagePart,\n  ThreadUserMessagePart,\n  MessagePartStatus,\n  ToolCallMessagePartStatus,\n} from \"../../types/AssistantTypes\";\nimport { ThreadRuntimeCoreBinding } from \"./ThreadRuntime\";\nimport type { MessageStateBinding } from \"./RuntimeBindings\";\nimport { SubscribableWithState } from \"./subscribable/Subscribable\";\nimport { Unsubscribe } from \"../../types\";\nimport { MessagePartRuntimePath } from \"./RuntimePathTypes\";\nimport { ToolResponse } from \"assistant-stream\";\n\nexport type MessagePartState = (\n  | ThreadUserMessagePart\n  | ThreadAssistantMessagePart\n) & {\n  readonly status: MessagePartStatus | ToolCallMessagePartStatus;\n};\n\ntype MessagePartSnapshotBinding = SubscribableWithState<\n  MessagePartState,\n  MessagePartRuntimePath\n>;\n\nexport type MessagePartRuntime = {\n  /**\n   * Add tool result to a tool call message part that has no tool result yet.\n   * This is useful when you are collecting a tool result via user input (\"human tool calls\").\n   */\n  addToolResult(result: any | ToolResponse<any>): void;\n\n  /**\n   * Resume a tool call that is waiting for human input with a payload.\n   * This is useful when a tool has requested human input and is waiting for a response.\n   */\n  resumeToolCall(payload: unknown): void;\n\n  readonly path: MessagePartRuntimePath;\n  getState(): MessagePartState;\n  subscribe(callback: () => void): Unsubscribe;\n};\n\nexport class MessagePartRuntimeImpl implements MessagePartRuntime {\n  public get path() {\n    return this.contentBinding.path;\n  }\n\n  constructor(\n    private contentBinding: MessagePartSnapshotBinding,\n    private messageApi?: MessageStateBinding,\n    private threadApi?: ThreadRuntimeCoreBinding,\n  ) {\n    this.__internal_bindMethods();\n  }\n\n  protected __internal_bindMethods() {\n    this.addToolResult = this.addToolResult.bind(this);\n    this.resumeToolCall = this.resumeToolCall.bind(this);\n    this.getState = this.getState.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n  }\n\n  public getState() {\n    return this.contentBinding.getState();\n  }\n\n  public addToolResult(result: any | ToolResponse<any>) {\n    const state = this.contentBinding.getState();\n    if (!state) throw new Error(\"Message part is not available\");\n\n    if (state.type !== \"tool-call\")\n      throw new Error(\"Tried to add tool result to non-tool message part\");\n\n    if (!this.messageApi)\n      throw new Error(\n        \"Message API is not available. This is likely a bug in assistant-ui.\",\n      );\n    if (!this.threadApi) throw new Error(\"Thread API is not available\");\n\n    const message = this.messageApi.getState();\n    if (!message) throw new Error(\"Message is not available\");\n\n    const toolName = state.toolName;\n    const toolCallId = state.toolCallId;\n\n    const response = ToolResponse.toResponse(result);\n    this.threadApi.getState().addToolResult({\n      messageId: message.id,\n      toolName,\n      toolCallId,\n      result: response.result,\n      artifact: response.artifact,\n      isError: response.isError,\n    });\n  }\n\n  public resumeToolCall(payload: unknown) {\n    const state = this.contentBinding.getState();\n    if (!state) throw new Error(\"Message part is not available\");\n\n    if (state.type !== \"tool-call\")\n      throw new Error(\"Tried to resume tool call on non-tool message part\");\n\n    if (!this.threadApi) throw new Error(\"Thread API is not available\");\n\n    const toolCallId = state.toolCallId;\n    this.threadApi.getState().resumeToolCall({\n      toolCallId,\n      payload,\n    });\n  }\n\n  public subscribe(callback: () => void) {\n    return this.contentBinding.subscribe(callback);\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2940, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime/subscribable/NestedSubscriptionSubject.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime/subscribable/NestedSubscriptionSubject.ts"],"sourcesContent":["import { Unsubscribe } from \"../../../types\";\nimport { BaseSubject } from \"./BaseSubject\";\nimport {\n  NestedSubscribable,\n  Subscribable,\n  SubscribableWithState,\n} from \"./Subscribable\";\n\nexport class NestedSubscriptionSubject<\n    TState extends Subscribable | undefined,\n    TPath,\n  >\n  extends BaseSubject\n  implements\n    SubscribableWithState<TState, TPath>,\n    NestedSubscribable<TState, TPath>\n{\n  public get path() {\n    return this.binding.path;\n  }\n\n  constructor(private binding: NestedSubscribable<TState, TPath>) {\n    super();\n  }\n\n  public getState() {\n    return this.binding.getState();\n  }\n\n  public outerSubscribe(callback: () => void) {\n    return this.binding.subscribe(callback);\n  }\n\n  protected _connect(): Unsubscribe {\n    const callback = () => {\n      this.notifySubscribers();\n    };\n\n    let lastState = this.binding.getState();\n    let innerUnsubscribe = lastState?.subscribe(callback);\n    const onRuntimeUpdate = () => {\n      const newState = this.binding.getState();\n      if (newState === lastState) return;\n      lastState = newState;\n\n      innerUnsubscribe?.();\n      innerUnsubscribe = this.binding.getState()?.subscribe(callback);\n\n      callback();\n    };\n\n    const outerUnsubscribe = this.outerSubscribe(onRuntimeUpdate);\n    return () => {\n      outerUnsubscribe?.();\n      innerUnsubscribe?.();\n    };\n  }\n}\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,WAAW,EAAE,yBAAsB;;AAOtC,MAAO,yBAIX,SAAQ,mOAAW;IASC,QAAA;IAJpB,IAAW,IAAI,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;IAC3B,CAAC;IAED,YAAoB,OAA0C,CAAA;QAC5D,KAAK,EAAE,CAAC;QADU,IAAA,CAAA,OAAO,GAAP,OAAO,CAAmC;IAE9D,CAAC;IAEM,QAAQ,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;IACjC,CAAC;IAEM,cAAc,CAAC,QAAoB,EAAA;QACxC,OAAO,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;IAC1C,CAAC;IAES,QAAQ,GAAA;QAChB,MAAM,QAAQ,GAAG,GAAG,EAAE;YACpB,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC3B,CAAC,CAAC;QAEF,IAAI,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;QACxC,IAAI,gBAAgB,GAAG,SAAS,EAAE,SAAS,CAAC,QAAQ,CAAC,CAAC;QACtD,MAAM,eAAe,GAAG,GAAG,EAAE;YAC3B,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACzC,IAAI,QAAQ,KAAK,SAAS,EAAE,OAAO;YACnC,SAAS,GAAG,QAAQ,CAAC;YAErB,gBAAgB,EAAE,EAAE,CAAC;YACrB,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,SAAS,CAAC,QAAQ,CAAC,CAAC;YAEhE,QAAQ,EAAE,CAAC;QACb,CAAC,CAAC;QAEF,MAAM,gBAAgB,GAAG,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;QAC9D,OAAO,GAAG,EAAE;YACV,gBAAgB,EAAE,EAAE,CAAC;YACrB,gBAAgB,EAAE,EAAE,CAAC;QACvB,CAAC,CAAC;IACJ,CAAC;CACF"}},
    {"offset": {"line": 2986, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime/MessageRuntime.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime/MessageRuntime.ts"],"sourcesContent":["import {\n  SpeechState,\n  SubmittedFeedback,\n} from \"../runtime-cores/core/ThreadRuntimeCore\";\nimport { symbolInnerMessage } from \"../runtime-cores/external-store/getExternalStoreMessage\";\nimport {\n  ThreadMessage,\n  ThreadAssistantMessagePart,\n  ThreadUserMessagePart,\n  Unsubscribe,\n} from \"../../types\";\nimport {\n  MessagePartStatus,\n  RunConfig,\n  ToolCallMessagePartStatus,\n} from \"../../types/AssistantTypes\";\nimport { getThreadMessageText } from \"../../utils/getThreadMessageText\";\nimport {\n  AttachmentRuntime,\n  AttachmentState,\n  MessageAttachmentRuntimeImpl,\n} from \"./AttachmentRuntime\";\nimport {\n  EditComposerRuntime,\n  EditComposerRuntimeImpl,\n} from \"./ComposerRuntime\";\nimport {\n  MessagePartRuntime,\n  MessagePartRuntimeImpl,\n  MessagePartState,\n} from \"./MessagePartRuntime\";\nimport { MessageRuntimePath } from \"./RuntimePathTypes\";\nimport { ThreadRuntimeCoreBinding } from \"./ThreadRuntime\";\nimport { NestedSubscriptionSubject } from \"./subscribable/NestedSubscriptionSubject\";\nimport { SKIP_UPDATE } from \"./subscribable/SKIP_UPDATE\";\nimport { ShallowMemoizeSubject } from \"./subscribable/ShallowMemoizeSubject\";\nimport type { MessageStateBinding } from \"./RuntimeBindings\";\n\nconst COMPLETE_STATUS: MessagePartStatus = Object.freeze({\n  type: \"complete\",\n});\n\nexport const toMessagePartStatus = (\n  message: ThreadMessage,\n  partIndex: number,\n  part: ThreadUserMessagePart | ThreadAssistantMessagePart,\n): ToolCallMessagePartStatus => {\n  if (message.role !== \"assistant\") return COMPLETE_STATUS;\n\n  if (part.type === \"tool-call\") {\n    if (!part.result) {\n      return message.status as ToolCallMessagePartStatus;\n    } else {\n      return COMPLETE_STATUS;\n    }\n  }\n\n  const isLastPart = partIndex === Math.max(0, message.content.length - 1);\n  if (message.status.type === \"requires-action\") return COMPLETE_STATUS;\n  return isLastPart ? (message.status as MessagePartStatus) : COMPLETE_STATUS;\n};\n\nconst getMessagePartState = (\n  message: MessageState,\n  partIndex: number,\n): MessagePartState | SKIP_UPDATE => {\n  const part = message.content[partIndex];\n  if (!part) {\n    return SKIP_UPDATE;\n  }\n\n  // if the message part is the same, don't update\n  const status = toMessagePartStatus(message, partIndex, part);\n  return Object.freeze({\n    ...part,\n    ...{ [symbolInnerMessage]: (part as any)[symbolInnerMessage] },\n    status,\n  });\n};\n\nexport type MessageState = ThreadMessage & {\n  readonly parentId: string | null;\n  /** The position of this message in the thread (0 for first message) */\n  readonly index: number;\n  readonly isLast: boolean;\n\n  readonly branchNumber: number;\n  readonly branchCount: number;\n\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  readonly speech: SpeechState | undefined;\n  /**\n   * @deprecated Use `message.metadata.submittedFeedback` instead. This will be removed in 0.12.0.\n   */\n  readonly submittedFeedback: SubmittedFeedback | undefined;\n};\n\nexport type { MessageStateBinding } from \"./RuntimeBindings\";\n\ntype ReloadConfig = {\n  runConfig?: RunConfig;\n};\n\nexport type MessageRuntime = {\n  readonly path: MessageRuntimePath;\n\n  readonly composer: EditComposerRuntime;\n\n  getState(): MessageState;\n  reload(config?: ReloadConfig): void;\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  speak(): void;\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  stopSpeaking(): void;\n  submitFeedback({ type }: { type: \"positive\" | \"negative\" }): void;\n  switchToBranch({\n    position,\n    branchId,\n  }: {\n    position?: \"previous\" | \"next\" | undefined;\n    branchId?: string | undefined;\n  }): void;\n  unstable_getCopyText(): string;\n\n  subscribe(callback: () => void): Unsubscribe;\n\n  getMessagePartByIndex(idx: number): MessagePartRuntime;\n  getMessagePartByToolCallId(toolCallId: string): MessagePartRuntime;\n\n  getAttachmentByIndex(idx: number): AttachmentRuntime & { source: \"message\" };\n};\n\nexport class MessageRuntimeImpl implements MessageRuntime {\n  public get path() {\n    return this._core.path;\n  }\n\n  constructor(\n    private _core: MessageStateBinding,\n    private _threadBinding: ThreadRuntimeCoreBinding,\n  ) {\n    this.composer = new EditComposerRuntimeImpl(\n      new NestedSubscriptionSubject({\n        path: {\n          ...this.path,\n          ref: `${this.path.ref}${this.path.ref}.composer`,\n          composerSource: \"edit\",\n        },\n        getState: this._getEditComposerRuntimeCore,\n        subscribe: (callback) => this._threadBinding.subscribe(callback),\n      }),\n      () => this._threadBinding.getState().beginEdit(this._core.getState().id),\n    );\n\n    this.__internal_bindMethods();\n  }\n\n  protected __internal_bindMethods() {\n    this.reload = this.reload.bind(this);\n    this.getState = this.getState.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n    this.getMessagePartByIndex = this.getMessagePartByIndex.bind(this);\n    this.getMessagePartByToolCallId =\n      this.getMessagePartByToolCallId.bind(this);\n    this.getAttachmentByIndex = this.getAttachmentByIndex.bind(this);\n    this.unstable_getCopyText = this.unstable_getCopyText.bind(this);\n    this.speak = this.speak.bind(this);\n    this.stopSpeaking = this.stopSpeaking.bind(this);\n    this.submitFeedback = this.submitFeedback.bind(this);\n    this.switchToBranch = this.switchToBranch.bind(this);\n  }\n\n  public readonly composer;\n\n  private _getEditComposerRuntimeCore = () => {\n    return this._threadBinding\n      .getState()\n      .getEditComposer(this._core.getState().id);\n  };\n\n  public getState() {\n    return this._core.getState();\n  }\n\n  public reload(reloadConfig: ReloadConfig = {}) {\n    const editComposerRuntimeCore = this._getEditComposerRuntimeCore();\n    const composerRuntimeCore =\n      editComposerRuntimeCore ?? this._threadBinding.getState().composer;\n    const composer = editComposerRuntimeCore ?? composerRuntimeCore;\n\n    const { runConfig = composer.runConfig } = reloadConfig;\n    const state = this._core.getState();\n    if (state.role !== \"assistant\")\n      throw new Error(\"Can only reload assistant messages\");\n\n    this._threadBinding.getState().startRun({\n      parentId: state.parentId,\n      sourceId: state.id,\n      runConfig,\n    });\n  }\n\n  public speak() {\n    const state = this._core.getState();\n    return this._threadBinding.getState().speak(state.id);\n  }\n\n  public stopSpeaking() {\n    const state = this._core.getState();\n    const thread = this._threadBinding.getState();\n    if (thread.speech?.messageId === state.id) {\n      this._threadBinding.getState().stopSpeaking();\n    } else {\n      throw new Error(\"Message is not being spoken\");\n    }\n  }\n\n  public submitFeedback({ type }: { type: \"positive\" | \"negative\" }) {\n    const state = this._core.getState();\n    this._threadBinding.getState().submitFeedback({\n      messageId: state.id,\n      type,\n    });\n  }\n\n  public switchToBranch({\n    position,\n    branchId,\n  }: {\n    position?: \"previous\" | \"next\" | undefined;\n    branchId?: string | undefined;\n  }) {\n    const state = this._core.getState();\n    if (branchId && position) {\n      throw new Error(\"May not specify both branchId and position\");\n    } else if (!branchId && !position) {\n      throw new Error(\"Must specify either branchId or position\");\n    }\n\n    const thread = this._threadBinding.getState();\n    const branches = thread.getBranches(state.id);\n    let targetBranch = branchId;\n    if (position === \"previous\") {\n      targetBranch = branches[state.branchNumber - 2];\n    } else if (position === \"next\") {\n      targetBranch = branches[state.branchNumber];\n    }\n    if (!targetBranch) throw new Error(\"Branch not found\");\n\n    this._threadBinding.getState().switchToBranch(targetBranch);\n  }\n\n  public unstable_getCopyText() {\n    return getThreadMessageText(this.getState());\n  }\n\n  public subscribe(callback: () => void) {\n    return this._core.subscribe(callback);\n  }\n\n  public getMessagePartByIndex(idx: number) {\n    if (idx < 0) throw new Error(\"Message part index must be >= 0\");\n    return new MessagePartRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ...this.path,\n          ref: `${this.path.ref}${this.path.ref}.content[${idx}]`,\n          messagePartSelector: { type: \"index\", index: idx },\n        },\n        getState: () => {\n          return getMessagePartState(this.getState(), idx);\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n      this._threadBinding,\n    );\n  }\n\n  public getMessagePartByToolCallId(toolCallId: string) {\n    return new MessagePartRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ...this.path,\n          ref:\n            this.path.ref +\n            `${this.path.ref}.content[toolCallId=${JSON.stringify(toolCallId)}]`,\n          messagePartSelector: { type: \"toolCallId\", toolCallId },\n        },\n        getState: () => {\n          const state = this._core.getState();\n          const idx = state.content.findIndex(\n            (part) =>\n              part.type === \"tool-call\" && part.toolCallId === toolCallId,\n          );\n          if (idx === -1) return SKIP_UPDATE;\n          return getMessagePartState(state, idx);\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n      this._threadBinding,\n    );\n  }\n\n  public getAttachmentByIndex(idx: number) {\n    return new MessageAttachmentRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ...this.path,\n          ref: `${this.path.ref}${this.path.ref}.attachments[${idx}]`,\n          attachmentSource: \"message\",\n          attachmentSelector: { type: \"index\", index: idx },\n        },\n        getState: () => {\n          const attachments = this.getState().attachments;\n          const attachment = attachments?.[idx];\n          if (!attachment) return SKIP_UPDATE;\n\n          return {\n            ...attachment,\n            source: \"message\",\n          } satisfies AttachmentState & { source: \"message\" };\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n    );\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3200, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime/ThreadRuntime.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime/ThreadRuntime.ts"],"sourcesContent":["import {\n  ThreadSuggestion,\n  RuntimeCapabilities,\n  ThreadRuntimeCore,\n  SpeechState,\n  ThreadRuntimeEventType,\n  StartRunConfig,\n  ResumeRunConfig,\n} from \"../runtime-cores/core/ThreadRuntimeCore\";\nimport { ExportedMessageRepository } from \"../runtime-cores/utils/MessageRepository\";\nimport { AppendMessage, ThreadMessage, Unsubscribe } from \"../../types\";\nimport { ThreadMessageLike } from \"../runtime-cores/external-store\";\nimport {\n  MessageRuntime,\n  MessageRuntimeImpl,\n  MessageState,\n} from \"./MessageRuntime\";\nimport { NestedSubscriptionSubject } from \"./subscribable/NestedSubscriptionSubject\";\nimport { ShallowMemoizeSubject } from \"./subscribable/ShallowMemoizeSubject\";\nimport { SubscribableWithState } from \"./subscribable/Subscribable\";\nimport {\n  ThreadComposerRuntime,\n  ThreadComposerRuntimeImpl,\n} from \"./ComposerRuntime\";\nimport { SKIP_UPDATE } from \"./subscribable/SKIP_UPDATE\";\nimport {\n  MessageRuntimePath,\n  ThreadListItemRuntimePath,\n  ThreadRuntimePath,\n} from \"./RuntimePathTypes\";\nimport type { ThreadListItemState } from \"./RuntimeBindings\";\nimport { RunConfig } from \"../../types/AssistantTypes\";\nimport { EventSubscriptionSubject } from \"./subscribable/EventSubscriptionSubject\";\nimport { symbolInnerMessage } from \"../runtime-cores/external-store/getExternalStoreMessage\";\nimport { ModelContext } from \"../../model-context\";\nimport { ChatModelRunOptions, ChatModelRunResult } from \"../runtime-cores\";\nimport { ReadonlyJSONValue } from \"assistant-stream/utils\";\n\nexport type CreateStartRunConfig = {\n  parentId: string | null;\n  sourceId?: string | null | undefined;\n  runConfig?: RunConfig | undefined;\n};\n\nexport type CreateResumeRunConfig = CreateStartRunConfig & {\n  stream?: (\n    options: ChatModelRunOptions,\n  ) => AsyncGenerator<ChatModelRunResult, void, unknown>;\n};\n\nconst toResumeRunConfig = (message: CreateResumeRunConfig): ResumeRunConfig => {\n  return {\n    parentId: message.parentId ?? null,\n    sourceId: message.sourceId ?? null,\n    runConfig: message.runConfig ?? {},\n    ...(message.stream ? { stream: message.stream } : {}),\n  };\n};\n\nconst toStartRunConfig = (message: CreateStartRunConfig): StartRunConfig => {\n  return {\n    parentId: message.parentId ?? null,\n    sourceId: message.sourceId ?? null,\n    runConfig: message.runConfig ?? {},\n  };\n};\n\nexport type CreateAppendMessage =\n  | string\n  | {\n      parentId?: string | null | undefined;\n      sourceId?: string | null | undefined;\n      role?: AppendMessage[\"role\"] | undefined;\n      content: AppendMessage[\"content\"];\n      attachments?: AppendMessage[\"attachments\"] | undefined;\n      metadata?: AppendMessage[\"metadata\"] | undefined;\n      createdAt?: Date | undefined;\n      runConfig?: AppendMessage[\"runConfig\"] | undefined;\n      startRun?: boolean | undefined;\n    };\n\nconst toAppendMessage = (\n  messages: readonly ThreadMessage[],\n  message: CreateAppendMessage,\n): AppendMessage => {\n  if (typeof message === \"string\") {\n    return {\n      createdAt: new Date(),\n      parentId: messages.at(-1)?.id ?? null,\n      sourceId: null,\n      runConfig: {},\n      role: \"user\",\n      content: [{ type: \"text\", text: message }],\n      attachments: [],\n      metadata: { custom: {} },\n    };\n  }\n\n  return {\n    createdAt: message.createdAt ?? new Date(),\n    parentId: message.parentId ?? messages.at(-1)?.id ?? null,\n    sourceId: message.sourceId ?? null,\n    role: message.role ?? \"user\",\n    content: message.content,\n    attachments: message.attachments ?? [],\n    metadata: message.metadata ?? { custom: {} },\n    runConfig: message.runConfig ?? {},\n    startRun: message.startRun,\n  } as AppendMessage;\n};\n\nexport type ThreadRuntimeCoreBinding = SubscribableWithState<\n  ThreadRuntimeCore,\n  ThreadRuntimePath\n> & {\n  outerSubscribe(callback: () => void): Unsubscribe;\n};\n\nexport type ThreadListItemRuntimeBinding = SubscribableWithState<\n  ThreadListItemState,\n  ThreadListItemRuntimePath\n>;\n\nexport type ThreadState = {\n  /**\n   * The thread ID.\n   * @deprecated This field is deprecated and will be removed in 0.12.0. Use `useThreadListItem().id` instead.\n   */\n  readonly threadId: string;\n\n  /**\n   * The thread metadata.\n   *\n   * @deprecated Use `useThreadListItem()` instead. This field is deprecated and will be removed in 0.12.0.\n   */\n  readonly metadata: ThreadListItemState;\n\n  /**\n   * Whether the thread is disabled. Disabled threads cannot receive new messages.\n   */\n  readonly isDisabled: boolean;\n\n  /**\n   * Whether the thread is loading its history.\n   */\n  readonly isLoading: boolean;\n\n  /**\n   * Whether the thread is running. A thread is considered running when there is an active stream connection to the backend.\n   */\n  readonly isRunning: boolean;\n\n  /**\n   * The capabilities of the thread, such as whether the thread supports editing, branch switching, etc.\n   */\n  readonly capabilities: RuntimeCapabilities;\n\n  /**\n   * The messages in the currently selected branch of the thread.\n   */\n  readonly messages: readonly ThreadMessage[];\n\n  /**\n   * The thread state.\n   *\n   * @deprecated This feature is experimental\n   */\n  readonly state: ReadonlyJSONValue;\n\n  /**\n   * Follow up message suggestions to show the user.\n   */\n  readonly suggestions: readonly ThreadSuggestion[];\n\n  /**\n   * Custom extra information provided by the runtime.\n   */\n  readonly extras: unknown;\n\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  readonly speech: SpeechState | undefined;\n};\n\nexport const getThreadState = (\n  runtime: ThreadRuntimeCore,\n  threadListItemState: ThreadListItemState,\n): ThreadState => {\n  const lastMessage = runtime.messages.at(-1);\n  return Object.freeze({\n    threadId: threadListItemState.id,\n    metadata: threadListItemState,\n    capabilities: runtime.capabilities,\n    isDisabled: runtime.isDisabled,\n    isLoading: runtime.isLoading,\n    isRunning:\n      lastMessage?.role !== \"assistant\"\n        ? false\n        : lastMessage.status.type === \"running\",\n    messages: runtime.messages,\n    state: runtime.state,\n    suggestions: runtime.suggestions,\n    extras: runtime.extras,\n    speech: runtime.speech,\n  });\n};\n\nexport type ThreadRuntime = {\n  /**\n   * The selector for the thread runtime.\n   */\n  readonly path: ThreadRuntimePath;\n\n  /**\n   * The thread composer runtime.\n   */\n  readonly composer: ThreadComposerRuntime;\n\n  /**\n   * Gets a snapshot of the thread state.\n   */\n  getState(): ThreadState;\n\n  /**\n   * Append a new message to the thread.\n   *\n   * @example ```ts\n   * // append a new user message with the text \"Hello, world!\"\n   * threadRuntime.append(\"Hello, world!\");\n   * ```\n   *\n   * @example ```ts\n   * // append a new assistant message with the text \"Hello, world!\"\n   * threadRuntime.append({\n   *   role: \"assistant\",\n   *   content: [{ type: \"text\", text: \"Hello, world!\" }],\n   * });\n   * ```\n   */\n  append(message: CreateAppendMessage): void;\n\n  /**\n   * @deprecated pass an object with `parentId` instead. This will be removed in 0.12.0.\n   */\n  startRun(parentId: string | null): void;\n  /**\n   * Start a new run with the given configuration.\n   * @param config The configuration for starting the run\n   */\n  startRun(config: CreateStartRunConfig): void;\n\n  /**\n   * Resume a run with the given configuration.\n   * @param config The configuration for resuming the run\n   **/\n  unstable_resumeRun(config: CreateResumeRunConfig): void;\n\n  /**\n   * Export the thread state in the external store format.\n   * For AI SDK runtimes, this returns the AI SDK message format.\n   * For other runtimes, this may return different formats or throw an error.\n   * @returns The thread state in the external format (typed as any)\n   */\n  exportExternalState(): any;\n\n  /**\n   * Import thread state from the external store format.\n   * For AI SDK runtimes, this accepts AI SDK messages.\n   * For other runtimes, this may accept different formats or throw an error.\n   * @param state The thread state in the external format (typed as any)\n   */\n  importExternalState(state: any): void;\n\n  /**\n   * Load external state into the thread.\n   * @deprecated Use importExternalState instead. This method will be removed in 0.12.0.\n   * @param state The state to load into the thread\n   */\n  unstable_loadExternalState(state: any): void;\n\n  subscribe(callback: () => void): Unsubscribe;\n  cancelRun(): void;\n  getModelContext(): ModelContext;\n\n  /**\n   * @deprecated This method was renamed to `getModelContext`.\n   */\n  getModelConfig(): ModelContext;\n\n  export(): ExportedMessageRepository;\n  import(repository: ExportedMessageRepository): void;\n\n  /**\n   * Reset the thread with optional initial messages.\n   *\n   * @param initialMessages - Optional array of initial messages to populate the thread\n   */\n  reset(initialMessages?: readonly ThreadMessageLike[]): void;\n\n  getMessageByIndex(idx: number): MessageRuntime;\n  getMessageById(messageId: string): MessageRuntime;\n\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  stopSpeaking(): void;\n\n  unstable_on(event: ThreadRuntimeEventType, callback: () => void): Unsubscribe;\n};\n\nexport class ThreadRuntimeImpl implements ThreadRuntime {\n  public get path() {\n    return this._threadBinding.path;\n  }\n\n  public get __internal_threadBinding() {\n    return this._threadBinding;\n  }\n\n  private readonly _threadBinding: ThreadRuntimeCoreBinding & {\n    getStateState(): ThreadState;\n  };\n\n  constructor(\n    threadBinding: ThreadRuntimeCoreBinding,\n    threadListItemBinding: ThreadListItemRuntimeBinding,\n  ) {\n    const stateBinding = new ShallowMemoizeSubject({\n      path: threadBinding.path,\n      getState: () =>\n        getThreadState(\n          threadBinding.getState(),\n          threadListItemBinding.getState(),\n        ),\n      subscribe: (callback) => {\n        const sub1 = threadBinding.subscribe(callback);\n        const sub2 = threadListItemBinding.subscribe(callback);\n        return () => {\n          sub1();\n          sub2();\n        };\n      },\n    });\n\n    this._threadBinding = {\n      path: threadBinding.path,\n      getState: () => threadBinding.getState(),\n      getStateState: () => stateBinding.getState(),\n      outerSubscribe: (callback) => threadBinding.outerSubscribe(callback),\n      subscribe: (callback) => threadBinding.subscribe(callback),\n    };\n\n    this.composer = new ThreadComposerRuntimeImpl(\n      new NestedSubscriptionSubject({\n        path: {\n          ...this.path,\n          ref: `${this.path.ref}${this.path.ref}.composer`,\n          composerSource: \"thread\",\n        },\n        getState: () => this._threadBinding.getState().composer,\n        subscribe: (callback) => this._threadBinding.subscribe(callback),\n      }),\n    );\n\n    this.__internal_bindMethods();\n  }\n\n  protected __internal_bindMethods() {\n    this.append = this.append.bind(this);\n    this.unstable_resumeRun = this.unstable_resumeRun.bind(this);\n    this.unstable_loadExternalState =\n      this.unstable_loadExternalState.bind(this);\n    this.importExternalState = this.importExternalState.bind(this);\n    this.exportExternalState = this.exportExternalState.bind(this);\n    this.startRun = this.startRun.bind(this);\n    this.cancelRun = this.cancelRun.bind(this);\n    this.stopSpeaking = this.stopSpeaking.bind(this);\n    this.export = this.export.bind(this);\n    this.import = this.import.bind(this);\n    this.reset = this.reset.bind(this);\n    this.getMessageByIndex = this.getMessageByIndex.bind(this);\n    this.getMessageById = this.getMessageById.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n    this.unstable_on = this.unstable_on.bind(this);\n    this.getModelContext = this.getModelContext.bind(this);\n    this.getModelConfig = this.getModelConfig.bind(this);\n    this.getState = this.getState.bind(this);\n  }\n\n  public readonly composer;\n\n  public getState() {\n    return this._threadBinding.getStateState();\n  }\n\n  public append(message: CreateAppendMessage) {\n    this._threadBinding\n      .getState()\n      .append(\n        toAppendMessage(this._threadBinding.getState().messages, message),\n      );\n  }\n\n  public subscribe(callback: () => void) {\n    return this._threadBinding.subscribe(callback);\n  }\n\n  public getModelContext() {\n    return this._threadBinding.getState().getModelContext();\n  }\n\n  public getModelConfig() {\n    return this.getModelContext();\n  }\n\n  public startRun(configOrParentId: string | null | CreateStartRunConfig) {\n    const config =\n      configOrParentId === null || typeof configOrParentId === \"string\"\n        ? { parentId: configOrParentId }\n        : configOrParentId;\n    return this._threadBinding.getState().startRun(toStartRunConfig(config));\n  }\n\n  public unstable_resumeRun(config: CreateResumeRunConfig) {\n    return this._threadBinding.getState().resumeRun(toResumeRunConfig(config));\n  }\n\n  public exportExternalState() {\n    return this._threadBinding.getState().exportExternalState();\n  }\n\n  public importExternalState(state: any) {\n    this._threadBinding.getState().importExternalState(state);\n  }\n\n  public unstable_loadExternalState(state: any) {\n    this._threadBinding.getState().unstable_loadExternalState(state);\n  }\n\n  public cancelRun() {\n    this._threadBinding.getState().cancelRun();\n  }\n\n  public stopSpeaking() {\n    return this._threadBinding.getState().stopSpeaking();\n  }\n\n  public export() {\n    return this._threadBinding.getState().export();\n  }\n\n  public import(data: ExportedMessageRepository) {\n    this._threadBinding.getState().import(data);\n  }\n\n  public reset(initialMessages?: readonly ThreadMessageLike[]) {\n    this._threadBinding.getState().reset(initialMessages);\n  }\n\n  public getMessageByIndex(idx: number) {\n    if (idx < 0) throw new Error(\"Message index must be >= 0\");\n\n    return this._getMessageRuntime(\n      {\n        ...this.path,\n        ref: `${this.path.ref}${this.path.ref}.messages[${idx}]`,\n        messageSelector: { type: \"index\", index: idx },\n      },\n      () => {\n        const messages = this._threadBinding.getState().messages;\n        const message = messages[idx];\n        if (!message) return undefined;\n        return {\n          message,\n          parentId: messages[idx - 1]?.id ?? null,\n          index: idx,\n        };\n      },\n    );\n  }\n\n  public getMessageById(messageId: string) {\n    return this._getMessageRuntime(\n      {\n        ...this.path,\n        ref:\n          this.path.ref +\n          `${this.path.ref}.messages[messageId=${JSON.stringify(messageId)}]`,\n        messageSelector: { type: \"messageId\", messageId: messageId },\n      },\n      () => this._threadBinding.getState().getMessageById(messageId),\n    );\n  }\n\n  private _getMessageRuntime(\n    path: MessageRuntimePath,\n    callback: () =>\n      | { parentId: string | null; message: ThreadMessage; index: number }\n      | undefined,\n  ) {\n    return new MessageRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path,\n        getState: () => {\n          const { message, parentId, index } = callback() ?? {};\n\n          const { messages, speech: speechState } =\n            this._threadBinding.getState();\n\n          if (!message || parentId === undefined || index === undefined)\n            return SKIP_UPDATE;\n\n          const thread = this._threadBinding.getState();\n\n          const branches = thread.getBranches(message.id);\n          const submittedFeedback = message.metadata.submittedFeedback;\n\n          return {\n            ...message,\n            ...{ [symbolInnerMessage]: (message as any)[symbolInnerMessage] },\n\n            index,\n            isLast: messages.at(-1)?.id === message.id,\n            parentId,\n\n            branchNumber: branches.indexOf(message.id) + 1,\n            branchCount: branches.length,\n\n            speech:\n              speechState?.messageId === message.id ? speechState : undefined,\n\n            submittedFeedback,\n          } satisfies MessageState;\n        },\n        subscribe: (callback) => this._threadBinding.subscribe(callback),\n      }),\n      this._threadBinding,\n    );\n  }\n\n  private _eventSubscriptionSubjects = new Map<\n    string,\n    EventSubscriptionSubject<ThreadRuntimeEventType>\n  >();\n\n  public unstable_on(\n    event: ThreadRuntimeEventType,\n    callback: () => void,\n  ): Unsubscribe {\n    let subject = this._eventSubscriptionSubjects.get(event);\n    if (!subject) {\n      subject = new EventSubscriptionSubject({\n        event: event,\n        binding: this._threadBinding,\n      });\n      this._eventSubscriptionSubjects.set(event, subject);\n    }\n    return subject.subscribe(callback);\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3469, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime/ThreadListRuntime.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime/ThreadListRuntime.ts"],"sourcesContent":["import { LazyMemoizeSubject } from \"./subscribable/LazyMemoizeSubject\";\nimport { ThreadListRuntimeCore } from \"../runtime-cores/core/ThreadListRuntimeCore\";\nimport { Unsubscribe } from \"../../types\";\nimport {\n  ThreadListItemRuntime,\n  ThreadListItemRuntimeImpl,\n  ThreadListItemState,\n} from \"./ThreadListItemRuntime\";\nimport { SKIP_UPDATE } from \"./subscribable/SKIP_UPDATE\";\nimport { ShallowMemoizeSubject } from \"./subscribable/ShallowMemoizeSubject\";\nimport {\n  ThreadListItemRuntimeBinding,\n  ThreadRuntime,\n  ThreadRuntimeCoreBinding,\n  ThreadRuntimeImpl,\n} from \"./ThreadRuntime\";\nimport { NestedSubscriptionSubject } from \"./subscribable/NestedSubscriptionSubject\";\n\nexport type ThreadListState = {\n  readonly mainThreadId: string;\n  readonly newThreadId: string | undefined;\n  readonly threadIds: readonly string[];\n  readonly archivedThreadIds: readonly string[];\n  readonly isLoading: boolean;\n  readonly threadItems: Readonly<\n    Record<string, Omit<ThreadListItemState, \"isMain\" | \"threadId\">>\n  >;\n};\n\nexport type ThreadListRuntime = {\n  getState(): ThreadListState;\n\n  subscribe(callback: () => void): Unsubscribe;\n\n  readonly main: ThreadRuntime;\n  getById(threadId: string): ThreadRuntime;\n\n  readonly mainItem: ThreadListItemRuntime;\n  getItemById(threadId: string): ThreadListItemRuntime;\n  getItemByIndex(idx: number): ThreadListItemRuntime;\n  getArchivedItemByIndex(idx: number): ThreadListItemRuntime;\n\n  switchToThread(threadId: string): Promise<void>;\n  switchToNewThread(): Promise<void>;\n};\n\nconst getThreadListState = (\n  threadList: ThreadListRuntimeCore,\n): ThreadListState => {\n  return {\n    mainThreadId: threadList.mainThreadId,\n    newThreadId: threadList.newThreadId,\n    threadIds: threadList.threadIds,\n    archivedThreadIds: threadList.archivedThreadIds,\n    isLoading: threadList.isLoading,\n    threadItems: threadList.threadItems,\n  };\n};\n\nconst getThreadListItemState = (\n  threadList: ThreadListRuntimeCore,\n  threadId: string | undefined,\n): ThreadListItemState | SKIP_UPDATE => {\n  if (threadId === undefined) return SKIP_UPDATE;\n\n  const threadData = threadList.getItemById(threadId);\n  if (!threadData) return SKIP_UPDATE;\n  return {\n    id: threadData.id,\n    remoteId: threadData.remoteId,\n    externalId: threadData.externalId,\n    title: threadData.title,\n    status: threadData.status,\n    isMain: threadData.id === threadList.mainThreadId,\n  };\n};\n\nexport type ThreadListRuntimeCoreBinding = ThreadListRuntimeCore;\n\nexport class ThreadListRuntimeImpl implements ThreadListRuntime {\n  private _getState;\n  constructor(\n    private _core: ThreadListRuntimeCoreBinding,\n    private _runtimeFactory: new (\n      binding: ThreadRuntimeCoreBinding,\n      threadListItemBinding: ThreadListItemRuntimeBinding,\n    ) => ThreadRuntime = ThreadRuntimeImpl,\n  ) {\n    const stateBinding = new LazyMemoizeSubject({\n      path: {},\n      getState: () => getThreadListState(_core),\n      subscribe: (callback) => _core.subscribe(callback),\n    });\n\n    this._getState = stateBinding.getState.bind(stateBinding);\n\n    this._mainThreadListItemRuntime = new ThreadListItemRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ref: `threadItems[main]`,\n          threadSelector: { type: \"main\" },\n        },\n        getState: () => {\n          return getThreadListItemState(this._core, this._core.mainThreadId);\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n\n    this.main = new _runtimeFactory(\n      new NestedSubscriptionSubject({\n        path: {\n          ref: \"threads.main\",\n          threadSelector: { type: \"main\" },\n        },\n        getState: () => _core.getMainThreadRuntimeCore(),\n        subscribe: (callback) => _core.subscribe(callback),\n      }),\n      this._mainThreadListItemRuntime, // TODO capture \"main\" threadListItem from context around useLocalRuntime / useExternalStoreRuntime\n    );\n\n    this.__internal_bindMethods();\n  }\n\n  protected __internal_bindMethods() {\n    this.switchToThread = this.switchToThread.bind(this);\n    this.switchToNewThread = this.switchToNewThread.bind(this);\n    this.getState = this.getState.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n    this.getById = this.getById.bind(this);\n    this.getItemById = this.getItemById.bind(this);\n    this.getItemByIndex = this.getItemByIndex.bind(this);\n    this.getArchivedItemByIndex = this.getArchivedItemByIndex.bind(this);\n  }\n\n  public switchToThread(threadId: string): Promise<void> {\n    return this._core.switchToThread(threadId);\n  }\n\n  public switchToNewThread(): Promise<void> {\n    return this._core.switchToNewThread();\n  }\n\n  public getState(): ThreadListState {\n    return this._getState();\n  }\n\n  public subscribe(callback: () => void): Unsubscribe {\n    return this._core.subscribe(callback);\n  }\n\n  private _mainThreadListItemRuntime;\n\n  public readonly main: ThreadRuntime;\n\n  public get mainItem() {\n    return this._mainThreadListItemRuntime;\n  }\n\n  public getById(threadId: string) {\n    return new this._runtimeFactory(\n      new NestedSubscriptionSubject({\n        path: {\n          ref: `threads[threadId=${JSON.stringify(threadId)}]`,\n          threadSelector: { type: \"threadId\", threadId },\n        },\n        getState: () => this._core.getThreadRuntimeCore(threadId),\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this.mainItem, // TODO capture \"main\" threadListItem from context around useLocalRuntime / useExternalStoreRuntime\n    );\n  }\n\n  public getItemByIndex(idx: number) {\n    return new ThreadListItemRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ref: `threadItems[${idx}]`,\n          threadSelector: { type: \"index\", index: idx },\n        },\n        getState: () => {\n          return getThreadListItemState(this._core, this._core.threadIds[idx]);\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n\n  public getArchivedItemByIndex(idx: number) {\n    return new ThreadListItemRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ref: `archivedThreadItems[${idx}]`,\n          threadSelector: { type: \"archiveIndex\", index: idx },\n        },\n        getState: () => {\n          return getThreadListItemState(\n            this._core,\n            this._core.archivedThreadIds[idx],\n          );\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n\n  public getItemById(threadId: string) {\n    return new ThreadListItemRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ref: `threadItems[threadId=${threadId}]`,\n          threadSelector: { type: \"threadId\", threadId },\n        },\n        getState: () => {\n          return getThreadListItemState(this._core, threadId);\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3635, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/remote-thread-list/RemoteThreadListHookInstanceManager.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/RemoteThreadListHookInstanceManager.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  FC,\n  useCallback,\n  useRef,\n  useEffect,\n  memo,\n  PropsWithChildren,\n  ComponentType,\n  useMemo,\n} from \"react\";\nimport { UseBoundStore, StoreApi, create } from \"zustand\";\nimport { useAui } from \"@assistant-ui/store\";\nimport { ThreadListItemRuntimeProvider } from \"../../../context/providers\";\nimport {\n  ThreadListRuntimeCore,\n  ThreadRuntimeCore,\n  ThreadRuntimeImpl,\n} from \"../../../internal\";\nimport { BaseSubscribable } from \"./BaseSubscribable\";\nimport { AssistantRuntime } from \"../../runtime\";\nimport { ThreadListRuntimeImpl } from \"../../runtime/ThreadListRuntime\";\n\ntype RemoteThreadListHook = () => AssistantRuntime;\n\ntype RemoteThreadListHookInstance = {\n  runtime?: ThreadRuntimeCore;\n};\nexport class RemoteThreadListHookInstanceManager extends BaseSubscribable {\n  private useRuntimeHook: UseBoundStore<\n    StoreApi<{ useRuntime: RemoteThreadListHook }>\n  >;\n  private instances = new Map<string, RemoteThreadListHookInstance>();\n  private useAliveThreadsKeysChanged = create(() => ({}));\n  private parent: ThreadListRuntimeCore;\n\n  constructor(\n    runtimeHook: RemoteThreadListHook,\n    parent: ThreadListRuntimeCore,\n  ) {\n    super();\n    this.parent = parent;\n    this.useRuntimeHook = create(() => ({ useRuntime: runtimeHook }));\n  }\n\n  public startThreadRuntime(threadId: string) {\n    if (!this.instances.has(threadId)) {\n      this.instances.set(threadId, {});\n      this.useAliveThreadsKeysChanged.setState({}, true);\n    }\n\n    return new Promise<ThreadRuntimeCore>((resolve, reject) => {\n      const callback = () => {\n        const instance = this.instances.get(threadId);\n        if (!instance) {\n          dispose();\n          reject(new Error(\"Thread was deleted before runtime was started\"));\n        } else if (!instance.runtime) {\n          return; // misc update\n        } else {\n          dispose();\n          resolve(instance.runtime);\n        }\n      };\n      const dispose = this.subscribe(callback);\n      callback();\n    });\n  }\n\n  public getThreadRuntimeCore(threadId: string) {\n    const instance = this.instances.get(threadId);\n    if (!instance) return undefined;\n    return instance.runtime;\n  }\n\n  public stopThreadRuntime(threadId: string) {\n    this.instances.delete(threadId);\n    this.useAliveThreadsKeysChanged.setState({}, true);\n  }\n\n  public setRuntimeHook(newRuntimeHook: RemoteThreadListHook) {\n    const prevRuntimeHook = this.useRuntimeHook.getState().useRuntime;\n    if (prevRuntimeHook !== newRuntimeHook) {\n      this.useRuntimeHook.setState({ useRuntime: newRuntimeHook }, true);\n    }\n  }\n\n  private _InnerActiveThreadProvider: FC<{\n    threadId: string;\n  }> = ({ threadId }) => {\n    const { useRuntime } = this.useRuntimeHook();\n    const runtime = useRuntime();\n\n    const threadBinding = (runtime.thread as ThreadRuntimeImpl)\n      .__internal_threadBinding;\n\n    const updateRuntime = useCallback(() => {\n      const aliveThread = this.instances.get(threadId);\n      if (!aliveThread)\n        throw new Error(\"Thread not found. This is a bug in assistant-ui.\");\n\n      aliveThread.runtime = threadBinding.getState();\n      this._notifySubscribers();\n    }, [threadId, threadBinding]);\n\n    const isMounted = useRef(false);\n    if (!isMounted.current) {\n      updateRuntime();\n    }\n\n    useEffect(() => {\n      isMounted.current = true;\n      updateRuntime();\n      return threadBinding.outerSubscribe(updateRuntime);\n    }, [threadBinding, updateRuntime]);\n\n    const aui = useAui();\n    const initPromiseRef = useRef<Promise<unknown> | undefined>(undefined);\n\n    useEffect(() => {\n      const runtimeCore = threadBinding.getState();\n      const setGetInitializePromise = (runtimeCore as Record<string, unknown>)[\n        \"__internal_setGetInitializePromise\"\n      ];\n      if (typeof setGetInitializePromise === \"function\") {\n        setGetInitializePromise.call(runtimeCore, () => initPromiseRef.current);\n      }\n    }, [threadBinding]);\n\n    useEffect(() => {\n      return runtime.threads.main.unstable_on(\"initialize\", () => {\n        const state = aui.threadListItem().getState();\n        if (state.status === \"new\") {\n          initPromiseRef.current = aui.threadListItem().initialize();\n\n          const dispose = runtime.thread.unstable_on(\"runEnd\", () => {\n            dispose();\n\n            aui.threadListItem().generateTitle();\n          });\n        }\n      });\n    }, [runtime, aui]);\n\n    return null;\n  };\n\n  private _OuterActiveThreadProvider: FC<{\n    threadId: string;\n    provider: ComponentType<PropsWithChildren>;\n  }> = memo(({ threadId, provider: Provider }) => {\n    const runtime = useMemo(\n      () => new ThreadListRuntimeImpl(this.parent).getItemById(threadId),\n      [threadId],\n    );\n\n    return (\n      <ThreadListItemRuntimeProvider runtime={runtime}>\n        <Provider>\n          <this._InnerActiveThreadProvider threadId={threadId} />\n        </Provider>\n      </ThreadListItemRuntimeProvider>\n    );\n  });\n\n  public __internal_RenderThreadRuntimes: FC<{\n    provider: ComponentType<PropsWithChildren>;\n  }> = ({ provider }) => {\n    this.useAliveThreadsKeysChanged(); // trigger re-render on alive threads change\n\n    return Array.from(this.instances.keys()).map((threadId) => (\n      <this._OuterActiveThreadProvider\n        key={threadId}\n        threadId={threadId}\n        provider={provider}\n      />\n    ));\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3787, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/remote-thread-list/EMPTY_THREAD_CORE.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/EMPTY_THREAD_CORE.tsx"],"sourcesContent":["import type { ThreadRuntimeCore } from \"../../../internal\";\n\nconst EMPTY_THREAD_ERROR = new Error(\n  \"This is the empty thread, a placeholder for the main thread. You cannot perform any actions on this thread instance. This error is probably because you tried to call a thread method in your render function. Call the method inside a `useEffect` hook instead.\",\n);\nexport const EMPTY_THREAD_CORE: ThreadRuntimeCore = {\n  getMessageById() {\n    return undefined;\n  },\n\n  getBranches() {\n    return [];\n  },\n\n  switchToBranch() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  append() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  startRun() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  resumeRun() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  cancelRun() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  addToolResult() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  resumeToolCall() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  speak() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  stopSpeaking() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  submitFeedback() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  getModelContext() {\n    return {};\n  },\n\n  exportExternalState() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  importExternalState() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  unstable_loadExternalState() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  composer: {\n    attachments: [],\n    attachmentAccept: \"*\",\n\n    async addAttachment() {\n      throw EMPTY_THREAD_ERROR;\n    },\n\n    async removeAttachment() {\n      throw EMPTY_THREAD_ERROR;\n    },\n\n    isEditing: true,\n\n    canCancel: false,\n    isEmpty: true,\n\n    text: \"\",\n\n    setText() {\n      throw EMPTY_THREAD_ERROR;\n    },\n\n    role: \"user\",\n\n    setRole() {\n      throw EMPTY_THREAD_ERROR;\n    },\n\n    runConfig: {},\n\n    setRunConfig() {\n      throw EMPTY_THREAD_ERROR;\n    },\n\n    async reset() {\n      // noop\n    },\n\n    async clearAttachments() {\n      // noop\n    },\n\n    send() {\n      throw EMPTY_THREAD_ERROR;\n    },\n\n    cancel() {\n      // noop\n    },\n\n    dictation: undefined,\n\n    startDictation() {\n      throw EMPTY_THREAD_ERROR;\n    },\n\n    stopDictation() {\n      // noop\n    },\n\n    quote: undefined,\n\n    setQuote() {\n      throw EMPTY_THREAD_ERROR;\n    },\n\n    subscribe() {\n      return () => {};\n    },\n\n    unstable_on() {\n      return () => {};\n    },\n  },\n\n  getEditComposer() {\n    return undefined;\n  },\n\n  beginEdit() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  speech: undefined,\n\n  capabilities: {\n    switchToBranch: false,\n    switchBranchDuringRun: false,\n    edit: false,\n    reload: false,\n    cancel: false,\n    unstable_copy: false,\n    speech: false,\n    dictation: false,\n    attachments: false,\n    feedback: false,\n  },\n\n  isDisabled: false,\n  isLoading: false,\n\n  messages: [],\n\n  state: null,\n\n  suggestions: [],\n\n  extras: undefined,\n\n  subscribe() {\n    return () => {};\n  },\n\n  import() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  export() {\n    return { messages: [] };\n  },\n\n  reset() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  unstable_on() {\n    return () => {};\n  },\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3942, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/remote-thread-list/OptimisticState.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/OptimisticState.ts"],"sourcesContent":["import { BaseSubscribable } from \"./BaseSubscribable\";\n\ntype Transform<TState, TResult> = {\n  execute: () => Promise<TResult>;\n\n  /** transform the state after the promise resolves */\n  then?: (state: TState, result: TResult) => TState;\n\n  /** transform the state during resolution and afterwards */\n  optimistic?: (state: TState) => TState;\n\n  /** transform the state only while loading */\n  loading?: (state: TState, task: Promise<TResult>) => TState;\n};\n\ntype PendingTransform<TState, TResult> = Transform<TState, TResult> & {\n  task: Promise<TResult>;\n};\n\nconst pipeTransforms = <TState, TExtra>(\n  initialState: TState,\n  extraParam: TExtra,\n  transforms: (((state: TState, extra: TExtra) => TState) | undefined)[],\n): TState => {\n  return transforms.reduce((state, transform) => {\n    return transform?.(state, extraParam) ?? state;\n  }, initialState);\n};\n\nexport class OptimisticState<TState> extends BaseSubscribable {\n  private readonly _pendingTransforms: Array<PendingTransform<TState, any>> =\n    [];\n  private _baseValue: TState;\n  private _cachedValue: TState;\n\n  public constructor(initialState: TState) {\n    super();\n    this._baseValue = initialState;\n    this._cachedValue = initialState;\n  }\n\n  private _updateState(): void {\n    this._cachedValue = this._pendingTransforms.reduce((state, transform) => {\n      return pipeTransforms(state, transform.task, [\n        transform.loading,\n        transform.optimistic,\n      ]);\n    }, this._baseValue);\n\n    this._notifySubscribers();\n  }\n\n  public get baseValue(): TState {\n    return this._baseValue;\n  }\n\n  public get value(): TState {\n    return this._cachedValue;\n  }\n\n  public update(state: TState): void {\n    this._baseValue = state;\n    this._updateState();\n  }\n\n  public async optimisticUpdate<TResult>(\n    transform: Transform<TState, TResult>,\n  ): Promise<TResult> {\n    const task = transform.execute();\n    const pendingTransform = { ...transform, task };\n    try {\n      this._pendingTransforms.push(pendingTransform);\n      this._updateState();\n\n      const result = await task;\n      this._baseValue = pipeTransforms(this._baseValue, result, [\n        transform.optimistic,\n        transform.then,\n      ]);\n      return result;\n    } finally {\n      const index = this._pendingTransforms.indexOf(pendingTransform);\n      if (index > -1) {\n        this._pendingTransforms.splice(index, 1);\n      }\n      this._updateState();\n    }\n  }\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,gBAAgB,EAAE,8BAA2B;;AAmBtD,MAAM,cAAc,GAAG,CACrB,YAAoB,EACpB,UAAkB,EAClB,UAAsE,EAC9D,EAAE;IACV,OAAO,UAAU,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,SAAS,EAAE,EAAE;QAC5C,OAAO,SAAS,EAAE,CAAC,KAAK,EAAE,UAAU,CAAC,IAAI,KAAK,CAAC;IACjD,CAAC,EAAE,YAAY,CAAC,CAAC;AACnB,CAAC,CAAC;AAEI,MAAO,eAAwB,SAAQ,kQAAgB;IAC1C,kBAAkB,GACjC,EAAE,CAAC;IACG,UAAU,CAAS;IACnB,YAAY,CAAS;IAE7B,YAAmB,YAAoB,CAAA;QACrC,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,UAAU,GAAG,YAAY,CAAC;QAC/B,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;IACnC,CAAC;IAEO,YAAY,GAAA;QAClB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,SAAS,EAAE,EAAE;YACtE,OAAO,cAAc,CAAC,KAAK,EAAE,SAAS,CAAC,IAAI,EAAE;gBAC3C,SAAS,CAAC,OAAO;gBACjB,SAAS,CAAC,UAAU;aACrB,CAAC,CAAC;QACL,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QAEpB,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC5B,CAAC;IAED,IAAW,SAAS,GAAA;QAClB,OAAO,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;IAED,IAAW,KAAK,GAAA;QACd,OAAO,IAAI,CAAC,YAAY,CAAC;IAC3B,CAAC;IAEM,MAAM,CAAC,KAAa,EAAA;QACzB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAEM,KAAK,CAAC,gBAAgB,CAC3B,SAAqC,EAAA;QAErC,MAAM,IAAI,GAAG,SAAS,CAAC,OAAO,EAAE,CAAC;QACjC,MAAM,gBAAgB,GAAG;YAAE,GAAG,SAAS;YAAE,IAAI;QAAA,CAAE,CAAC;QAChD,IAAI,CAAC;YACH,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;YAC/C,IAAI,CAAC,YAAY,EAAE,CAAC;YAEpB,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC;YAC1B,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,EAAE;gBACxD,SAAS,CAAC,UAAU;gBACpB,SAAS,CAAC,IAAI;aACf,CAAC,CAAC;YACH,OAAO,MAAM,CAAC;QAChB,CAAC,QAAS,CAAC;YACT,MAAM,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;YAChE,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE,CAAC;gBACf,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAC3C,CAAC;YACD,IAAI,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC;IACH,CAAC;CACF"}},
    {"offset": {"line": 4009, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/remote-thread-list/RemoteThreadListThreadListRuntimeCore.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/RemoteThreadListThreadListRuntimeCore.tsx"],"sourcesContent":["\"use client\";\n\nimport { ThreadListRuntimeCore } from \"../core/ThreadListRuntimeCore\";\nimport { generateId } from \"../../../internal\";\nimport {\n  RemoteThreadInitializeResponse,\n  RemoteThreadListOptions,\n} from \"./types\";\nimport { RemoteThreadListHookInstanceManager } from \"./RemoteThreadListHookInstanceManager\";\nimport { BaseSubscribable } from \"./BaseSubscribable\";\nimport { EMPTY_THREAD_CORE } from \"./EMPTY_THREAD_CORE\";\nimport { OptimisticState } from \"./OptimisticState\";\nimport { FC, Fragment, useEffect, useId } from \"react\";\nimport { create } from \"zustand\";\nimport { AssistantMessageStream } from \"assistant-stream\";\nimport { ModelContextProvider } from \"../../../model-context\";\nimport { RuntimeAdapterProvider } from \"../adapters/RuntimeAdapterProvider\";\n\ntype RemoteThreadData =\n  | {\n      readonly id: string;\n      readonly remoteId: undefined;\n      readonly externalId: undefined;\n      readonly status: \"new\";\n      readonly title: undefined;\n    }\n  | {\n      readonly id: string;\n      readonly initializeTask: Promise<RemoteThreadInitializeResponse>;\n      readonly remoteId: undefined;\n      readonly externalId: undefined;\n      readonly status: \"regular\" | \"archived\";\n      readonly title?: string | undefined;\n    }\n  | {\n      readonly id: string;\n      readonly initializeTask: Promise<RemoteThreadInitializeResponse>;\n      readonly remoteId: string;\n      readonly externalId: string | undefined;\n      readonly status: \"regular\" | \"archived\";\n      readonly title?: string | undefined;\n    };\n\ntype THREAD_MAPPING_ID = string & { __brand: \"THREAD_MAPPING_ID\" };\nfunction createThreadMappingId(id: string): THREAD_MAPPING_ID {\n  return id as THREAD_MAPPING_ID;\n}\n\ntype RemoteThreadState = {\n  readonly isLoading: boolean;\n  readonly newThreadId: string | undefined;\n  readonly threadIds: readonly string[];\n  readonly archivedThreadIds: readonly string[];\n  readonly threadIdMap: Readonly<Record<string, THREAD_MAPPING_ID>>;\n  readonly threadData: Readonly<Record<THREAD_MAPPING_ID, RemoteThreadData>>;\n};\n\nconst getThreadData = (\n  state: RemoteThreadState,\n  threadIdOrRemoteId: string,\n) => {\n  const idx = state.threadIdMap[threadIdOrRemoteId];\n  if (idx === undefined) return undefined;\n  return state.threadData[idx];\n};\n\nconst updateStatusReducer = (\n  state: RemoteThreadState,\n  threadIdOrRemoteId: string,\n  newStatus: \"regular\" | \"archived\" | \"deleted\",\n) => {\n  const data = getThreadData(state, threadIdOrRemoteId);\n  if (!data) return state;\n\n  const { id, remoteId, status: lastStatus } = data;\n  if (lastStatus === newStatus) return state;\n\n  const newState = { ...state };\n\n  // lastStatus\n  switch (lastStatus) {\n    case \"new\":\n      newState.newThreadId = undefined;\n      break;\n    case \"regular\":\n      newState.threadIds = newState.threadIds.filter((t) => t !== id);\n      break;\n    case \"archived\":\n      newState.archivedThreadIds = newState.archivedThreadIds.filter(\n        (t) => t !== id,\n      );\n      break;\n\n    default: {\n      const _exhaustiveCheck: never = lastStatus;\n      throw new Error(`Unsupported state: ${_exhaustiveCheck}`);\n    }\n  }\n\n  // newStatus\n  switch (newStatus) {\n    case \"regular\":\n      newState.threadIds = [id, ...newState.threadIds];\n      break;\n\n    case \"archived\":\n      newState.archivedThreadIds = [id, ...newState.archivedThreadIds];\n      break;\n\n    case \"deleted\":\n      newState.threadData = Object.fromEntries(\n        Object.entries(newState.threadData).filter(([key]) => key !== id),\n      );\n      newState.threadIdMap = Object.fromEntries(\n        Object.entries(newState.threadIdMap).filter(\n          ([key]) => key !== id && key !== remoteId,\n        ),\n      );\n      break;\n\n    default: {\n      const _exhaustiveCheck: never = newStatus;\n      throw new Error(`Unsupported state: ${_exhaustiveCheck}`);\n    }\n  }\n\n  if (newStatus !== \"deleted\") {\n    newState.threadData = {\n      ...newState.threadData,\n      [id]: {\n        ...data,\n        status: newStatus,\n      },\n    };\n  }\n\n  return newState;\n};\n\nexport class RemoteThreadListThreadListRuntimeCore\n  extends BaseSubscribable\n  implements ThreadListRuntimeCore\n{\n  private _options!: RemoteThreadListOptions;\n  private readonly _hookManager: RemoteThreadListHookInstanceManager;\n\n  private _loadThreadsPromise: Promise<void> | undefined;\n\n  private _mainThreadId!: string;\n  private readonly _state = new OptimisticState<RemoteThreadState>({\n    isLoading: false,\n    newThreadId: undefined,\n    threadIds: [],\n    archivedThreadIds: [],\n    threadIdMap: {},\n    threadData: {},\n  });\n\n  public get threadItems() {\n    return this._state.value.threadData;\n  }\n\n  public getLoadThreadsPromise() {\n    // TODO this needs to be cached in case this promise is loaded during suspense\n    if (!this._loadThreadsPromise) {\n      this._loadThreadsPromise = this._state\n        .optimisticUpdate({\n          execute: () => this._options.adapter.list(),\n          loading: (state) => {\n            return {\n              ...state,\n              isLoading: true,\n            };\n          },\n          then: (state, l) => {\n            const newThreadIds = [];\n            const newArchivedThreadIds = [];\n            const newThreadIdMap = {} as Record<string, THREAD_MAPPING_ID>;\n            const newThreadData = {} as Record<\n              THREAD_MAPPING_ID,\n              RemoteThreadData\n            >;\n\n            for (const thread of l.threads) {\n              switch (thread.status) {\n                case \"regular\":\n                  newThreadIds.push(thread.remoteId);\n                  break;\n                case \"archived\":\n                  newArchivedThreadIds.push(thread.remoteId);\n                  break;\n                default: {\n                  const _exhaustiveCheck: never = thread.status;\n                  throw new Error(`Unsupported state: ${_exhaustiveCheck}`);\n                }\n              }\n\n              const mappingId = createThreadMappingId(thread.remoteId);\n              newThreadIdMap[thread.remoteId] = mappingId;\n              newThreadData[mappingId] = {\n                id: thread.remoteId,\n                remoteId: thread.remoteId,\n                externalId: thread.externalId,\n                status: thread.status,\n                title: thread.title,\n                initializeTask: Promise.resolve({\n                  remoteId: thread.remoteId,\n                  externalId: thread.externalId,\n                }),\n              };\n            }\n\n            return {\n              ...state,\n              threadIds: newThreadIds,\n              archivedThreadIds: newArchivedThreadIds,\n              threadIdMap: {\n                ...state.threadIdMap,\n                ...newThreadIdMap,\n              },\n              threadData: {\n                ...state.threadData,\n                ...newThreadData,\n              },\n            };\n          },\n        })\n        .then(() => {});\n    }\n\n    return this._loadThreadsPromise;\n  }\n\n  constructor(\n    options: RemoteThreadListOptions,\n    private readonly contextProvider: ModelContextProvider,\n  ) {\n    super();\n\n    this._state.subscribe(() => this._notifySubscribers());\n    this._hookManager = new RemoteThreadListHookInstanceManager(\n      options.runtimeHook,\n      this,\n    );\n    this.useProvider = create(() => ({\n      Provider: options.adapter.unstable_Provider ?? Fragment,\n    }));\n    this.__internal_setOptions(options);\n    this.switchToNewThread();\n  }\n\n  private useProvider;\n\n  public __internal_setOptions(options: RemoteThreadListOptions) {\n    if (this._options === options) return;\n\n    this._options = options;\n\n    const Provider = options.adapter.unstable_Provider ?? Fragment;\n    if (Provider !== this.useProvider.getState().Provider) {\n      this.useProvider.setState({ Provider }, true);\n    }\n\n    this._hookManager.setRuntimeHook(options.runtimeHook);\n  }\n\n  public __internal_load() {\n    this.getLoadThreadsPromise(); // begin loading on initial bind\n  }\n\n  public get isLoading() {\n    return this._state.value.isLoading;\n  }\n\n  public get threadIds() {\n    return this._state.value.threadIds;\n  }\n\n  public get archivedThreadIds() {\n    return this._state.value.archivedThreadIds;\n  }\n\n  public get newThreadId() {\n    return this._state.value.newThreadId;\n  }\n\n  public get mainThreadId(): string {\n    return this._mainThreadId;\n  }\n\n  public getMainThreadRuntimeCore() {\n    const result = this._hookManager.getThreadRuntimeCore(this._mainThreadId);\n    if (!result) return EMPTY_THREAD_CORE;\n    return result;\n  }\n\n  public getThreadRuntimeCore(threadIdOrRemoteId: string) {\n    const data = this.getItemById(threadIdOrRemoteId);\n    if (!data) throw new Error(\"Thread not found\");\n\n    const result = this._hookManager.getThreadRuntimeCore(data.id);\n    if (!result) throw new Error(\"Thread not found\");\n    return result;\n  }\n\n  public getItemById(threadIdOrRemoteId: string) {\n    return getThreadData(this._state.value, threadIdOrRemoteId);\n  }\n\n  public async switchToThread(threadIdOrRemoteId: string): Promise<void> {\n    let data = this.getItemById(threadIdOrRemoteId);\n\n    if (!data) {\n      const remoteMetadata =\n        await this._options.adapter.fetch(threadIdOrRemoteId);\n      const state = this._state.value;\n      const mappingId = createThreadMappingId(remoteMetadata.remoteId);\n\n      const newThreadData = {\n        ...state.threadData,\n        [mappingId]: {\n          id: mappingId,\n          initializeTask: Promise.resolve({\n            remoteId: remoteMetadata.remoteId,\n            externalId: remoteMetadata.externalId,\n          }),\n          remoteId: remoteMetadata.remoteId,\n          externalId: remoteMetadata.externalId,\n          status: remoteMetadata.status,\n          title: remoteMetadata.title,\n        } as RemoteThreadData,\n      };\n\n      const newThreadIdMap = {\n        ...state.threadIdMap,\n        [remoteMetadata.remoteId]: mappingId,\n      };\n\n      const newThreadIds =\n        remoteMetadata.status === \"regular\"\n          ? [...state.threadIds, remoteMetadata.remoteId]\n          : state.threadIds;\n\n      const newArchivedThreadIds =\n        remoteMetadata.status === \"archived\"\n          ? [...state.archivedThreadIds, remoteMetadata.remoteId]\n          : state.archivedThreadIds;\n\n      this._state.update({\n        ...state,\n        threadIds: newThreadIds,\n        archivedThreadIds: newArchivedThreadIds,\n        threadIdMap: newThreadIdMap,\n        threadData: newThreadData,\n      });\n\n      data = this.getItemById(threadIdOrRemoteId);\n    }\n\n    if (!data) throw new Error(\"Thread not found\");\n    if (this._mainThreadId === data.id) return;\n\n    const task = this._hookManager.startThreadRuntime(data.id);\n    if (this.mainThreadId !== undefined) {\n      await task;\n    } else {\n      task.then(() => this._notifySubscribers());\n    }\n\n    if (data.status === \"archived\") await this.unarchive(data.id);\n    this._mainThreadId = data.id;\n\n    this._notifySubscribers();\n  }\n\n  public async switchToNewThread(): Promise<void> {\n    // an initialization transaction is in progress, wait for it to settle\n    while (\n      this._state.baseValue.newThreadId !== undefined &&\n      this._state.value.newThreadId === undefined\n    ) {\n      await this._state.waitForUpdate();\n    }\n\n    const state = this._state.value;\n    let id: string | undefined = this._state.value.newThreadId;\n    if (id === undefined) {\n      do {\n        id = `__LOCALID_${generateId()}`;\n      } while (state.threadIdMap[id]);\n\n      const mappingId = createThreadMappingId(id);\n      this._state.update({\n        ...state,\n        newThreadId: id,\n        threadIdMap: {\n          ...state.threadIdMap,\n          [id]: mappingId,\n        },\n        threadData: {\n          ...state.threadData,\n          [mappingId]: {\n            status: \"new\",\n            id,\n            remoteId: undefined,\n            externalId: undefined,\n            title: undefined,\n          } satisfies RemoteThreadData,\n        },\n      });\n    }\n\n    return this.switchToThread(id);\n  }\n\n  public initialize = async (threadId: string) => {\n    if (this._state.value.newThreadId !== threadId) {\n      const data = this.getItemById(threadId);\n      if (!data) throw new Error(\"Thread not found\");\n      if (data.status === \"new\") throw new Error(\"Unexpected new state\");\n      return data.initializeTask;\n    }\n\n    return this._state.optimisticUpdate({\n      execute: () => {\n        return this._options.adapter.initialize(threadId);\n      },\n      optimistic: (state) => {\n        return updateStatusReducer(state, threadId, \"regular\");\n      },\n      loading: (state, task) => {\n        const mappingId = createThreadMappingId(threadId);\n        return {\n          ...state,\n          threadData: {\n            ...state.threadData,\n            [mappingId]: {\n              ...state.threadData[mappingId],\n              initializeTask: task,\n            },\n          },\n        };\n      },\n      then: (state, { remoteId, externalId }) => {\n        const data = getThreadData(state, threadId);\n        if (!data) return state;\n\n        const mappingId = createThreadMappingId(threadId);\n        return {\n          ...state,\n          threadIdMap: {\n            ...state.threadIdMap,\n            [remoteId]: mappingId,\n          },\n          threadData: {\n            ...state.threadData,\n            [mappingId]: {\n              ...data,\n              initializeTask: Promise.resolve({ remoteId, externalId }),\n              remoteId,\n              externalId,\n            },\n          },\n        };\n      },\n    });\n  };\n\n  public generateTitle = async (threadId: string) => {\n    const data = this.getItemById(threadId);\n    if (!data) throw new Error(\"Thread not found\");\n    if (data.status === \"new\") throw new Error(\"Thread is not yet initialized\");\n\n    const { remoteId } = await data.initializeTask;\n\n    const runtimeCore = this._hookManager.getThreadRuntimeCore(data.id);\n    if (!runtimeCore) return; // thread is no longer running\n\n    const messages = runtimeCore.messages;\n    const stream = await this._options.adapter.generateTitle(\n      remoteId,\n      messages,\n    );\n    const messageStream = AssistantMessageStream.fromAssistantStream(stream);\n    for await (const result of messageStream) {\n      const newTitle = result.parts.filter((c) => c.type === \"text\")[0]?.text;\n      const state = this._state.baseValue;\n      this._state.update({\n        ...state,\n        threadData: {\n          ...state.threadData,\n          [data.id]: {\n            ...data,\n            title: newTitle,\n          },\n        },\n      });\n    }\n  };\n\n  public rename(threadIdOrRemoteId: string, newTitle: string): Promise<void> {\n    const data = this.getItemById(threadIdOrRemoteId);\n    if (!data) throw new Error(\"Thread not found\");\n    if (data.status === \"new\") throw new Error(\"Thread is not yet initialized\");\n\n    return this._state.optimisticUpdate({\n      execute: async () => {\n        const { remoteId } = await data.initializeTask;\n        return this._options.adapter.rename(remoteId, newTitle);\n      },\n      optimistic: (state) => {\n        const data = getThreadData(state, threadIdOrRemoteId);\n        if (!data) return state;\n\n        return {\n          ...state,\n          threadData: {\n            ...state.threadData,\n            [data.id]: {\n              ...data,\n              title: newTitle,\n            },\n          },\n        };\n      },\n    });\n  }\n\n  private async _ensureThreadIsNotMain(threadId: string) {\n    if (threadId === this.newThreadId)\n      throw new Error(\"Cannot ensure new thread is not main\");\n\n    if (threadId === this._mainThreadId) {\n      await this.switchToNewThread();\n    }\n  }\n\n  public async archive(threadIdOrRemoteId: string) {\n    const data = this.getItemById(threadIdOrRemoteId);\n    if (!data) throw new Error(\"Thread not found\");\n    if (data.status !== \"regular\")\n      throw new Error(\"Thread is not yet initialized or already archived\");\n\n    return this._state.optimisticUpdate({\n      execute: async () => {\n        await this._ensureThreadIsNotMain(data.id);\n        const { remoteId } = await data.initializeTask;\n        return this._options.adapter.archive(remoteId);\n      },\n      optimistic: (state) => {\n        return updateStatusReducer(state, data.id, \"archived\");\n      },\n    });\n  }\n\n  public unarchive(threadIdOrRemoteId: string): Promise<void> {\n    const data = this.getItemById(threadIdOrRemoteId);\n    if (!data) throw new Error(\"Thread not found\");\n    if (data.status !== \"archived\") throw new Error(\"Thread is not archived\");\n\n    return this._state.optimisticUpdate({\n      execute: async () => {\n        try {\n          const { remoteId } = await data.initializeTask;\n          return await this._options.adapter.unarchive(remoteId);\n        } catch (error) {\n          await this._ensureThreadIsNotMain(data.id);\n          throw error;\n        }\n      },\n      optimistic: (state) => {\n        return updateStatusReducer(state, data.id, \"regular\");\n      },\n    });\n  }\n\n  public async delete(threadIdOrRemoteId: string) {\n    const data = this.getItemById(threadIdOrRemoteId);\n    if (!data) throw new Error(\"Thread not found\");\n    if (data.status !== \"regular\" && data.status !== \"archived\")\n      throw new Error(\"Thread is not yet initialized\");\n\n    return this._state.optimisticUpdate({\n      execute: async () => {\n        await this._ensureThreadIsNotMain(data.id);\n        const { remoteId } = await data.initializeTask;\n        return await this._options.adapter.delete(remoteId);\n      },\n      optimistic: (state) => {\n        return updateStatusReducer(state, data.id, \"deleted\");\n      },\n    });\n  }\n\n  public async detach(threadIdOrRemoteId: string): Promise<void> {\n    const data = this.getItemById(threadIdOrRemoteId);\n    if (!data) throw new Error(\"Thread not found\");\n    if (data.status !== \"regular\" && data.status !== \"archived\")\n      throw new Error(\"Thread is not yet initialized\");\n\n    await this._ensureThreadIsNotMain(data.id);\n    this._hookManager.stopThreadRuntime(data.id);\n  }\n\n  private useBoundIds = create<string[]>(() => []);\n\n  public __internal_RenderComponent: FC = () => {\n    const id = useId();\n    useEffect(() => {\n      this.useBoundIds.setState((s) => [...s, id], true);\n      return () => {\n        this.useBoundIds.setState((s) => s.filter((i) => i !== id), true);\n      };\n    }, [id]);\n\n    const boundIds = this.useBoundIds();\n    const { Provider } = this.useProvider();\n\n    const adapters = {\n      modelContext: this.contextProvider,\n    };\n\n    return (\n      (boundIds.length === 0 || boundIds[0] === id) && (\n        // only render if the component is the first one mounted\n        <RuntimeAdapterProvider adapters={adapters}>\n          <this._hookManager.__internal_RenderThreadRuntimes\n            provider={Provider}\n          />\n        </RuntimeAdapterProvider>\n      )\n    );\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4520, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/external-store/auto-status.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/auto-status.tsx"],"sourcesContent":["import { ReadonlyJSONValue } from \"assistant-stream/utils\";\nimport { MessageStatus } from \"../../../types\";\n\nconst symbolAutoStatus = Symbol(\"autoStatus\");\n\nconst AUTO_STATUS_RUNNING = Object.freeze(\n  Object.assign({ type: \"running\" as const }, { [symbolAutoStatus]: true }),\n);\nconst AUTO_STATUS_COMPLETE = Object.freeze(\n  Object.assign(\n    {\n      type: \"complete\" as const,\n      reason: \"unknown\" as const,\n    },\n    { [symbolAutoStatus]: true },\n  ),\n);\n\nconst AUTO_STATUS_PENDING = Object.freeze(\n  Object.assign(\n    {\n      type: \"requires-action\" as const,\n      reason: \"tool-calls\" as const,\n    },\n    { [symbolAutoStatus]: true },\n  ),\n);\n\nconst AUTO_STATUS_INTERRUPT = Object.freeze(\n  Object.assign(\n    {\n      type: \"requires-action\" as const,\n      reason: \"interrupt\" as const,\n    },\n    { [symbolAutoStatus]: true },\n  ),\n);\n\nexport const isAutoStatus = (status: MessageStatus) =>\n  (status as any)[symbolAutoStatus] === true;\n\nexport const getAutoStatus = (\n  isLast: boolean,\n  isRunning: boolean,\n  hasInterruptedToolCalls: boolean,\n  hasPendingToolCalls: boolean,\n  error?: ReadonlyJSONValue,\n): MessageStatus => {\n  if (isLast && error) {\n    return Object.assign(\n      {\n        type: \"incomplete\" as const,\n        reason: \"error\" as const,\n        error: error,\n      },\n      { [symbolAutoStatus]: true },\n    );\n  }\n\n  return isLast && isRunning\n    ? AUTO_STATUS_RUNNING\n    : hasInterruptedToolCalls\n      ? AUTO_STATUS_INTERRUPT\n      : hasPendingToolCalls\n        ? AUTO_STATUS_PENDING\n        : AUTO_STATUS_COMPLETE;\n};\n"],"names":[],"mappings":";;;;;;AAGA,MAAM,gBAAgB,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;AAE9C,MAAM,mBAAmB,GAAG,MAAM,CAAC,MAAM,CACvC,MAAM,CAAC,MAAM,CAAC;IAAE,IAAI,EAAE,SAAkB;AAAA,CAAE,EAAE;IAAE,CAAC,gBAAgB,CAAC,EAAE,IAAI;AAAA,CAAE,CAAC,CAC1E,CAAC;AACF,MAAM,oBAAoB,GAAG,MAAM,CAAC,MAAM,CACxC,MAAM,CAAC,MAAM,CACX;IACE,IAAI,EAAE,UAAmB;IACzB,MAAM,EAAE,SAAkB;CAC3B,EACD;IAAE,CAAC,gBAAgB,CAAC,EAAE,IAAI;AAAA,CAAE,CAC7B,CACF,CAAC;AAEF,MAAM,mBAAmB,GAAG,MAAM,CAAC,MAAM,CACvC,MAAM,CAAC,MAAM,CACX;IACE,IAAI,EAAE,iBAA0B;IAChC,MAAM,EAAE,YAAqB;CAC9B,EACD;IAAE,CAAC,gBAAgB,CAAC,EAAE,IAAI;AAAA,CAAE,CAC7B,CACF,CAAC;AAEF,MAAM,qBAAqB,GAAG,MAAM,CAAC,MAAM,CACzC,MAAM,CAAC,MAAM,CACX;IACE,IAAI,EAAE,iBAA0B;IAChC,MAAM,EAAE,WAAoB;CAC7B,EACD;IAAE,CAAC,gBAAgB,CAAC,EAAE,IAAI;AAAA,CAAE,CAC7B,CACF,CAAC;AAEK,MAAM,YAAY,GAAG,CAAC,MAAqB,EAAE,CACjD,CADmD,KACrC,CAAC,gBAAgB,CAAC,KAAK,IAAI,CAAC;AAEtC,MAAM,aAAa,GAAG,CAC3B,MAAe,EACf,SAAkB,EAClB,uBAAgC,EAChC,mBAA4B,EAC5B,KAAyB,EACV,EAAE;IACjB,IAAI,MAAM,IAAI,KAAK,EAAE,CAAC;QACpB,OAAO,MAAM,CAAC,MAAM,CAClB;YACE,IAAI,EAAE,YAAqB;YAC3B,MAAM,EAAE,OAAgB;YACxB,KAAK,EAAE,KAAK;SACb,EACD;YAAE,CAAC,gBAAgB,CAAC,EAAE,IAAI;QAAA,CAAE,CAC7B,CAAC;IACJ,CAAC;IAED,OAAO,MAAM,IAAI,SAAS,GACtB,mBAAmB,GACnB,uBAAuB,GACrB,qBAAqB,GACrB,mBAAmB,GACjB,mBAAmB,GACnB,oBAAoB,CAAC;AAC/B,CAAC,CAAC"}},
    {"offset": {"line": 4567, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/utils/MessageRepository.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/utils/MessageRepository.tsx"],"sourcesContent":["import type { ThreadMessage } from \"../../../types\";\nimport { RunConfig } from \"../../../types/AssistantTypes\";\nimport { generateId, generateOptimisticId } from \"../../../utils/idUtils\";\nimport { ThreadMessageLike } from \"../external-store\";\nimport { getAutoStatus } from \"../external-store/auto-status\";\nimport { fromThreadMessageLike } from \"../external-store/ThreadMessageLike\";\n\n/**\n * Represents a parent node in the repository tree structure.\n */\ntype RepositoryParent = {\n  /** IDs of child messages */\n  children: string[];\n  /** Reference to the next message in the active branch */\n  next: RepositoryMessage | null;\n};\n\n/**\n * Represents a message node in the repository tree structure.\n */\ntype RepositoryMessage = RepositoryParent & {\n  /** Reference to the parent message */\n  prev: RepositoryMessage | null;\n  /** The actual message data */\n  current: ThreadMessage;\n  /** The depth level in the tree (0 for root messages) */\n  level: number;\n};\n\n/**\n * Represents a message item that can be exported from the repository.\n */\nexport type ExportedMessageRepositoryItem = {\n  /** The message data */\n  message: ThreadMessage;\n  /** ID of the parent message, or null for root messages */\n  parentId: string | null;\n  /** The run configuration for the message */\n  runConfig?: RunConfig;\n};\n\n/**\n * Represents the entire repository state for export/import.\n */\nexport type ExportedMessageRepository = {\n  /** ID of the head message, or null/undefined if no head */\n  headId?: string | null;\n  /** Array of all messages with their parent references */\n  messages: Array<{\n    message: ThreadMessage;\n    parentId: string | null;\n    runConfig?: RunConfig;\n  }>;\n};\n\n/**\n * Utility functions for working with exported message repositories.\n */\nexport const ExportedMessageRepository = {\n  /**\n   * Converts an array of messages to an ExportedMessageRepository format.\n   * Creates parent-child relationships based on the order of messages in the array.\n   *\n   * @param messages - Array of message-like objects to convert\n   * @returns ExportedMessageRepository with parent-child relationships established\n   */\n  fromArray: (\n    messages: readonly ThreadMessageLike[],\n  ): ExportedMessageRepository => {\n    const conv = messages.map((m) =>\n      fromThreadMessageLike(\n        m,\n        generateId(),\n        getAutoStatus(false, false, false, false, undefined),\n      ),\n    );\n\n    return {\n      messages: conv.map((m, idx) => ({\n        parentId: idx > 0 ? conv[idx - 1]!.id : null,\n        message: m,\n      })),\n    };\n  },\n};\n\n/**\n * Recursively finds the head (leaf) message in a branch.\n *\n * @param message - The starting message or parent node\n * @returns The leaf message of the branch, or null if not found\n */\nconst findHead = (\n  message: RepositoryMessage | RepositoryParent,\n): RepositoryMessage | null => {\n  if (message.next) return findHead(message.next);\n  if (\"current\" in message) return message;\n  return null;\n};\n\n/**\n * A utility class for caching computed values and invalidating the cache when needed.\n */\nclass CachedValue<T> {\n  private _value: T | null = null;\n\n  /**\n   * @param func - The function that computes the cached value\n   */\n  constructor(private func: () => T) {}\n\n  /**\n   * Gets the cached value, computing it if necessary.\n   */\n  get value() {\n    if (this._value === null) {\n      this._value = this.func();\n    }\n    return this._value;\n  }\n\n  /**\n   * Invalidates the cache, forcing recomputation on next access.\n   */\n  dirty() {\n    this._value = null;\n  }\n}\n\n/**\n * A repository that manages a tree of messages with branching capabilities.\n * Supports operations like adding, updating, and deleting messages, as well as\n * managing multiple conversation branches.\n */\nexport class MessageRepository {\n  /** Map of message IDs to repository message objects */\n  private messages = new Map<string, RepositoryMessage>();\n  /** Reference to the current head (most recent) message in the active branch */\n  private head: RepositoryMessage | null = null;\n  /** Root node of the tree structure */\n  private root: RepositoryParent = {\n    children: [],\n    next: null,\n  };\n\n  /**\n   * Recursively updates the level of a message and all its descendants.\n   *\n   * @param message - The message to update\n   * @param newLevel - The new level for the message\n   */\n  private updateLevels(message: RepositoryMessage, newLevel: number) {\n    message.level = newLevel;\n    for (const childId of message.children) {\n      const childMessage = this.messages.get(childId);\n      if (childMessage) {\n        this.updateLevels(childMessage, newLevel + 1);\n      }\n    }\n  }\n\n  /**\n   * Performs link/unlink operations between messages in the tree.\n   *\n   * @param newParent - The new parent message, or null\n   * @param child - The child message to operate on\n   * @param operation - The type of operation to perform:\n   *   - \"cut\": Remove the child from its current parent\n   *   - \"link\": Add the child to a new parent\n   *   - \"relink\": Both cut and link operations\n   */\n  private performOp(\n    newParent: RepositoryMessage | null,\n    child: RepositoryMessage,\n    operation: \"cut\" | \"link\" | \"relink\",\n  ) {\n    const parentOrRoot = child.prev ?? this.root;\n    const newParentOrRoot = newParent ?? this.root;\n\n    if (operation === \"relink\" && parentOrRoot === newParentOrRoot) return;\n\n    // cut\n    if (operation !== \"link\") {\n      // remove from parentOrRoot.children\n      parentOrRoot.children = parentOrRoot.children.filter(\n        (m) => m !== child.current.id,\n      );\n\n      // update parentOrRoot.next\n      if (parentOrRoot.next === child) {\n        const fallbackId = parentOrRoot.children.at(-1);\n        const fallback = fallbackId ? this.messages.get(fallbackId) : null;\n        if (fallback === undefined) {\n          throw new Error(\n            \"MessageRepository(performOp/cut): Fallback sibling message not found. This is likely an internal bug in assistant-ui.\",\n          );\n        }\n        parentOrRoot.next = fallback;\n      }\n    }\n\n    // link\n    if (operation !== \"cut\") {\n      // ensure the child is not part of parent tree\n      for (\n        let current: RepositoryMessage | null = newParent;\n        current;\n        current = current.prev\n      ) {\n        if (current.current.id === child.current.id) {\n          throw new Error(\n            \"MessageRepository(performOp/link): A message with the same id already exists in the parent tree. This error occurs if the same message id is found multiple times. This is likely an internal bug in assistant-ui.\",\n          );\n        }\n      }\n\n      // add to parentOrRoot.children\n      newParentOrRoot.children = [\n        ...newParentOrRoot.children,\n        child.current.id,\n      ];\n\n      // update parentOrRoot.next\n      if (findHead(child) === this.head || newParentOrRoot.next === null) {\n        newParentOrRoot.next = child;\n      }\n\n      child.prev = newParent;\n\n      // update levels when linking/relinking to a new parent\n      const newLevel = newParent ? newParent.level + 1 : 0;\n      this.updateLevels(child, newLevel);\n    }\n  }\n\n  /** Cached array of messages in the current active branch, from root to head */\n  private _messages = new CachedValue<readonly ThreadMessage[]>(() => {\n    const messages = new Array<ThreadMessage>((this.head?.level ?? -1) + 1);\n    for (let current = this.head; current; current = current.prev) {\n      messages[current.level] = current.current;\n    }\n    return messages;\n  });\n\n  /**\n   * Gets the ID of the current head message.\n   * @returns The ID of the head message, or null if no messages exist\n   */\n  get headId() {\n    return this.head?.current.id ?? null;\n  }\n\n  /**\n   * Gets all messages in the current active branch, from root to head.\n   * @param headId - Optional ID of the head message to get messages for. If not provided, uses the current head.\n   * @returns Array of messages in the specified branch\n   */\n  getMessages(headId?: string) {\n    if (headId === undefined || headId === this.head?.current.id) {\n      return this._messages.value;\n    }\n\n    const headMessage = this.messages.get(headId);\n    if (!headMessage) {\n      throw new Error(\n        \"MessageRepository(getMessages): Head message not found. This is likely an internal bug in assistant-ui.\",\n      );\n    }\n\n    const messages = new Array<ThreadMessage>(headMessage.level + 1);\n    for (\n      let current: RepositoryMessage | null = headMessage;\n      current;\n      current = current.prev\n    ) {\n      messages[current.level] = current.current;\n    }\n    return messages;\n  }\n\n  /**\n   * Adds a new message or updates an existing one in the repository.\n   * If the message ID already exists, the message is updated and potentially relinked to a new parent.\n   * If the message is new, it's added as a child of the specified parent.\n   *\n   * @param parentId - ID of the parent message, or null for root messages\n   * @param message - The message to add or update\n   * @throws Error if the parent message is not found\n   */\n  addOrUpdateMessage(parentId: string | null, message: ThreadMessage) {\n    const existingItem = this.messages.get(message.id);\n    const prev = parentId ? this.messages.get(parentId) : null;\n    if (prev === undefined)\n      throw new Error(\n        \"MessageRepository(addOrUpdateMessage): Parent message not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    // update existing message\n    if (existingItem) {\n      existingItem.current = message;\n      this.performOp(prev, existingItem, \"relink\");\n      this._messages.dirty();\n      return;\n    }\n\n    // create a new message\n    const newItem: RepositoryMessage = {\n      prev,\n      current: message,\n      next: null,\n      children: [],\n      level: prev ? prev.level + 1 : 0,\n    };\n\n    this.messages.set(message.id, newItem);\n    this.performOp(prev, newItem, \"link\");\n\n    if (this.head === prev) {\n      this.head = newItem;\n    }\n\n    this._messages.dirty();\n  }\n\n  /**\n   * Gets a message and its parent ID by message ID.\n   *\n   * @param messageId - ID of the message to retrieve\n   * @returns Object containing the message and its parent ID\n   * @throws Error if the message is not found\n   */\n  getMessage(messageId: string) {\n    const message = this.messages.get(messageId);\n    if (!message)\n      throw new Error(\n        \"MessageRepository(updateMessage): Message not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    return {\n      parentId: message.prev?.current.id ?? null,\n      message: message.current,\n      index: message.level,\n    };\n  }\n\n  /**\n   * Adds an optimistic message to the repository.\n   * An optimistic message is a temporary placeholder that will be replaced by a real message later.\n   *\n   * @param parentId - ID of the parent message, or null for root messages\n   * @param message - The core message to convert to an optimistic message\n   * @returns The generated optimistic ID\n   */\n  appendOptimisticMessage(parentId: string | null, message: ThreadMessageLike) {\n    let optimisticId: string;\n    do {\n      optimisticId = generateOptimisticId();\n    } while (this.messages.has(optimisticId));\n\n    this.addOrUpdateMessage(\n      parentId,\n      fromThreadMessageLike(message, optimisticId, { type: \"running\" }),\n    );\n\n    return optimisticId;\n  }\n\n  /**\n   * Deletes a message from the repository and relinks its children.\n   *\n   * @param messageId - ID of the message to delete\n   * @param replacementId - Optional ID of the message to become the new parent of the children,\n   *                       undefined means use the deleted message's parent,\n   *                       null means use the root\n   * @throws Error if the message or replacement is not found\n   */\n  deleteMessage(messageId: string, replacementId?: string | null | undefined) {\n    const message = this.messages.get(messageId);\n\n    if (!message)\n      throw new Error(\n        \"MessageRepository(deleteMessage): Message not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    const replacement =\n      replacementId === undefined\n        ? message.prev // if no replacementId is provided, use the parent\n        : replacementId === null\n          ? null\n          : this.messages.get(replacementId);\n    if (replacement === undefined)\n      throw new Error(\n        \"MessageRepository(deleteMessage): Replacement not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    for (const child of message.children) {\n      const childMessage = this.messages.get(child);\n      if (!childMessage)\n        throw new Error(\n          \"MessageRepository(deleteMessage): Child message not found. This is likely an internal bug in assistant-ui.\",\n        );\n      this.performOp(replacement, childMessage, \"relink\");\n    }\n\n    this.performOp(null, message, \"cut\");\n    this.messages.delete(messageId);\n\n    if (this.head === message) {\n      this.head = findHead(replacement ?? this.root);\n    }\n\n    this._messages.dirty();\n  }\n\n  /**\n   * Gets all branch IDs (sibling messages) at the level of a specified message.\n   *\n   * @param messageId - ID of the message to find branches for\n   * @returns Array of message IDs representing branches\n   * @throws Error if the message is not found\n   */\n  getBranches(messageId: string) {\n    const message = this.messages.get(messageId);\n    if (!message)\n      throw new Error(\n        \"MessageRepository(getBranches): Message not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    const { children } = message.prev ?? this.root;\n    return children;\n  }\n\n  /**\n   * Switches the active branch to the one containing the specified message.\n   *\n   * @param messageId - ID of the message in the branch to switch to\n   * @throws Error if the branch is not found\n   */\n  switchToBranch(messageId: string) {\n    const message = this.messages.get(messageId);\n    if (!message)\n      throw new Error(\n        \"MessageRepository(switchToBranch): Branch not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    const prevOrRoot = message.prev ?? this.root;\n    prevOrRoot.next = message;\n\n    this.head = findHead(message);\n\n    this._messages.dirty();\n  }\n\n  /**\n   * Resets the head to a specific message or null.\n   *\n   * @param messageId - ID of the message to set as head, or null to clear the head\n   * @throws Error if the message is not found\n   */\n  resetHead(messageId: string | null) {\n    if (messageId === null) {\n      this.clear();\n      return;\n    }\n\n    const message = this.messages.get(messageId);\n    if (!message)\n      throw new Error(\n        \"MessageRepository(resetHead): Branch not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    if (message.children.length > 0) {\n      const deleteDescendants = (msg: RepositoryMessage) => {\n        for (const childId of msg.children) {\n          const childMessage = this.messages.get(childId);\n          if (childMessage) {\n            deleteDescendants(childMessage);\n            this.messages.delete(childId);\n          }\n        }\n      };\n      deleteDescendants(message);\n\n      message.children = [];\n      message.next = null;\n    }\n\n    this.head = message;\n    for (\n      let current: RepositoryMessage | null = message;\n      current;\n      current = current.prev\n    ) {\n      if (current.prev) {\n        current.prev.next = current;\n      }\n    }\n\n    this._messages.dirty();\n  }\n\n  /**\n   * Clears all messages from the repository.\n   */\n  clear(): void {\n    this.messages.clear();\n    this.head = null;\n    this.root = {\n      children: [],\n      next: null,\n    };\n    this._messages.dirty();\n  }\n\n  /**\n   * Exports the repository state for persistence.\n   *\n   * @returns Exportable repository state\n   */\n  export(): ExportedMessageRepository {\n    const exportItems: ExportedMessageRepository[\"messages\"] = [];\n\n    // hint: we are relying on the insertion order of the messages\n    // this is important for the import function to properly link the messages\n    for (const [, message] of this.messages) {\n      exportItems.push({\n        message: message.current,\n        parentId: message.prev?.current.id ?? null,\n      });\n    }\n\n    return {\n      headId: this.head?.current.id ?? null,\n      messages: exportItems,\n    };\n  }\n\n  /**\n   * Imports repository state from an exported repository.\n   *\n   * @param repository - The exported repository state to import\n   */\n  import({ headId, messages }: ExportedMessageRepository) {\n    for (const { message, parentId } of messages) {\n      this.addOrUpdateMessage(parentId, message);\n    }\n\n    // switch to the saved head id if it is not the most recent message\n    this.resetHead(headId ?? messages.at(-1)?.message.id ?? null);\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4929, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime/AssistantRuntime.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime/AssistantRuntime.ts"],"sourcesContent":["import { AssistantRuntimeCore } from \"../runtime-cores/core/AssistantRuntimeCore\";\nimport { ModelContextProvider } from \"../../model-context/ModelContextTypes\";\nimport { ThreadRuntime } from \"./ThreadRuntime\";\nimport { Unsubscribe } from \"../../types\";\nimport { ThreadListRuntime, ThreadListRuntimeImpl } from \"./ThreadListRuntime\";\nimport { ExportedMessageRepository, ThreadMessageLike } from \"../runtime-cores\";\n\nexport type AssistantRuntime = {\n  /**\n   * The threads in this assistant.\n   */\n  readonly threads: ThreadListRuntime;\n\n  /**\n   * The currently selected main thread. Equivalent to `threads.main`.\n   */\n  readonly thread: ThreadRuntime;\n\n  /**\n   * @deprecated This field was renamed to `threads`.\n   */\n  readonly threadList: ThreadListRuntime;\n\n  /**\n   * Switch to a new thread.\n   *\n   * @deprecated This method was moved to `threads.switchToNewThread`.\n   */\n  switchToNewThread(): void;\n\n  /**\n   * Switch to a thread.\n   *\n   * @param threadId The thread ID to switch to.\n   * @deprecated This method was moved to `threads.switchToThread`.\n   */\n  switchToThread(threadId: string): void;\n\n  /**\n   * Register a model context provider. Model context providers are configuration such as system message, temperature, etc. that are set in the frontend.\n   *\n   * @param provider The model context provider to register.\n   */\n  registerModelContextProvider(provider: ModelContextProvider): Unsubscribe;\n\n  /**\n   * @deprecated This method was renamed to `registerModelContextProvider`.\n   */\n  registerModelConfigProvider(provider: ModelContextProvider): Unsubscribe;\n\n  /**\n   * @deprecated Use `runtime.thread.reset(initialMessages)`.\n   */\n  reset: unknown; // make it a type error\n};\n\nexport class AssistantRuntimeImpl implements AssistantRuntime {\n  public readonly threads;\n  public get threadList() {\n    return this.threads;\n  }\n\n  public readonly _thread: ThreadRuntime;\n\n  public constructor(private readonly _core: AssistantRuntimeCore) {\n    this.threads = new ThreadListRuntimeImpl(_core.threads);\n    this._thread = this.threads.main;\n\n    this.__internal_bindMethods();\n  }\n\n  protected __internal_bindMethods() {\n    this.switchToNewThread = this.switchToNewThread.bind(this);\n    this.switchToThread = this.switchToThread.bind(this);\n    this.registerModelContextProvider =\n      this.registerModelContextProvider.bind(this);\n    this.registerModelConfigProvider =\n      this.registerModelConfigProvider.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n\n  public get thread() {\n    return this._thread;\n  }\n\n  public switchToNewThread() {\n    return this._core.threads.switchToNewThread();\n  }\n\n  public switchToThread(threadId: string) {\n    return this._core.threads.switchToThread(threadId);\n  }\n\n  public registerModelContextProvider(provider: ModelContextProvider) {\n    return this._core.registerModelContextProvider(provider);\n  }\n\n  public registerModelConfigProvider(provider: ModelContextProvider) {\n    return this.registerModelContextProvider(provider);\n  }\n\n  public reset({\n    initialMessages,\n  }: {\n    initialMessages?: ThreadMessageLike[];\n  } = {}) {\n    return this._core.threads\n      .getMainThreadRuntimeCore()\n      .import(ExportedMessageRepository.fromArray(initialMessages ?? []));\n  }\n}\n"],"names":[],"mappings":";;;;AAIA,OAAO,EAAqB,qBAAqB,EAAE,+BAA4B;AAC/E,OAAO,EAAE,yBAAyB,EAAqB,kCAAyB;;;AAmD1E,MAAO,oBAAoB;IAQK,MAAA;IAPpB,OAAO,CAAC;IACxB,IAAW,UAAU,GAAA;QACnB,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IAEe,OAAO,CAAgB;IAEvC,YAAoC,KAA2B,CAAA;QAA3B,IAAA,CAAA,KAAK,GAAL,KAAK,CAAsB;QAC7D,IAAI,CAAC,OAAO,GAAG,IAAI,mOAAqB,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACxD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;QAEjC,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAChC,CAAC;IAES,sBAAsB,GAAA;QAC9B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3D,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrD,IAAI,CAAC,4BAA4B,GAC/B,IAAI,CAAC,4BAA4B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,CAAC,2BAA2B,GAC9B,IAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC9C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACrC,CAAC;IAED,IAAW,MAAM,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IAEM,iBAAiB,GAAA;QACtB,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC;IAChD,CAAC;IAEM,cAAc,CAAC,QAAgB,EAAA;QACpC,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;IACrD,CAAC;IAEM,4BAA4B,CAAC,QAA8B,EAAA;QAChE,OAAO,IAAI,CAAC,KAAK,CAAC,4BAA4B,CAAC,QAAQ,CAAC,CAAC;IAC3D,CAAC;IAEM,2BAA2B,CAAC,QAA8B,EAAA;QAC/D,OAAO,IAAI,CAAC,4BAA4B,CAAC,QAAQ,CAAC,CAAC;IACrD,CAAC;IAEM,KAAK,CAAC,EACX,eAAe,EAAA,GAGb,CAAA,CAAE,EAAA;QACJ,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CACtB,wBAAwB,EAAE,CAC1B,MAAM,CAAC,yPAAyB,CAAC,SAAS,CAAC,eAAe,IAAI,EAAE,CAAC,CAAC,CAAC;IACxE,CAAC;CACF"}},
    {"offset": {"line": 4980, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/remote-thread-list/useRemoteThreadListRuntime.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/useRemoteThreadListRuntime.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useMemo } from \"react\";\nimport { BaseAssistantRuntimeCore } from \"../core/BaseAssistantRuntimeCore\";\nimport { RemoteThreadListThreadListRuntimeCore } from \"./RemoteThreadListThreadListRuntimeCore\";\nimport { RemoteThreadListOptions } from \"./types\";\nimport { AssistantRuntimeImpl } from \"../../../internal\";\nimport { AssistantRuntimeCore } from \"../core/AssistantRuntimeCore\";\nimport { AssistantRuntime } from \"../../runtime/AssistantRuntime\";\nimport { useAui } from \"@assistant-ui/store\";\n\nclass RemoteThreadListRuntimeCore\n  extends BaseAssistantRuntimeCore\n  implements AssistantRuntimeCore\n{\n  public readonly threads;\n\n  constructor(options: RemoteThreadListOptions) {\n    super();\n    this.threads = new RemoteThreadListThreadListRuntimeCore(\n      options,\n      this._contextProvider,\n    );\n  }\n\n  public get RenderComponent() {\n    return this.threads.__internal_RenderComponent;\n  }\n}\n\nconst useRemoteThreadListRuntimeImpl = (\n  options: RemoteThreadListOptions,\n): AssistantRuntime => {\n  const [runtime] = useState(() => new RemoteThreadListRuntimeCore(options));\n  useEffect(() => {\n    runtime.threads.__internal_setOptions(options);\n    runtime.threads.__internal_load();\n  }, [runtime, options]);\n  return useMemo(() => new AssistantRuntimeImpl(runtime), [runtime]);\n};\n\nexport const useRemoteThreadListRuntime = (\n  options: RemoteThreadListOptions,\n): AssistantRuntime => {\n  const aui = useAui();\n  const isNested = aui.threadListItem.source !== null;\n\n  if (isNested) {\n    if (!options.allowNesting) {\n      throw new Error(\n        \"useRemoteThreadListRuntime cannot be nested inside another RemoteThreadListRuntime. \" +\n          \"Set allowNesting: true to allow nesting (the inner runtime will become a no-op).\",\n      );\n    }\n\n    // If allowNesting is true and already inside a thread list context,\n    // just call the runtimeHook directly (no-op behavior)\n    return options.runtimeHook();\n  }\n\n  return useRemoteThreadListRuntimeImpl(options);\n};\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,OAAO,EAAE,MAAM,OAAO,CAAC;AACrD,OAAO,EAAE,wBAAwB,EAAE,4CAAyC;AAC5E,OAAO,EAAE,qCAAqC,EAAE,mDAAgD;AAEhG,OAAO,EAAE,oBAAoB,EAAE,6BAA0B;AAGzD,OAAO,EAAE,MAAM,EAAE,MAAM,qBAAqB,CAAC;AAT7C,YAAY,CAAC;;;;;;AAWb,MAAM,2BACJ,SAAQ,8PAAwB;IAGhB,OAAO,CAAC;IAExB,YAAY,OAAgC,CAAA;QAC1C,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,OAAO,GAAG,IAAI,4SAAqC,CACtD,OAAO,EACP,IAAI,CAAC,gBAAgB,CACtB,CAAC;IACJ,CAAC;IAED,IAAW,eAAe,GAAA;QACxB,OAAO,IAAI,CAAC,OAAO,CAAC,0BAA0B,CAAC;IACjD,CAAC;CACF;AAED,MAAM,8BAA8B,GAAG,CACrC,OAAgC,EACd,EAAE;IACpB,MAAM,CAAC,OAAO,CAAC,OAAG,yKAAQ;mDAAC,GAAG,CAAG,CAAD,GAAK,2BAA2B,CAAC,OAAO,CAAC,CAAC,CAAC;;IAC3E,8KAAS;oDAAC,GAAG,EAAE;YACb,OAAO,CAAC,OAAO,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC;YAC/C,OAAO,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;QACpC,CAAC;mDAAE;QAAC,OAAO;QAAE,OAAO;KAAC,CAAC,CAAC;IACvB,WAAO,wKAAO;kDAAC,GAAG,CAAG,CAAD,GAAK,iOAAoB,CAAC,OAAO,CAAC;iDAAE;QAAC,OAAO;KAAC,CAAC,CAAC;AACrE,CAAC,CAAC;AAEK,MAAM,0BAA0B,GAAG,CACxC,OAAgC,EACd,EAAE;IACpB,MAAM,GAAG,OAAG,yKAAM,EAAE,CAAC;IACrB,MAAM,QAAQ,GAAG,GAAG,CAAC,cAAc,CAAC,MAAM,KAAK,IAAI,CAAC;IAEpD,IAAI,QAAQ,EAAE,CAAC;QACb,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC;YAC1B,MAAM,IAAI,KAAK,CACb,sFAAsF,GACpF,kFAAkF,CACrF,CAAC;QACJ,CAAC;QAED,oEAAoE;QACpE,sDAAsD;QACtD,OAAO,OAAO,CAAC,WAAW,EAAE,CAAC;IAC/B,CAAC;IAED,OAAO,8BAA8B,CAAC,OAAO,CAAC,CAAC;AACjD,CAAC,CAAC"}},
    {"offset": {"line": 5050, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/external-store/ExternalStoreThreadListRuntimeCore.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/ExternalStoreThreadListRuntimeCore.tsx"],"sourcesContent":["import type { Unsubscribe } from \"../../../types\";\nimport { ExternalStoreThreadRuntimeCore } from \"./ExternalStoreThreadRuntimeCore\";\nimport {\n  ThreadListItemCoreState,\n  ThreadListRuntimeCore,\n} from \"../core/ThreadListRuntimeCore\";\nimport { ExternalStoreThreadListAdapter } from \"./ExternalStoreAdapter\";\n\nexport type ExternalStoreThreadFactory = () => ExternalStoreThreadRuntimeCore;\n\nconst EMPTY_ARRAY = Object.freeze([]);\nconst DEFAULT_THREAD_ID = \"DEFAULT_THREAD_ID\";\nconst DEFAULT_THREADS = Object.freeze([DEFAULT_THREAD_ID]);\nconst DEFAULT_THREAD = Object.freeze({\n  id: DEFAULT_THREAD_ID,\n  remoteId: undefined,\n  externalId: undefined,\n  status: \"regular\",\n});\nconst RESOLVED_PROMISE = Promise.resolve();\nconst DEFAULT_THREAD_DATA = Object.freeze({\n  [DEFAULT_THREAD_ID]: DEFAULT_THREAD,\n});\n\nexport class ExternalStoreThreadListRuntimeCore\n  implements ThreadListRuntimeCore\n{\n  private _mainThreadId: string = DEFAULT_THREAD_ID;\n  private _threads: readonly string[] = DEFAULT_THREADS;\n  private _archivedThreads: readonly string[] = EMPTY_ARRAY;\n  private _threadData: Readonly<Record<string, ThreadListItemCoreState>> =\n    DEFAULT_THREAD_DATA;\n\n  public get isLoading() {\n    return this.adapter.isLoading ?? false;\n  }\n\n  public get newThreadId() {\n    return undefined;\n  }\n\n  public get threadIds() {\n    return this._threads;\n  }\n\n  public get archivedThreadIds() {\n    return this._archivedThreads;\n  }\n\n  public get threadItems() {\n    return this._threadData;\n  }\n\n  public getLoadThreadsPromise() {\n    return RESOLVED_PROMISE;\n  }\n\n  private _mainThread: ExternalStoreThreadRuntimeCore;\n\n  public get mainThreadId() {\n    return this._mainThreadId;\n  }\n\n  constructor(\n    private adapter: ExternalStoreThreadListAdapter = {},\n    private threadFactory: ExternalStoreThreadFactory,\n  ) {\n    this._mainThread = this.threadFactory();\n    this.__internal_setAdapter(adapter, true);\n  }\n\n  public getMainThreadRuntimeCore() {\n    return this._mainThread;\n  }\n\n  public getThreadRuntimeCore(): never {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  public getItemById(threadId: string) {\n    for (const thread of this.adapter.threads ?? []) {\n      if (thread.id === threadId) return thread as any;\n    }\n    for (const thread of this.adapter.archivedThreads ?? []) {\n      if (thread.id === threadId) return thread as any;\n    }\n    if (threadId === DEFAULT_THREAD_ID) return DEFAULT_THREAD;\n    return undefined;\n  }\n\n  public __internal_setAdapter(\n    adapter: ExternalStoreThreadListAdapter,\n    initialLoad = false,\n  ) {\n    const previousAdapter = this.adapter;\n    this.adapter = adapter;\n\n    const newThreadId = adapter.threadId ?? DEFAULT_THREAD_ID;\n    const newThreads = adapter.threads ?? EMPTY_ARRAY;\n    const newArchivedThreads = adapter.archivedThreads ?? EMPTY_ARRAY;\n\n    const previousThreadId = previousAdapter.threadId ?? DEFAULT_THREAD_ID;\n    const previousThreads = previousAdapter.threads ?? EMPTY_ARRAY;\n    const previousArchivedThreads =\n      previousAdapter.archivedThreads ?? EMPTY_ARRAY;\n\n    if (\n      !initialLoad &&\n      previousThreadId === newThreadId &&\n      previousThreads === newThreads &&\n      previousArchivedThreads === newArchivedThreads\n    ) {\n      return;\n    }\n\n    this._threadData = {\n      ...DEFAULT_THREAD_DATA,\n      ...Object.fromEntries(\n        adapter.threads?.map((t) => [\n          t.id,\n          {\n            ...t,\n            remoteId: t.remoteId,\n            externalId: t.externalId,\n            status: \"regular\",\n          },\n        ]) ?? [],\n      ),\n      ...Object.fromEntries(\n        adapter.archivedThreads?.map((t) => [\n          t.id,\n          {\n            ...t,\n            remoteId: t.remoteId,\n            externalId: t.externalId,\n            status: \"archived\",\n          },\n        ]) ?? [],\n      ),\n    };\n\n    if (previousThreads !== newThreads) {\n      this._threads = this.adapter.threads?.map((t) => t.id) ?? EMPTY_ARRAY;\n    }\n\n    if (previousArchivedThreads !== newArchivedThreads) {\n      this._archivedThreads =\n        this.adapter.archivedThreads?.map((t) => t.id) ?? EMPTY_ARRAY;\n    }\n\n    if (previousThreadId !== newThreadId) {\n      this._mainThreadId = newThreadId;\n      this._mainThread = this.threadFactory();\n    }\n\n    this._notifySubscribers();\n  }\n\n  public async switchToThread(threadId: string): Promise<void> {\n    if (this._mainThreadId === threadId) return;\n    const onSwitchToThread = this.adapter.onSwitchToThread;\n    if (!onSwitchToThread)\n      throw new Error(\n        \"External store adapter does not support switching to thread\",\n      );\n    onSwitchToThread(threadId);\n  }\n\n  public async switchToNewThread(): Promise<void> {\n    const onSwitchToNewThread = this.adapter.onSwitchToNewThread;\n    if (!onSwitchToNewThread)\n      throw new Error(\n        \"External store adapter does not support switching to new thread\",\n      );\n\n    onSwitchToNewThread();\n  }\n\n  public async rename(threadId: string, newTitle: string): Promise<void> {\n    const onRename = this.adapter.onRename;\n    if (!onRename)\n      throw new Error(\"External store adapter does not support renaming\");\n\n    onRename(threadId, newTitle);\n  }\n\n  public async detach(): Promise<void> {\n    // no-op\n  }\n\n  public async archive(threadId: string): Promise<void> {\n    const onArchive = this.adapter.onArchive;\n    if (!onArchive)\n      throw new Error(\"External store adapter does not support archiving\");\n\n    onArchive(threadId);\n  }\n\n  public async unarchive(threadId: string): Promise<void> {\n    const onUnarchive = this.adapter.onUnarchive;\n    if (!onUnarchive)\n      throw new Error(\"External store adapter does not support unarchiving\");\n\n    onUnarchive(threadId);\n  }\n\n  public async delete(threadId: string): Promise<void> {\n    const onDelete = this.adapter.onDelete;\n    if (!onDelete)\n      throw new Error(\"External store adapter does not support deleting\");\n\n    onDelete(threadId);\n  }\n\n  public initialize(\n    threadId: string,\n  ): Promise<{ remoteId: string; externalId: string | undefined }> {\n    return Promise.resolve({ remoteId: threadId, externalId: undefined });\n  }\n\n  public generateTitle(): never {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  private _subscriptions = new Set<() => void>();\n\n  public subscribe(callback: () => void): Unsubscribe {\n    this._subscriptions.add(callback);\n    return () => this._subscriptions.delete(callback);\n  }\n\n  private _notifySubscribers() {\n    for (const callback of this._subscriptions) callback();\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5221, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/external-store/ThreadMessageConverter.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/ThreadMessageConverter.ts"],"sourcesContent":["import { ThreadMessage } from \"../../../types\";\n\nexport type ConverterCallback<TIn> = (\n  cache: ThreadMessage | undefined,\n  message: TIn,\n  idx: number,\n) => ThreadMessage;\n\nexport class ThreadMessageConverter {\n  private readonly cache = new WeakMap<WeakKey, ThreadMessage>();\n\n  convertMessages<TIn extends WeakKey>(\n    messages: readonly TIn[],\n    converter: ConverterCallback<TIn>,\n  ): ThreadMessage[] {\n    return messages.map((m, idx) => {\n      const cached = this.cache.get(m);\n      const newMessage = converter(cached, m, idx);\n      this.cache.set(m, newMessage);\n      return newMessage;\n    });\n  }\n}\n"],"names":[],"mappings":";;;;AAQM,MAAO,sBAAsB;IAChB,KAAK,GAAG,IAAI,OAAO,EAA0B,CAAC;IAE/D,eAAe,CACb,QAAwB,EACxB,SAAiC,EAAA;QAEjC,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,EAAE;YAC7B,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACjC,MAAM,UAAU,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;YAC7C,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC;YAC9B,OAAO,UAAU,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;CACF"}},
    {"offset": {"line": 5240, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/composer/BaseComposerRuntimeCore.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/composer/BaseComposerRuntimeCore.tsx"],"sourcesContent":["import type {\n  Attachment,\n  CompleteAttachment,\n  PendingAttachment,\n} from \"../../../types/AttachmentTypes\";\nimport type { AppendMessage, Unsubscribe } from \"../../../types\";\nimport type { AttachmentAdapter } from \"../adapters/attachment\";\nimport type {\n  ComposerRuntimeCore,\n  ComposerRuntimeEventType,\n  DictationState,\n} from \"../core/ComposerRuntimeCore\";\nimport type { MessageRole, RunConfig } from \"../../../types/AssistantTypes\";\nimport type { QuoteInfo } from \"../../../types/QuoteTypes\";\nimport { BaseSubscribable } from \"../remote-thread-list/BaseSubscribable\";\nimport type { DictationAdapter } from \"../adapters/speech/SpeechAdapterTypes\";\n\nconst isAttachmentComplete = (a: Attachment): a is CompleteAttachment =>\n  a.status.type === \"complete\";\n\nexport abstract class BaseComposerRuntimeCore\n  extends BaseSubscribable\n  implements ComposerRuntimeCore\n{\n  public readonly isEditing = true;\n\n  protected abstract getAttachmentAdapter(): AttachmentAdapter | undefined;\n  protected abstract getDictationAdapter(): DictationAdapter | undefined;\n\n  public get attachmentAccept(): string {\n    return this.getAttachmentAdapter()?.accept ?? \"*\";\n  }\n\n  private _attachments: readonly Attachment[] = [];\n  public get attachments() {\n    return this._attachments;\n  }\n\n  protected setAttachments(value: readonly Attachment[]) {\n    this._attachments = value;\n    this._notifySubscribers();\n  }\n\n  public abstract get canCancel(): boolean;\n\n  public get isEmpty() {\n    return !this.text.trim() && !this.attachments.length;\n  }\n\n  private _text = \"\";\n\n  get text() {\n    return this._text;\n  }\n\n  private _role: MessageRole = \"user\";\n\n  get role() {\n    return this._role;\n  }\n\n  private _runConfig: RunConfig = {};\n\n  get runConfig() {\n    return this._runConfig;\n  }\n\n  private _quote: QuoteInfo | undefined = undefined;\n\n  get quote() {\n    return this._quote;\n  }\n\n  public setQuote(quote: QuoteInfo | undefined) {\n    if (this._quote === quote) return;\n\n    this._quote = quote;\n    this._notifySubscribers();\n  }\n\n  public setText(value: string) {\n    if (this._text === value) return;\n\n    this._text = value;\n    // When dictation is active and the user manually edits the composer text,\n    // treat the new text as the updated base so speech results are appended\n    // instead of overwriting manual edits.\n    if (this._dictation) {\n      this._dictationBaseText = value;\n      this._currentInterimText = \"\";\n      const { status, inputDisabled } = this._dictation;\n      this._dictation = inputDisabled ? { status, inputDisabled } : { status };\n    }\n    this._notifySubscribers();\n  }\n\n  public setRole(role: MessageRole) {\n    if (this._role === role) return;\n\n    this._role = role;\n    this._notifySubscribers();\n  }\n\n  public setRunConfig(runConfig: RunConfig) {\n    if (this._runConfig === runConfig) return;\n\n    this._runConfig = runConfig;\n    this._notifySubscribers();\n  }\n\n  private _emptyTextAndAttachments() {\n    this._attachments = [];\n    this._text = \"\";\n    this._notifySubscribers();\n  }\n\n  private async _onClearAttachments() {\n    const adapter = this.getAttachmentAdapter();\n    if (adapter) {\n      await Promise.all(this._attachments.map((a) => adapter.remove(a)));\n    }\n  }\n\n  public async reset() {\n    if (\n      this._attachments.length === 0 &&\n      this._text === \"\" &&\n      this._role === \"user\" &&\n      Object.keys(this._runConfig).length === 0 &&\n      this._quote === undefined\n    ) {\n      return;\n    }\n\n    this._role = \"user\";\n    this._runConfig = {};\n    this._quote = undefined;\n\n    const task = this._onClearAttachments();\n    this._emptyTextAndAttachments();\n    await task;\n  }\n\n  public async clearAttachments() {\n    const task = this._onClearAttachments();\n    this.setAttachments([]);\n\n    await task;\n  }\n\n  public async send() {\n    if (this._dictationSession) {\n      this._dictationSession.cancel();\n      this._cleanupDictation();\n    }\n\n    const adapter = this.getAttachmentAdapter();\n    const attachments =\n      adapter && this.attachments.length > 0\n        ? Promise.all(\n            this.attachments.map(async (a) => {\n              if (isAttachmentComplete(a)) return a;\n              const result = await adapter.send(a);\n              return result as CompleteAttachment;\n            }),\n          )\n        : [];\n\n    const text = this.text;\n    const quote = this._quote;\n    this._quote = undefined;\n    this._emptyTextAndAttachments();\n\n    const message: Omit<AppendMessage, \"parentId\" | \"sourceId\"> = {\n      createdAt: new Date(),\n      role: this.role,\n      content: text ? [{ type: \"text\", text }] : [],\n      attachments: await attachments,\n      runConfig: this.runConfig,\n      metadata: { custom: { ...(quote ? { quote } : {}) } },\n    };\n\n    this.handleSend(message);\n    this._notifyEventSubscribers(\"send\");\n  }\n\n  public cancel() {\n    this.handleCancel();\n  }\n\n  protected abstract handleSend(\n    message: Omit<AppendMessage, \"parentId\" | \"sourceId\">,\n  ): void;\n  protected abstract handleCancel(): void;\n\n  async addAttachment(file: File) {\n    const adapter = this.getAttachmentAdapter();\n    if (!adapter) throw new Error(\"Attachments are not supported\");\n\n    const upsertAttachment = (a: PendingAttachment) => {\n      const idx = this._attachments.findIndex(\n        (attachment) => attachment.id === a.id,\n      );\n      if (idx !== -1)\n        this._attachments = [\n          ...this._attachments.slice(0, idx),\n          a,\n          ...this._attachments.slice(idx + 1),\n        ];\n      else {\n        this._attachments = [...this._attachments, a];\n      }\n\n      this._notifySubscribers();\n    };\n\n    const promiseOrGenerator = adapter.add({ file });\n    if (Symbol.asyncIterator in promiseOrGenerator) {\n      for await (const r of promiseOrGenerator) {\n        upsertAttachment(r);\n      }\n    } else {\n      upsertAttachment(await promiseOrGenerator);\n    }\n\n    this._notifyEventSubscribers(\"attachmentAdd\");\n    this._notifySubscribers();\n  }\n\n  async removeAttachment(attachmentId: string) {\n    const adapter = this.getAttachmentAdapter();\n    if (!adapter) throw new Error(\"Attachments are not supported\");\n\n    const index = this._attachments.findIndex((a) => a.id === attachmentId);\n    if (index === -1) throw new Error(\"Attachment not found\");\n    const attachment = this._attachments[index]!;\n\n    await adapter.remove(attachment);\n\n    // this._attachments.toSpliced(index, 1); - not yet widely supported\n    this._attachments = [\n      ...this._attachments.slice(0, index),\n      ...this._attachments.slice(index + 1),\n    ];\n    this._notifySubscribers();\n  }\n\n  private _dictation: DictationState | undefined;\n  private _dictationSession: DictationAdapter.Session | undefined;\n  private _dictationUnsubscribes: Unsubscribe[] = [];\n  private _dictationBaseText = \"\";\n  private _currentInterimText = \"\";\n  private _dictationSessionIdCounter = 0;\n  private _activeDictationSessionId: number | undefined;\n  private _isCleaningDictation = false;\n\n  public get dictation(): DictationState | undefined {\n    return this._dictation;\n  }\n\n  private _isActiveSession(\n    sessionId: number,\n    session: DictationAdapter.Session,\n  ): boolean {\n    return (\n      this._activeDictationSessionId === sessionId &&\n      this._dictationSession === session\n    );\n  }\n\n  public startDictation(): void {\n    const adapter = this.getDictationAdapter();\n    if (!adapter) {\n      throw new Error(\"Dictation adapter not configured\");\n    }\n\n    if (this._dictationSession) {\n      for (const unsub of this._dictationUnsubscribes) {\n        unsub();\n      }\n      this._dictationUnsubscribes = [];\n      const oldSession = this._dictationSession;\n      oldSession.stop().catch(() => {});\n      this._dictationSession = undefined;\n    }\n\n    const inputDisabled = adapter.disableInputDuringDictation ?? false;\n\n    this._dictationBaseText = this._text;\n    this._currentInterimText = \"\";\n\n    const session = adapter.listen();\n    this._dictationSession = session;\n    const sessionId = ++this._dictationSessionIdCounter;\n    this._activeDictationSessionId = sessionId;\n    this._dictation = { status: session.status, inputDisabled };\n    this._notifySubscribers();\n\n    const unsubSpeech = session.onSpeech((result) => {\n      if (!this._isActiveSession(sessionId, session)) return;\n      const isFinal = result.isFinal !== false;\n\n      const needsSeparator =\n        this._dictationBaseText &&\n        !this._dictationBaseText.endsWith(\" \") &&\n        result.transcript;\n      const separator = needsSeparator ? \" \" : \"\";\n\n      if (isFinal) {\n        this._dictationBaseText =\n          this._dictationBaseText + separator + result.transcript;\n        this._currentInterimText = \"\";\n        this._text = this._dictationBaseText;\n\n        if (this._dictation) {\n          const { transcript: _, ...rest } = this._dictation;\n          this._dictation = rest;\n        }\n        this._notifySubscribers();\n      } else {\n        this._currentInterimText = separator + result.transcript;\n        this._text = this._dictationBaseText + this._currentInterimText;\n\n        if (this._dictation) {\n          this._dictation = {\n            ...this._dictation,\n            transcript: result.transcript,\n          };\n        }\n        this._notifySubscribers();\n      }\n    });\n    this._dictationUnsubscribes.push(unsubSpeech);\n\n    const unsubStart = session.onSpeechStart(() => {\n      if (!this._isActiveSession(sessionId, session)) return;\n\n      this._dictation = {\n        status: { type: \"running\" },\n        inputDisabled,\n        ...(this._dictation?.transcript && {\n          transcript: this._dictation.transcript,\n        }),\n      };\n      this._notifySubscribers();\n    });\n    this._dictationUnsubscribes.push(unsubStart);\n\n    const unsubEnd = session.onSpeechEnd(() => {\n      this._cleanupDictation({ sessionId });\n    });\n    this._dictationUnsubscribes.push(unsubEnd);\n\n    const statusInterval = setInterval(() => {\n      if (!this._isActiveSession(sessionId, session)) return;\n\n      if (session.status.type === \"ended\") {\n        this._cleanupDictation({ sessionId });\n      }\n    }, 100);\n    this._dictationUnsubscribes.push(() => clearInterval(statusInterval));\n  }\n\n  public stopDictation(): void {\n    if (!this._dictationSession) return;\n\n    const session = this._dictationSession;\n    const sessionId = this._activeDictationSessionId;\n    session.stop().finally(() => {\n      this._cleanupDictation({ sessionId });\n    });\n  }\n\n  private _cleanupDictation(options?: { sessionId: number | undefined }): void {\n    const isStaleSession =\n      options?.sessionId !== undefined &&\n      options.sessionId !== this._activeDictationSessionId;\n    if (isStaleSession || this._isCleaningDictation) return;\n\n    this._isCleaningDictation = true;\n    try {\n      for (const unsub of this._dictationUnsubscribes) {\n        unsub();\n      }\n      this._dictationUnsubscribes = [];\n      this._dictationSession = undefined;\n      this._activeDictationSessionId = undefined;\n      this._dictation = undefined;\n      this._dictationBaseText = \"\";\n      this._currentInterimText = \"\";\n      this._notifySubscribers();\n    } finally {\n      this._isCleaningDictation = false;\n    }\n  }\n\n  private _eventSubscribers = new Map<\n    ComposerRuntimeEventType,\n    Set<() => void>\n  >();\n\n  protected _notifyEventSubscribers(event: ComposerRuntimeEventType) {\n    const subscribers = this._eventSubscribers.get(event);\n    if (!subscribers) return;\n\n    for (const callback of subscribers) callback();\n  }\n\n  public unstable_on(event: ComposerRuntimeEventType, callback: () => void) {\n    const subscribers = this._eventSubscribers.get(event);\n    if (!subscribers) {\n      this._eventSubscribers.set(event, new Set([callback]));\n    } else {\n      subscribers.add(callback);\n    }\n\n    return () => {\n      const subscribers = this._eventSubscribers.get(event);\n      if (!subscribers) return;\n      subscribers.delete(callback);\n    };\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5577, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/composer/DefaultThreadComposerRuntimeCore.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/composer/DefaultThreadComposerRuntimeCore.tsx"],"sourcesContent":["import type { AppendMessage, PendingAttachment } from \"../../../types\";\nimport type { AttachmentAdapter } from \"../adapters/attachment\";\nimport type { DictationAdapter } from \"../adapters/speech/SpeechAdapterTypes\";\nimport type { ThreadComposerRuntimeCore } from \"../core/ComposerRuntimeCore\";\nimport type { ThreadRuntimeCore } from \"../core/ThreadRuntimeCore\";\nimport { BaseComposerRuntimeCore } from \"./BaseComposerRuntimeCore\";\n\nexport class DefaultThreadComposerRuntimeCore\n  extends BaseComposerRuntimeCore\n  implements ThreadComposerRuntimeCore\n{\n  private _canCancel = false;\n  public get canCancel() {\n    return this._canCancel;\n  }\n\n  public override get attachments(): readonly PendingAttachment[] {\n    return super.attachments as readonly PendingAttachment[];\n  }\n\n  protected getAttachmentAdapter() {\n    return this.runtime.adapters?.attachments;\n  }\n\n  protected getDictationAdapter() {\n    return this.runtime.adapters?.dictation;\n  }\n\n  constructor(\n    private runtime: Omit<ThreadRuntimeCore, \"composer\"> & {\n      adapters?:\n        | {\n            attachments?: AttachmentAdapter | undefined;\n            dictation?: DictationAdapter | undefined;\n          }\n        | undefined;\n    },\n  ) {\n    super();\n    this.connect();\n  }\n\n  public connect() {\n    return this.runtime.subscribe(() => {\n      if (this.canCancel !== this.runtime.capabilities.cancel) {\n        this._canCancel = this.runtime.capabilities.cancel;\n        this._notifySubscribers();\n      }\n    });\n  }\n\n  public async handleSend(\n    message: Omit<AppendMessage, \"parentId\" | \"sourceId\">,\n  ) {\n    this.runtime.append({\n      ...(message as AppendMessage),\n      parentId: this.runtime.messages.at(-1)?.id ?? null,\n      sourceId: null,\n    });\n  }\n\n  public async handleCancel() {\n    this.runtime.cancelRun();\n  }\n}\n"],"names":[],"mappings":";;;;AAKA,OAAO,EAAE,uBAAuB,EAAE,qCAAkC;;AAE9D,MAAO,gCACX,SAAQ,gQAAuB;IAqBrB,QAAA;IAlBF,UAAU,GAAG,KAAK,CAAC;IAC3B,IAAW,SAAS,GAAA;QAClB,OAAO,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;IAED,IAAoB,WAAW,GAAA;QAC7B,OAAO,KAAK,CAAC,WAA2C,CAAC;IAC3D,CAAC;IAES,oBAAoB,GAAA;QAC5B,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,WAAW,CAAC;IAC5C,CAAC;IAES,mBAAmB,GAAA;QAC3B,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,SAAS,CAAC;IAC1C,CAAC;IAED,YACU,OAOP,CAAA;QAED,KAAK,EAAE,CAAC;QATA,IAAA,CAAA,OAAO,GAAP,OAAO,CAOd;QAGD,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAEM,OAAO,GAAA;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE;YACjC,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;gBACxD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC;gBACnD,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5B,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,KAAK,CAAC,UAAU,CACrB,OAAqD,EAAA;QAErD,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;YAClB,GAAI,OAAyB;YAC7B,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,IAAI,IAAI;YAClD,QAAQ,EAAE,IAAI;SACf,CAAC,CAAC;IACL,CAAC;IAEM,KAAK,CAAC,YAAY,GAAA;QACvB,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;IAC3B,CAAC;CACF"}},
    {"offset": {"line": 5626, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/composer/DefaultEditComposerRuntimeCore.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/composer/DefaultEditComposerRuntimeCore.tsx"],"sourcesContent":["import type { AppendMessage, ThreadMessage } from \"../../../types\";\nimport { getThreadMessageText } from \"../../../utils/getThreadMessageText\";\nimport type { AttachmentAdapter } from \"../adapters/attachment\";\nimport type { DictationAdapter } from \"../adapters/speech/SpeechAdapterTypes\";\nimport type { ThreadRuntimeCore } from \"../core/ThreadRuntimeCore\";\nimport { BaseComposerRuntimeCore } from \"./BaseComposerRuntimeCore\";\n\nexport class DefaultEditComposerRuntimeCore extends BaseComposerRuntimeCore {\n  public get canCancel() {\n    return true;\n  }\n\n  protected getAttachmentAdapter() {\n    return this.runtime.adapters?.attachments;\n  }\n\n  protected getDictationAdapter() {\n    return this.runtime.adapters?.dictation;\n  }\n\n  private _nonTextParts;\n  private _previousText;\n  private _parentId;\n  private _sourceId;\n  constructor(\n    private runtime: ThreadRuntimeCore & {\n      adapters?:\n        | {\n            attachments?: AttachmentAdapter | undefined;\n            dictation?: DictationAdapter | undefined;\n          }\n        | undefined;\n    },\n    private endEditCallback: () => void,\n    { parentId, message }: { parentId: string | null; message: ThreadMessage },\n  ) {\n    super();\n    this._parentId = parentId;\n    this._sourceId = message.id;\n    this._previousText = getThreadMessageText(message);\n    this.setText(this._previousText);\n\n    this.setRole(message.role);\n    this.setAttachments(message.attachments ?? []);\n\n    this._nonTextParts = message.content.filter((part) => part.type !== \"text\");\n\n    // Use the runConfig from the regular (non-edit) composer as the initial runConfig for the edit composer\n    this.setRunConfig({ ...runtime.composer.runConfig });\n  }\n\n  public async handleSend(\n    message: Omit<AppendMessage, \"parentId\" | \"sourceId\">,\n  ) {\n    const text = getThreadMessageText(message as AppendMessage);\n    if (text !== this._previousText) {\n      this.runtime.append({\n        ...message,\n        content: [...message.content, ...this._nonTextParts] as any,\n        parentId: this._parentId,\n        sourceId: this._sourceId,\n      });\n    }\n\n    this.handleCancel();\n  }\n\n  public handleCancel() {\n    this.endEditCallback();\n    this._notifySubscribers();\n  }\n}\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,oBAAoB,EAAE,+CAA4C;AAI3E,OAAO,EAAE,uBAAuB,EAAE,qCAAkC;;;AAE9D,MAAO,8BAA+B,SAAQ,gQAAuB;IAkB/D,QAAA;IAQA,gBAAA;IAzBV,IAAW,SAAS,GAAA;QAClB,OAAO,IAAI,CAAC;IACd,CAAC;IAES,oBAAoB,GAAA;QAC5B,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,WAAW,CAAC;IAC5C,CAAC;IAES,mBAAmB,GAAA;QAC3B,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,SAAS,CAAC;IAC1C,CAAC;IAEO,aAAa,CAAC;IACd,aAAa,CAAC;IACd,SAAS,CAAC;IACV,SAAS,CAAC;IAClB,YACU,OAOP,EACO,eAA2B,EACnC,EAAE,QAAQ,EAAE,OAAO,EAAuD,CAAA;QAE1E,KAAK,EAAE,CAAC;QAXA,IAAA,CAAA,OAAO,GAAP,OAAO,CAOd;QACO,IAAA,CAAA,eAAe,GAAf,eAAe,CAAY;QAInC,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,EAAE,CAAC;QAC5B,IAAI,CAAC,aAAa,OAAG,8MAAoB,EAAC,OAAO,CAAC,CAAC;QACnD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAEjC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAC3B,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC;QAE/C,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,CAAG,CAAD,GAAK,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC;QAE5E,wGAAwG;QACxG,IAAI,CAAC,YAAY,CAAC;YAAE,GAAG,OAAO,CAAC,QAAQ,CAAC,SAAS;QAAA,CAAE,CAAC,CAAC;IACvD,CAAC;IAEM,KAAK,CAAC,UAAU,CACrB,OAAqD,EAAA;QAErD,MAAM,IAAI,OAAG,8MAAoB,EAAC,OAAwB,CAAC,CAAC;QAC5D,IAAI,IAAI,KAAK,IAAI,CAAC,aAAa,EAAE,CAAC;YAChC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;gBAClB,GAAG,OAAO;gBACV,OAAO,EAAE,CAAC;uBAAG,OAAO,CAAC,OAAO,EAAE;uBAAG,IAAI,CAAC,aAAa;iBAAQ;gBAC3D,QAAQ,EAAE,IAAI,CAAC,SAAS;gBACxB,QAAQ,EAAE,IAAI,CAAC,SAAS;aACzB,CAAC,CAAC;QACL,CAAC;QAED,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAEM,YAAY,GAAA;QACjB,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC5B,CAAC;CACF"}},
    {"offset": {"line": 5690, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/core/BaseThreadRuntimeCore.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/core/BaseThreadRuntimeCore.tsx"],"sourcesContent":["import type { AppendMessage, ThreadMessage, Unsubscribe } from \"../../../types\";\nimport {\n  ExportedMessageRepository,\n  MessageRepository,\n} from \"../utils/MessageRepository\";\nimport { DefaultThreadComposerRuntimeCore } from \"../composer/DefaultThreadComposerRuntimeCore\";\nimport {\n  AddToolResultOptions,\n  ResumeToolCallOptions,\n  ThreadSuggestion,\n  SubmitFeedbackOptions,\n  ThreadRuntimeCore,\n  SpeechState,\n  RuntimeCapabilities,\n  ThreadRuntimeEventType,\n  StartRunConfig,\n  ResumeRunConfig,\n} from \"./ThreadRuntimeCore\";\nimport { DefaultEditComposerRuntimeCore } from \"../composer/DefaultEditComposerRuntimeCore\";\nimport { SpeechSynthesisAdapter } from \"../adapters/speech/SpeechAdapterTypes\";\nimport { FeedbackAdapter } from \"../adapters/feedback/FeedbackAdapter\";\nimport { AttachmentAdapter } from \"../adapters/attachment\";\nimport { getThreadMessageText } from \"../../../utils/getThreadMessageText\";\nimport { ModelContextProvider } from \"../../../model-context\";\nimport { ThreadMessageLike } from \"../external-store\";\n\ntype BaseThreadAdapters = {\n  speech?: SpeechSynthesisAdapter | undefined;\n  feedback?: FeedbackAdapter | undefined;\n  attachments?: AttachmentAdapter | undefined;\n};\n\nexport abstract class BaseThreadRuntimeCore implements ThreadRuntimeCore {\n  private _subscriptions = new Set<() => void>();\n  private _isInitialized = false;\n\n  protected readonly repository = new MessageRepository();\n  public abstract get adapters(): BaseThreadAdapters | undefined;\n  public abstract get isDisabled(): boolean;\n  public abstract get isLoading(): boolean;\n  public abstract get suggestions(): readonly ThreadSuggestion[];\n  public abstract get extras(): unknown;\n\n  public abstract get capabilities(): RuntimeCapabilities;\n  public abstract append(message: AppendMessage): void;\n  public abstract startRun(config: StartRunConfig): void;\n  public abstract resumeRun(config: ResumeRunConfig): void;\n  public abstract addToolResult(options: AddToolResultOptions): void;\n  public abstract resumeToolCall(options: ResumeToolCallOptions): void;\n  public abstract cancelRun(): void;\n  public abstract exportExternalState(): any;\n  public abstract importExternalState(state: any): void;\n  public abstract unstable_loadExternalState(state: any): void;\n\n  public get messages() {\n    return this.repository.getMessages();\n  }\n\n  public get state() {\n    let mostRecentAssistantMessage;\n    for (const message of this.messages) {\n      if (message.role === \"assistant\") {\n        mostRecentAssistantMessage = message;\n        break;\n      }\n    }\n\n    return mostRecentAssistantMessage?.metadata.unstable_state ?? null;\n  }\n\n  public readonly composer = new DefaultThreadComposerRuntimeCore(this);\n\n  constructor(private readonly _contextProvider: ModelContextProvider) {}\n\n  public getModelContext() {\n    return this._contextProvider.getModelContext();\n  }\n\n  private _editComposers = new Map<string, DefaultEditComposerRuntimeCore>();\n  public getEditComposer(messageId: string) {\n    return this._editComposers.get(messageId);\n  }\n  public beginEdit(messageId: string) {\n    if (this._editComposers.has(messageId))\n      throw new Error(\"Edit already in progress\");\n\n    this._editComposers.set(\n      messageId,\n      new DefaultEditComposerRuntimeCore(\n        this,\n        () => this._editComposers.delete(messageId),\n        this.repository.getMessage(messageId),\n      ),\n    );\n    this._notifySubscribers();\n  }\n\n  public getMessageById(messageId: string) {\n    try {\n      return this.repository.getMessage(messageId);\n    } catch {\n      return undefined;\n    }\n  }\n\n  public getBranches(messageId: string): string[] {\n    return this.repository.getBranches(messageId);\n  }\n\n  public switchToBranch(branchId: string): void {\n    this.repository.switchToBranch(branchId);\n    this._notifySubscribers();\n  }\n\n  protected _notifySubscribers() {\n    for (const callback of this._subscriptions) callback();\n  }\n\n  public _notifyEventSubscribers(event: ThreadRuntimeEventType) {\n    const subscribers = this._eventSubscribers.get(event);\n    if (!subscribers) return;\n\n    for (const callback of subscribers) callback();\n  }\n\n  public subscribe(callback: () => void): Unsubscribe {\n    this._subscriptions.add(callback);\n    return () => this._subscriptions.delete(callback);\n  }\n\n  public submitFeedback({ messageId, type }: SubmitFeedbackOptions) {\n    const adapter = this.adapters?.feedback;\n    if (!adapter) throw new Error(\"Feedback adapter not configured\");\n\n    const { message, parentId } = this.repository.getMessage(messageId);\n    adapter.submit({ message, type });\n\n    // Update the message metadata with the feedback\n    if (message.role === \"assistant\") {\n      const updatedMessage: ThreadMessage = {\n        ...message,\n        metadata: {\n          ...message.metadata,\n          submittedFeedback: { type },\n        },\n      };\n      this.repository.addOrUpdateMessage(parentId, updatedMessage);\n    }\n\n    this._notifySubscribers();\n  }\n\n  private _stopSpeaking: Unsubscribe | undefined;\n  public speech: SpeechState | undefined;\n\n  public speak(messageId: string) {\n    const adapter = this.adapters?.speech;\n    if (!adapter) throw new Error(\"Speech adapter not configured\");\n\n    const { message } = this.repository.getMessage(messageId);\n\n    this._stopSpeaking?.();\n\n    const utterance = adapter.speak(getThreadMessageText(message));\n    const unsub = utterance.subscribe(() => {\n      if (utterance.status.type === \"ended\") {\n        this._stopSpeaking = undefined;\n        this.speech = undefined;\n      } else {\n        this.speech = { messageId, status: utterance.status };\n      }\n      this._notifySubscribers();\n    });\n\n    this.speech = { messageId, status: utterance.status };\n    this._notifySubscribers();\n\n    this._stopSpeaking = () => {\n      utterance.cancel();\n      unsub();\n      this.speech = undefined;\n      this._stopSpeaking = undefined;\n    };\n  }\n\n  public stopSpeaking() {\n    if (!this._stopSpeaking) throw new Error(\"No message is being spoken\");\n    this._stopSpeaking();\n    this._notifySubscribers();\n  }\n\n  protected ensureInitialized() {\n    if (!this._isInitialized) {\n      this._isInitialized = true;\n      this._notifyEventSubscribers(\"initialize\");\n    }\n  }\n\n  // TODO import()/export() on external store doesn't make much sense\n  public export() {\n    return this.repository.export();\n  }\n\n  public import(data: ExportedMessageRepository) {\n    this.ensureInitialized();\n    this.repository.clear();\n    this.repository.import(data);\n    this._notifySubscribers();\n  }\n\n  public reset(initialMessages?: readonly ThreadMessageLike[]) {\n    this.import(ExportedMessageRepository.fromArray(initialMessages ?? []));\n  }\n\n  private _eventSubscribers = new Map<\n    ThreadRuntimeEventType,\n    Set<() => void>\n  >();\n\n  public unstable_on(event: ThreadRuntimeEventType, callback: () => void) {\n    if (event === \"modelContextUpdate\") {\n      return this._contextProvider.subscribe?.(callback) ?? (() => {});\n    }\n\n    const subscribers = this._eventSubscribers.get(event);\n    if (!subscribers) {\n      this._eventSubscribers.set(event, new Set([callback]));\n    } else {\n      subscribers.add(callback);\n    }\n\n    return () => {\n      const subscribers = this._eventSubscribers.get(event)!;\n      subscribers.delete(callback);\n    };\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5864, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/external-store/ExternalStoreThreadRuntimeCore.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/ExternalStoreThreadRuntimeCore.tsx"],"sourcesContent":["import type {\n  AddToolResultOptions,\n  ResumeRunConfig,\n  ResumeToolCallOptions,\n  StartRunConfig,\n  ThreadSuggestion,\n} from \"../core/ThreadRuntimeCore\";\n\nimport type { AppendMessage, ThreadMessage } from \"../../../types\";\nimport type { ExternalStoreAdapter } from \"./ExternalStoreAdapter\";\nimport {\n  getExternalStoreMessage,\n  symbolInnerMessage,\n} from \"./getExternalStoreMessage\";\nimport { ThreadMessageConverter } from \"./ThreadMessageConverter\";\nimport { getAutoStatus, isAutoStatus } from \"./auto-status\";\nimport {\n  fromThreadMessageLike,\n  type ThreadMessageLike,\n} from \"./ThreadMessageLike\";\nimport { getThreadMessageText } from \"../../../utils/getThreadMessageText\";\nimport type {\n  RuntimeCapabilities,\n  ThreadRuntimeCore,\n} from \"../core/ThreadRuntimeCore\";\nimport { BaseThreadRuntimeCore } from \"../core/BaseThreadRuntimeCore\";\nimport type { ModelContextProvider } from \"../../../model-context\";\nimport {\n  ExportedMessageRepository,\n  MessageRepository,\n} from \"../utils/MessageRepository\";\n\nconst EMPTY_ARRAY = Object.freeze([]);\n\nexport const hasUpcomingMessage = (\n  isRunning: boolean,\n  messages: readonly ThreadMessage[],\n) => {\n  return isRunning && messages[messages.length - 1]?.role !== \"assistant\";\n};\n\nexport class ExternalStoreThreadRuntimeCore\n  extends BaseThreadRuntimeCore\n  implements ThreadRuntimeCore\n{\n  private _assistantOptimisticId: string | null = null;\n\n  private _capabilities: RuntimeCapabilities = {\n    switchToBranch: false,\n    switchBranchDuringRun: false,\n    edit: false,\n    reload: false,\n    cancel: false,\n    unstable_copy: false,\n    speech: false,\n    dictation: false,\n    attachments: false,\n    feedback: false,\n  };\n\n  public get capabilities() {\n    return this._capabilities;\n  }\n\n  private _messages!: readonly ThreadMessage[];\n  public isDisabled!: boolean;\n  public get isLoading() {\n    return this._store.isLoading ?? false;\n  }\n\n  public override get messages() {\n    return this._messages;\n  }\n\n  public override get state() {\n    return this._store.state ?? super.state;\n  }\n\n  public get adapters() {\n    return this._store.adapters;\n  }\n\n  public suggestions: readonly ThreadSuggestion[] = [];\n  public extras: unknown = undefined;\n\n  private _converter = new ThreadMessageConverter();\n\n  private _store!: ExternalStoreAdapter<any>;\n\n  public override beginEdit(messageId: string) {\n    if (!this._store.onEdit)\n      throw new Error(\"Runtime does not support editing.\");\n\n    super.beginEdit(messageId);\n  }\n\n  constructor(\n    contextProvider: ModelContextProvider,\n    store: ExternalStoreAdapter<any>,\n  ) {\n    super(contextProvider);\n    this.__internal_setAdapter(store);\n  }\n\n  public __internal_setAdapter(store: ExternalStoreAdapter<any>) {\n    if (this._store === store) return;\n\n    const isRunning = store.isRunning ?? false;\n    this.isDisabled = store.isDisabled ?? false;\n\n    const oldStore = this._store as ExternalStoreAdapter<any> | undefined;\n    this._store = store;\n    this.extras = store.extras;\n    this.suggestions = store.suggestions ?? EMPTY_ARRAY;\n    this._capabilities = {\n      switchToBranch: this._store.setMessages !== undefined,\n      switchBranchDuringRun: false, // External store never supports branch switching during run\n      edit: this._store.onEdit !== undefined,\n      reload: this._store.onReload !== undefined,\n      cancel: this._store.onCancel !== undefined,\n      speech: this._store.adapters?.speech !== undefined,\n      dictation: this._store.adapters?.dictation !== undefined,\n      unstable_copy: this._store.unstable_capabilities?.copy !== false, // default true\n      attachments: !!this._store.adapters?.attachments,\n      feedback: !!this._store.adapters?.feedback,\n    };\n\n    let messages: readonly ThreadMessage[];\n\n    if (store.messageRepository) {\n      // Handle messageRepository\n      if (\n        oldStore &&\n        oldStore.isRunning === store.isRunning &&\n        oldStore.messageRepository === store.messageRepository\n      ) {\n        this._notifySubscribers();\n        return;\n      }\n\n      // Clear and import the message repository\n      this.repository.clear();\n      this._assistantOptimisticId = null;\n      this.repository.import(store.messageRepository);\n\n      messages = this.repository.getMessages();\n    } else if (store.messages) {\n      // Handle messages array\n\n      if (oldStore) {\n        // flush the converter cache when the convertMessage prop changes\n        if (oldStore.convertMessage !== store.convertMessage) {\n          this._converter = new ThreadMessageConverter();\n        } else if (\n          oldStore.isRunning === store.isRunning &&\n          oldStore.messages === store.messages\n        ) {\n          this._notifySubscribers();\n          // no conversion update\n          return;\n        }\n      }\n\n      messages = !store.convertMessage\n        ? store.messages\n        : this._converter.convertMessages(store.messages, (cache, m, idx) => {\n            if (!store.convertMessage) return m;\n\n            const isLast = idx === (store.messages?.length ?? 0) - 1;\n            const autoStatus = getAutoStatus(\n              isLast,\n              isRunning,\n              false,\n              false,\n              undefined,\n            );\n\n            if (\n              cache &&\n              (cache.role !== \"assistant\" ||\n                !isAutoStatus(cache.status) ||\n                cache.status === autoStatus)\n            )\n              return cache;\n\n            const messageLike = store.convertMessage(m, idx);\n            const newMessage = fromThreadMessageLike(\n              messageLike,\n              idx.toString(),\n              autoStatus,\n            );\n            (newMessage as any)[symbolInnerMessage] = m;\n            return newMessage;\n          });\n\n      for (let i = 0; i < messages.length; i++) {\n        const message = messages[i]!;\n        const parent = messages[i - 1];\n        this.repository.addOrUpdateMessage(parent?.id ?? null, message);\n      }\n    } else {\n      throw new Error(\n        \"ExternalStoreAdapter must provide either 'messages' or 'messageRepository'\",\n      );\n    }\n\n    // Common logic for both paths\n    if (messages.length > 0) this.ensureInitialized();\n\n    if ((oldStore?.isRunning ?? false) !== (store.isRunning ?? false)) {\n      if (store.isRunning) {\n        this._notifyEventSubscribers(\"runStart\");\n      } else {\n        this._notifyEventSubscribers(\"runEnd\");\n      }\n    }\n\n    if (this._assistantOptimisticId) {\n      this.repository.deleteMessage(this._assistantOptimisticId);\n      this._assistantOptimisticId = null;\n    }\n\n    if (hasUpcomingMessage(isRunning, messages)) {\n      this._assistantOptimisticId = this.repository.appendOptimisticMessage(\n        messages.at(-1)?.id ?? null,\n        {\n          role: \"assistant\",\n          content: [],\n        },\n      );\n    }\n\n    this.repository.resetHead(\n      this._assistantOptimisticId ?? messages.at(-1)?.id ?? null,\n    );\n\n    this._messages = this.repository.getMessages();\n    this._notifySubscribers();\n  }\n\n  public override switchToBranch(branchId: string): void {\n    if (!this._store.setMessages)\n      throw new Error(\"Runtime does not support switching branches.\");\n\n    // Silently ignore branch switches while running\n    if (this._store.isRunning) {\n      return;\n    }\n\n    this.repository.switchToBranch(branchId);\n    this.updateMessages(this.repository.getMessages());\n  }\n\n  public async append(message: AppendMessage): Promise<void> {\n    if (message.parentId !== (this.messages.at(-1)?.id ?? null)) {\n      if (!this._store.onEdit)\n        throw new Error(\"Runtime does not support editing messages.\");\n      await this._store.onEdit(message);\n    } else {\n      await this._store.onNew(message);\n    }\n  }\n\n  public async startRun(config: StartRunConfig): Promise<void> {\n    if (!this._store.onReload)\n      throw new Error(\"Runtime does not support reloading messages.\");\n\n    await this._store.onReload(config.parentId, config);\n  }\n\n  public async resumeRun(config: ResumeRunConfig): Promise<void> {\n    if (!this._store.onResume)\n      throw new Error(\"Runtime does not support resuming runs.\");\n\n    await this._store.onResume(config);\n  }\n\n  public exportExternalState(): any {\n    if (!this._store.onExportExternalState)\n      throw new Error(\"Runtime does not support exporting external states.\");\n\n    return this._store.onExportExternalState();\n  }\n\n  public importExternalState(state: any): void {\n    if (!this._store.onLoadExternalState)\n      throw new Error(\"Runtime does not support importing external states.\");\n\n    this._store.onLoadExternalState(state);\n  }\n\n  public unstable_loadExternalState(state: any): void {\n    this.importExternalState(state);\n  }\n\n  public cancelRun(): void {\n    if (!this._store.onCancel)\n      throw new Error(\"Runtime does not support cancelling runs.\");\n\n    this._store.onCancel();\n\n    if (this._assistantOptimisticId) {\n      this.repository.deleteMessage(this._assistantOptimisticId);\n      this._assistantOptimisticId = null;\n    }\n\n    let messages = this.repository.getMessages();\n    const previousMessage = messages[messages.length - 1];\n    if (\n      previousMessage?.role === \"user\" &&\n      previousMessage.id === messages.at(-1)?.id // ensure the previous message is a leaf node\n    ) {\n      this.repository.deleteMessage(previousMessage.id);\n      if (!this.composer.text.trim()) {\n        this.composer.setText(getThreadMessageText(previousMessage));\n      }\n\n      messages = this.repository.getMessages();\n    } else {\n      this._notifySubscribers();\n    }\n\n    // resync messages (for reloading, to restore the previous branch)\n    setTimeout(() => {\n      this.updateMessages(messages);\n    }, 0);\n  }\n\n  public addToolResult(options: AddToolResultOptions) {\n    if (!this._store.onAddToolResult && !this._store.onAddToolResult)\n      throw new Error(\"Runtime does not support tool results.\");\n    this._store.onAddToolResult?.(options);\n  }\n\n  public resumeToolCall(options: ResumeToolCallOptions) {\n    if (!this._store.onResumeToolCall)\n      throw new Error(\"Runtime does not support resuming tool calls.\");\n    this._store.onResumeToolCall(options);\n  }\n\n  public override reset(initialMessages?: readonly ThreadMessageLike[]) {\n    const repo = new MessageRepository();\n    repo.import(ExportedMessageRepository.fromArray(initialMessages ?? []));\n    this.updateMessages(repo.getMessages());\n  }\n\n  public override import(data: ExportedMessageRepository) {\n    this._assistantOptimisticId = null;\n\n    super.import(data);\n\n    if (this._store.onImport) {\n      this._store.onImport(this.repository.getMessages());\n    }\n  }\n\n  private updateMessages = (messages: readonly ThreadMessage[]) => {\n    const hasConverter = this._store.convertMessage !== undefined;\n    if (hasConverter) {\n      this._store.setMessages?.(\n        messages.flatMap(getExternalStoreMessage).filter((m) => m != null),\n      );\n    } else {\n      // TODO mark this as readonly in v0.12.0\n      this._store.setMessages?.(messages as ThreadMessage[]);\n    }\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6110, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/external-store/ExternalStoreRuntimeCore.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/ExternalStoreRuntimeCore.tsx"],"sourcesContent":["import { BaseAssistantRuntimeCore } from \"../core/BaseAssistantRuntimeCore\";\nimport { ExternalStoreThreadListRuntimeCore } from \"./ExternalStoreThreadListRuntimeCore\";\nimport { ExternalStoreAdapter } from \"./ExternalStoreAdapter\";\nimport { ExternalStoreThreadRuntimeCore } from \"./ExternalStoreThreadRuntimeCore\";\n\nconst getThreadListAdapter = (store: ExternalStoreAdapter<any>) => {\n  return store.adapters?.threadList ?? {};\n};\n\nexport class ExternalStoreRuntimeCore extends BaseAssistantRuntimeCore {\n  public readonly threads;\n\n  constructor(adapter: ExternalStoreAdapter<any>) {\n    super();\n    this.threads = new ExternalStoreThreadListRuntimeCore(\n      getThreadListAdapter(adapter),\n      () => new ExternalStoreThreadRuntimeCore(this._contextProvider, adapter),\n    );\n  }\n\n  public setAdapter(adapter: ExternalStoreAdapter<any>) {\n    // Update the thread list adapter and propagate store changes to the main thread\n    this.threads.__internal_setAdapter(getThreadListAdapter(adapter));\n    this.threads.getMainThreadRuntimeCore().__internal_setAdapter(adapter);\n  }\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,wBAAwB,EAAE,4CAAyC;AAC5E,OAAO,EAAE,kCAAkC,EAAE,gDAA6C;AAE1F,OAAO,EAAE,8BAA8B,EAAE,4CAAyC;;;;AAElF,MAAM,oBAAoB,GAAG,CAAC,KAAgC,EAAE,EAAE;IAChE,OAAO,KAAK,CAAC,QAAQ,EAAE,UAAU,IAAI,CAAA,CAAE,CAAC;AAC1C,CAAC,CAAC;AAEI,MAAO,wBAAyB,SAAQ,8PAAwB;IACpD,OAAO,CAAC;IAExB,YAAY,OAAkC,CAAA;QAC5C,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,OAAO,GAAG,IAAI,+RAAkC,CACnD,oBAAoB,CAAC,OAAO,CAAC,EAC7B,GAAG,CAAG,CAAD,GAAK,uRAA8B,CAAC,IAAI,CAAC,gBAAgB,EAAE,OAAO,CAAC,CACzE,CAAC;IACJ,CAAC;IAEM,UAAU,CAAC,OAAkC,EAAA;QAClD,gFAAgF;QAChF,IAAI,CAAC,OAAO,CAAC,qBAAqB,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC;QAClE,IAAI,CAAC,OAAO,CAAC,wBAAwB,EAAE,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC;IACzE,CAAC;CACF"}},
    {"offset": {"line": 6139, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/external-store/useExternalStoreRuntime.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/useExternalStoreRuntime.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { ExternalStoreRuntimeCore } from \"./ExternalStoreRuntimeCore\";\nimport { ExternalStoreAdapter } from \"./ExternalStoreAdapter\";\nimport {\n  AssistantRuntime,\n  AssistantRuntimeImpl,\n} from \"../../runtime/AssistantRuntime\";\nimport { useRuntimeAdapters } from \"../adapters/RuntimeAdapterProvider\";\n\nexport const useExternalStoreRuntime = <T,>(\n  store: ExternalStoreAdapter<T>,\n): AssistantRuntime => {\n  const [runtime] = useState(() => new ExternalStoreRuntimeCore(store));\n\n  useEffect(() => {\n    runtime.setAdapter(store);\n  });\n\n  const { modelContext } = useRuntimeAdapters() ?? {};\n\n  useEffect(() => {\n    if (!modelContext) return undefined;\n    return runtime.registerModelContextProvider(modelContext);\n  }, [modelContext, runtime]);\n\n  return useMemo(() => new AssistantRuntimeImpl(runtime), [runtime]);\n};\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AACrD,OAAO,EAAE,wBAAwB,EAAE,sCAAmC;AAEtE,OAAO,EAEL,oBAAoB,GACrB,0CAAuC;AACxC,OAAO,EAAE,kBAAkB,EAAE,8CAA2C;AATxE,YAAY,CAAC;;;;;AAWN,MAAM,uBAAuB,GAAG,CACrC,KAA8B,EACZ,EAAE;IACpB,MAAM,CAAC,OAAO,CAAC,OAAG,yKAAQ;4CAAC,GAAG,CAAG,CAAD,GAAK,2QAAwB,CAAC,KAAK,CAAC,CAAC,CAAC;;QAEtE,0KAAS;6CAAC,GAAG,EAAE;YACb,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;;IAEH,MAAM,EAAE,YAAY,EAAE,OAAG,0PAAkB,EAAE,KAAI,CAAA,CAAE,CAAC;QAEpD,0KAAS;6CAAC,GAAG,EAAE;YACb,IAAI,CAAC,YAAY,EAAE,OAAO,SAAS,CAAC;YACpC,OAAO,OAAO,CAAC,4BAA4B,CAAC,YAAY,CAAC,CAAC;QAC5D,CAAC;4CAAE;QAAC,YAAY;QAAE,OAAO;KAAC,CAAC,CAAC;IAE5B,WAAO,wKAAO;2CAAC,GAAG,CAAG,CAAD,GAAK,iOAAoB,CAAC,OAAO,CAAC;0CAAE;QAAC,OAAO;KAAC,CAAC,CAAC;AACrE,CAAC,CAAC"}},
    {"offset": {"line": 6181, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/internal.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/internal.ts"],"sourcesContent":["export type { ThreadRuntimeCore } from \"./legacy-runtime/runtime-cores/core/ThreadRuntimeCore\";\nexport type { ThreadListRuntimeCore } from \"./legacy-runtime/runtime-cores/core/ThreadListRuntimeCore\";\nexport { DefaultThreadComposerRuntimeCore } from \"./legacy-runtime/runtime-cores/composer/DefaultThreadComposerRuntimeCore\";\nexport { CompositeContextProvider } from \"./utils/CompositeContextProvider\";\nexport { MessageRepository } from \"./legacy-runtime/runtime-cores/utils/MessageRepository\";\nexport { BaseAssistantRuntimeCore } from \"./legacy-runtime/runtime-cores/core/BaseAssistantRuntimeCore\";\nexport { generateId } from \"./utils/idUtils\";\nexport { AssistantRuntimeImpl } from \"./legacy-runtime/runtime/AssistantRuntime\";\nexport {\n  ThreadRuntimeImpl,\n  type ThreadRuntimeCoreBinding,\n  type ThreadListItemRuntimeBinding,\n} from \"./legacy-runtime/runtime/ThreadRuntime\";\nexport { fromThreadMessageLike } from \"./legacy-runtime/runtime-cores/external-store/ThreadMessageLike\";\nexport { getAutoStatus } from \"./legacy-runtime/runtime-cores/external-store/auto-status\";\nexport { splitLocalRuntimeOptions } from \"./legacy-runtime/runtime-cores/local/LocalRuntimeOptions\";\nexport {\n  useToolInvocations,\n  type ToolExecutionStatus,\n} from \"./legacy-runtime/runtime-cores/assistant-transport/useToolInvocations\";\n\nexport * from \"./utils/smooth\";\n"],"names":[],"mappings":""}},
    {"offset": {"line": 6199, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/local/LocalRuntimeOptions.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/local/LocalRuntimeOptions.tsx"],"sourcesContent":["import type { ThreadHistoryAdapter } from \"../adapters/thread-history/ThreadHistoryAdapter\";\nimport type { AttachmentAdapter } from \"../adapters/attachment/AttachmentAdapter\";\nimport type { ThreadMessageLike } from \"../external-store\";\nimport type { FeedbackAdapter } from \"../adapters/feedback/FeedbackAdapter\";\nimport type {\n  SpeechSynthesisAdapter,\n  DictationAdapter,\n} from \"../adapters/speech/SpeechAdapterTypes\";\nimport type { ChatModelAdapter } from \"./ChatModelAdapter\";\nimport type { AssistantCloud } from \"assistant-cloud\";\nimport type { SuggestionAdapter } from \"../adapters\";\n\nexport type LocalRuntimeOptionsBase = {\n  maxSteps?: number | undefined;\n  adapters: {\n    chatModel: ChatModelAdapter;\n    history?: ThreadHistoryAdapter | undefined;\n    attachments?: AttachmentAdapter | undefined;\n    speech?: SpeechSynthesisAdapter | undefined;\n    dictation?: DictationAdapter | undefined;\n    feedback?: FeedbackAdapter | undefined;\n    suggestion?: SuggestionAdapter | undefined;\n  };\n\n  /**\n   * Names of tools that are allowed to interrupt the run in order to wait for human/external approval.\n   */\n  unstable_humanToolNames?: string[] | undefined;\n};\n\n// TODO align LocalRuntimeOptions with LocalRuntimeOptionsBase\nexport type LocalRuntimeOptions = Omit<LocalRuntimeOptionsBase, \"adapters\"> & {\n  cloud?: AssistantCloud | undefined;\n  initialMessages?: readonly ThreadMessageLike[] | undefined;\n  adapters?: Omit<LocalRuntimeOptionsBase[\"adapters\"], \"chatModel\"> | undefined;\n};\n\nexport const splitLocalRuntimeOptions = <T extends LocalRuntimeOptions>(\n  options: T,\n) => {\n  const {\n    cloud,\n    initialMessages,\n    maxSteps,\n    adapters,\n    unstable_humanToolNames,\n    ...rest\n  } = options;\n\n  return {\n    localRuntimeOptions: {\n      cloud,\n      initialMessages,\n      maxSteps,\n      adapters,\n      unstable_humanToolNames,\n    },\n    otherOptions: rest,\n  };\n};\n"],"names":[],"mappings":";;;;AAqCO,MAAM,wBAAwB,GAAG,CACtC,OAAU,EACV,EAAE;IACF,MAAM,EACJ,KAAK,EACL,eAAe,EACf,QAAQ,EACR,QAAQ,EACR,uBAAuB,EACvB,GAAG,IAAI,EACR,GAAG,OAAO,CAAC;IAEZ,OAAO;QACL,mBAAmB,EAAE;YACnB,KAAK;YACL,eAAe;YACf,QAAQ;YACR,QAAQ;YACR,uBAAuB;SACxB;QACD,YAAY,EAAE,IAAI;KACnB,CAAC;AACJ,CAAC,CAAC"}},
    {"offset": {"line": 6220, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/assistant-transport/useToolInvocations.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/assistant-transport/useToolInvocations.ts"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport {\n  createAssistantStreamController,\n  type ToolCallStreamController,\n  ToolResponse,\n  unstable_toolResultStream,\n  type Tool,\n} from \"assistant-stream\";\nimport type {\n  AssistantTransportCommand,\n  AssistantTransportState,\n} from \"./types\";\nimport {\n  AssistantMetaTransformStream,\n  type ReadonlyJSONValue,\n} from \"assistant-stream/utils\";\n\nconst isArgsTextComplete = (argsText: string) => {\n  try {\n    JSON.parse(argsText);\n    return true;\n  } catch {\n    return false;\n  }\n};\n\ntype UseToolInvocationsParams = {\n  state: AssistantTransportState;\n  getTools: () => Record<string, Tool> | undefined;\n  onResult: (command: AssistantTransportCommand) => void;\n  setToolStatuses: (\n    updater:\n      | Record<string, ToolExecutionStatus>\n      | ((\n          prev: Record<string, ToolExecutionStatus>,\n        ) => Record<string, ToolExecutionStatus>),\n  ) => void;\n};\n\nexport type ToolExecutionStatus =\n  | { type: \"executing\" }\n  | { type: \"interrupt\"; payload: { type: \"human\"; payload: unknown } };\n\nexport function useToolInvocations({\n  state,\n  getTools,\n  onResult,\n  setToolStatuses,\n}: UseToolInvocationsParams) {\n  const lastToolStates = useRef<\n    Record<\n      string,\n      {\n        argsText: string;\n        hasResult: boolean;\n        argsComplete: boolean;\n        controller: ToolCallStreamController;\n      }\n    >\n  >({});\n\n  const humanInputRef = useRef<\n    Map<\n      string,\n      {\n        resolve: (payload: unknown) => void;\n        reject: (reason: unknown) => void;\n      }\n    >\n  >(new Map());\n\n  const acRef = useRef<AbortController>(new AbortController());\n  const executingCountRef = useRef(0);\n  const settledResolversRef = useRef<Array<() => void>>([]);\n\n  const [controller] = useState(() => {\n    const [stream, controller] = createAssistantStreamController();\n    const transform = unstable_toolResultStream(\n      getTools,\n      () => acRef.current?.signal ?? new AbortController().signal,\n      (toolCallId: string, payload: unknown) => {\n        return new Promise<unknown>((resolve, reject) => {\n          // Reject previous human input request if it exists\n          const previous = humanInputRef.current.get(toolCallId);\n          if (previous) {\n            previous.reject(\n              new Error(\"Human input request was superseded by a new request\"),\n            );\n          }\n\n          humanInputRef.current.set(toolCallId, { resolve, reject });\n          setToolStatuses((prev) => ({\n            ...prev,\n            [toolCallId]: {\n              type: \"interrupt\",\n              payload: { type: \"human\", payload },\n            },\n          }));\n        });\n      },\n      {\n        onExecutionStart: (toolCallId: string) => {\n          executingCountRef.current++;\n          setToolStatuses((prev) => ({\n            ...prev,\n            [toolCallId]: { type: \"executing\" },\n          }));\n        },\n        onExecutionEnd: (toolCallId: string) => {\n          executingCountRef.current--;\n          setToolStatuses((prev) => {\n            const next = { ...prev };\n            delete next[toolCallId];\n            return next;\n          });\n          // Resolve any waiting abort promises when all tools have settled\n          if (executingCountRef.current === 0) {\n            settledResolversRef.current.forEach((resolve) => resolve());\n            settledResolversRef.current = [];\n          }\n        },\n      },\n    );\n    stream\n      .pipeThrough(transform)\n      .pipeThrough(new AssistantMetaTransformStream())\n      .pipeTo(\n        new WritableStream({\n          write(chunk) {\n            if (chunk.type === \"result\") {\n              // the tool call result was already set by the backend\n              if (lastToolStates.current[chunk.meta.toolCallId]?.hasResult)\n                return;\n\n              onResult({\n                type: \"add-tool-result\",\n                toolCallId: chunk.meta.toolCallId,\n                toolName: chunk.meta.toolName,\n                result: chunk.result,\n                isError: chunk.isError,\n                ...(chunk.artifact && { artifact: chunk.artifact }),\n              });\n            }\n          },\n        }),\n      );\n\n    return controller;\n  });\n\n  const ignoredToolIds = useRef<Set<string>>(new Set());\n  const isInitialState = useRef(true);\n\n  useEffect(() => {\n    const processMessages = (\n      messages: readonly (typeof state.messages)[number][],\n    ) => {\n      messages.forEach((message) => {\n        message.content.forEach((content) => {\n          if (content.type === \"tool-call\") {\n            if (isInitialState.current) {\n              ignoredToolIds.current.add(content.toolCallId);\n            } else {\n              if (ignoredToolIds.current.has(content.toolCallId)) {\n                return;\n              }\n              let lastState = lastToolStates.current[content.toolCallId];\n              if (!lastState) {\n                const toolCallController = controller.addToolCallPart({\n                  toolName: content.toolName,\n                  toolCallId: content.toolCallId,\n                });\n                lastState = {\n                  argsText: \"\",\n                  hasResult: false,\n                  argsComplete: false,\n                  controller: toolCallController,\n                };\n                lastToolStates.current[content.toolCallId] = lastState;\n              }\n\n              if (content.argsText !== lastState.argsText) {\n                if (lastState.argsComplete) {\n                  if (process.env.NODE_ENV !== \"production\") {\n                    console.warn(\n                      \"argsText updated after controller was closed:\",\n                      {\n                        previous: lastState.argsText,\n                        next: content.argsText,\n                      },\n                    );\n                  }\n                } else {\n                  if (!content.argsText.startsWith(lastState.argsText)) {\n                    // Check if this is key reordering (both are complete JSON)\n                    // This happens when transitioning from streaming to complete state\n                    // and the provider returns keys in a different order\n                    if (\n                      isArgsTextComplete(lastState.argsText) &&\n                      isArgsTextComplete(content.argsText)\n                    ) {\n                      lastState.controller.argsText.close();\n                      lastToolStates.current[content.toolCallId] = {\n                        argsText: content.argsText,\n                        hasResult: lastState.hasResult,\n                        argsComplete: true,\n                        controller: lastState.controller,\n                      };\n                      return; // Continue to next content part\n                    }\n                    throw new Error(\n                      `Tool call argsText can only be appended, not updated: ${content.argsText} does not start with ${lastState.argsText}`,\n                    );\n                  }\n\n                  const argsTextDelta = content.argsText.slice(\n                    lastState.argsText.length,\n                  );\n                  lastState.controller.argsText.append(argsTextDelta);\n\n                  const shouldClose = isArgsTextComplete(content.argsText);\n                  if (shouldClose) {\n                    lastState.controller.argsText.close();\n                  }\n\n                  lastToolStates.current[content.toolCallId] = {\n                    argsText: content.argsText,\n                    hasResult: lastState.hasResult,\n                    argsComplete: shouldClose,\n                    controller: lastState.controller,\n                  };\n                }\n              }\n\n              if (content.result !== undefined && !lastState.hasResult) {\n                lastToolStates.current[content.toolCallId] = {\n                  hasResult: true,\n                  argsComplete: true,\n                  argsText: lastState.argsText,\n                  controller: lastState.controller,\n                };\n\n                lastState.controller.setResponse(\n                  new ToolResponse({\n                    result: content.result as ReadonlyJSONValue,\n                    artifact: content.artifact as ReadonlyJSONValue | undefined,\n                    isError: content.isError,\n                  }),\n                );\n                lastState.controller.close();\n              }\n            }\n\n            // Recursively process nested messages\n            if (content.messages) {\n              processMessages(content.messages);\n            }\n          }\n        });\n      });\n    };\n\n    processMessages(state.messages);\n\n    if (isInitialState.current) {\n      isInitialState.current = false;\n    }\n  }, [state, controller]);\n\n  const abort = (): Promise<void> => {\n    humanInputRef.current.forEach(({ reject }) => {\n      reject(new Error(\"Tool execution aborted\"));\n    });\n    humanInputRef.current.clear();\n\n    acRef.current.abort();\n    acRef.current = new AbortController();\n\n    // Return a promise that resolves when all executing tools have settled\n    if (executingCountRef.current === 0) {\n      return Promise.resolve();\n    }\n    return new Promise<void>((resolve) => {\n      settledResolversRef.current.push(resolve);\n    });\n  };\n\n  return {\n    reset: () => {\n      void abort();\n      isInitialState.current = true;\n    },\n    abort,\n    resume: (toolCallId: string, payload: unknown) => {\n      const handlers = humanInputRef.current.get(toolCallId);\n      if (handlers) {\n        humanInputRef.current.delete(toolCallId);\n        setToolStatuses((prev) => ({\n          ...prev,\n          [toolCallId]: { type: \"executing\" },\n        }));\n        handlers.resolve(payload);\n      } else {\n        throw new Error(\n          `Tool call ${toolCallId} is not waiting for human input`,\n        );\n      }\n    },\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6484, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/utils/smooth/index.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/utils/smooth/index.ts"],"sourcesContent":["\"use client\";\n// TODO createContextStoreHook does not work well with server-side nextjs bundler\n// use client necessary here for now\n\nexport { useSmooth } from \"./useSmooth\";\nexport { useSmoothStatus, withSmoothContextProvider } from \"./SmoothContext\";\n"],"names":[],"mappings":";AAAA,YAAY,CAAC"}},
    {"offset": {"line": 6493, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/utils/smooth/SmoothContext.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/utils/smooth/SmoothContext.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ComponentType,\n  createContext,\n  FC,\n  forwardRef,\n  PropsWithChildren,\n  useContext,\n  useState,\n} from \"react\";\nimport { ReadonlyStore } from \"../../context/ReadonlyStore\";\nimport { create, UseBoundStore } from \"zustand\";\nimport {\n  MessagePartStatus,\n  ToolCallMessagePartStatus,\n} from \"../../types/AssistantTypes\";\nimport { useAui } from \"@assistant-ui/store\";\nimport { createContextStoreHook } from \"../../context/react/utils/createContextStoreHook\";\n\ntype SmoothContextValue = {\n  useSmoothStatus: UseBoundStore<\n    ReadonlyStore<MessagePartStatus | ToolCallMessagePartStatus>\n  >;\n};\n\nconst SmoothContext = createContext<SmoothContextValue | null>(null);\n\nconst makeSmoothContext = (\n  initialState: MessagePartStatus | ToolCallMessagePartStatus,\n) => {\n  const useSmoothStatus = create(() => initialState);\n  return { useSmoothStatus };\n};\n\nexport const SmoothContextProvider: FC<PropsWithChildren> = ({ children }) => {\n  const outer = useSmoothContext({ optional: true });\n  const aui = useAui();\n\n  const [context] = useState(() =>\n    makeSmoothContext(aui.part().getState().status),\n  );\n\n  // do not wrap if there is an outer SmoothContextProvider\n  if (outer) return children;\n\n  return (\n    <SmoothContext.Provider value={context}>{children}</SmoothContext.Provider>\n  );\n};\n\nexport const withSmoothContextProvider = <C extends ComponentType<any>>(\n  Component: C,\n): C => {\n  const Wrapped = forwardRef((props, ref) => {\n    return (\n      <SmoothContextProvider>\n        <Component {...(props as any)} ref={ref} />\n      </SmoothContextProvider>\n    );\n  });\n  Wrapped.displayName = Component.displayName;\n  return Wrapped as any;\n};\n\nfunction useSmoothContext(options?: {\n  optional?: false | undefined;\n}): SmoothContextValue;\nfunction useSmoothContext(options?: {\n  optional?: boolean | undefined;\n}): SmoothContextValue | null;\nfunction useSmoothContext(options?: { optional?: boolean | undefined }) {\n  const context = useContext(SmoothContext);\n  if (!options?.optional && !context)\n    throw new Error(\n      \"This component must be used within a SmoothContextProvider.\",\n    );\n  return context;\n}\n\nexport const { useSmoothStatus, useSmoothStatusStore } = createContextStoreHook(\n  useSmoothContext,\n  \"useSmoothStatus\",\n);\n"],"names":[],"mappings":";;;;;;;;;;;AAEA,OAAO,EAEL,aAAa,EAEb,UAAU,EAEV,UAAU,EACV,QAAQ,GACT,MAAM,OAAO,CAAC;AAEf,OAAO,EAAE,MAAM,EAAiB,MAAM,SAAS,CAAC;AAKhD,OAAO,EAAE,MAAM,EAAE,MAAM,qBAAqB,CAAC;AAC7C,OAAO,EAAE,sBAAsB,EAAE,4DAAyD;AAlB1F,YAAY,CAAC;;;;;;AA0Bb,MAAM,aAAa,OAAG,8KAAa,EAA4B,IAAI,CAAC,CAAC;AAErE,MAAM,iBAAiB,GAAG,CACxB,YAA2D,EAC3D,EAAE;IACF,MAAM,eAAe,OAAG,qJAAM,EAAC,GAAG,CAAG,CAAD,WAAa,CAAC,CAAC;IACnD,OAAO;QAAE,eAAe;IAAA,CAAE,CAAC;AAC7B,CAAC,CAAC;AAEK,MAAM,qBAAqB,GAA0B,CAAC,EAAE,QAAQ,EAAE,EAAE,EAAE;IAC3E,MAAM,KAAK,GAAG,gBAAgB,CAAC;QAAE,QAAQ,EAAE,IAAI;IAAA,CAAE,CAAC,CAAC;IACnD,MAAM,GAAG,OAAG,yKAAM,EAAE,CAAC;IAErB,MAAM,CAAC,OAAO,CAAC,GAAG,6KAAQ;0CAAC,GAAG,CAC5B,CAD8B,gBACb,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,CAChD,CAAC;;IAEF,yDAAyD;IACzD,IAAI,KAAK,EAAE,OAAO,QAAQ,CAAC;IAE3B,OAAO,IACL,6KAAA,EAAC,aAAa,CAAC,QAAQ,EAAA;QAAC,KAAK,EAAE,OAAO;QAAA,UAAG,QAAQ;IAAA,EAA0B,CAC5E,CAAC;AACJ,CAAC,CAAC;AAEK,MAAM,yBAAyB,GAAG,CACvC,SAAY,EACT,EAAE;IACL,MAAM,OAAO,GAAG,+KAAU,EAAC,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE;QACxC,OAAO,IACL,6KAAA,EAAC,qBAAqB,EAAA;YAAA,cACpB,6KAAA,EAAC,SAAS,EAAA;gBAAA,GAAM,KAAa;gBAAE,GAAG,EAAE,GAAG;YAAA,EAAI;QAAA,EACrB,CACzB,CAAC;IACJ,CAAC,CAAC,CAAC;IACH,OAAO,CAAC,WAAW,GAAG,SAAS,CAAC,WAAW,CAAC;IAC5C,OAAO,OAAc,CAAC;AACxB,CAAC,CAAC;AAQF,SAAS,gBAAgB,CAAC,OAA4C;IACpE,MAAM,OAAO,OAAG,2KAAU,EAAC,aAAa,CAAC,CAAC;IAC1C,IAAI,CAAC,OAAO,EAAE,QAAQ,IAAI,CAAC,OAAO,EAChC,MAAM,IAAI,KAAK,CACb,6DAA6D,CAC9D,CAAC;IACJ,OAAO,OAAO,CAAC;AACjB,CAAC;AAEM,MAAM,EAAE,eAAe,EAAE,oBAAoB,EAAE,OAAG,sOAAsB,EAC7E,gBAAgB,EAChB,iBAAiB,CAClB,CAAC"}},
    {"offset": {"line": 6558, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/utils/smooth/useSmooth.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/utils/smooth/useSmooth.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport {\n  MessagePartStatus,\n  ReasoningMessagePart,\n  TextMessagePart,\n} from \"../../types/AssistantTypes\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useSmoothStatusStore } from \"./SmoothContext\";\nimport { writableStore } from \"../../context/ReadonlyStore\";\nimport { MessagePartState } from \"../../legacy-runtime/runtime/MessagePartRuntime\";\n\nclass TextStreamAnimator {\n  private animationFrameId: number | null = null;\n  private lastUpdateTime: number = Date.now();\n\n  public targetText: string = \"\";\n\n  constructor(\n    public currentText: string,\n    private setText: (newText: string) => void,\n  ) {}\n\n  start() {\n    if (this.animationFrameId !== null) return;\n    this.lastUpdateTime = Date.now();\n    this.animate();\n  }\n\n  stop() {\n    if (this.animationFrameId !== null) {\n      cancelAnimationFrame(this.animationFrameId);\n      this.animationFrameId = null;\n    }\n  }\n\n  private animate = () => {\n    const currentTime = Date.now();\n    const deltaTime = currentTime - this.lastUpdateTime;\n    let timeToConsume = deltaTime;\n\n    const remainingChars = this.targetText.length - this.currentText.length;\n    const baseTimePerChar = Math.min(5, 250 / remainingChars);\n\n    let charsToAdd = 0;\n    while (timeToConsume >= baseTimePerChar && charsToAdd < remainingChars) {\n      charsToAdd++;\n      timeToConsume -= baseTimePerChar;\n    }\n\n    if (charsToAdd !== remainingChars) {\n      this.animationFrameId = requestAnimationFrame(this.animate);\n    } else {\n      this.animationFrameId = null;\n    }\n    if (charsToAdd === 0) return;\n\n    this.currentText = this.targetText.slice(\n      0,\n      this.currentText.length + charsToAdd,\n    );\n    this.lastUpdateTime = currentTime - timeToConsume;\n    this.setText(this.currentText);\n  };\n}\n\nconst SMOOTH_STATUS: MessagePartStatus = Object.freeze({\n  type: \"running\",\n});\n\nexport const useSmooth = (\n  state: MessagePartState & (TextMessagePart | ReasoningMessagePart),\n  smooth: boolean = false,\n): MessagePartState & (TextMessagePart | ReasoningMessagePart) => {\n  const { text } = state;\n  const id = useAuiState((s) => s.message.id);\n\n  const idRef = useRef(id);\n  const [displayedText, setDisplayedText] = useState(text);\n\n  const smoothStatusStore = useSmoothStatusStore({ optional: true });\n  const setText = useCallbackRef((text: string) => {\n    setDisplayedText(text);\n    if (smoothStatusStore) {\n      const target =\n        displayedText !== text || state.status.type === \"running\"\n          ? SMOOTH_STATUS\n          : state.status;\n      writableStore(smoothStatusStore).setState(target, true);\n    }\n  });\n\n  // TODO this is hacky\n  useEffect(() => {\n    if (smoothStatusStore) {\n      const target =\n        smooth && (displayedText !== text || state.status.type === \"running\")\n          ? SMOOTH_STATUS\n          : state.status;\n      writableStore(smoothStatusStore).setState(target, true);\n    }\n  }, [smoothStatusStore, smooth, text, displayedText, state.status]);\n\n  const [animatorRef] = useState<TextStreamAnimator>(\n    new TextStreamAnimator(text, setText),\n  );\n\n  useEffect(() => {\n    if (!smooth) {\n      animatorRef.stop();\n      return;\n    }\n\n    if (idRef.current !== id || !text.startsWith(animatorRef.targetText)) {\n      idRef.current = id;\n      setText(text);\n\n      animatorRef.currentText = text;\n      animatorRef.targetText = text;\n      animatorRef.stop();\n\n      return;\n    }\n\n    animatorRef.targetText = text;\n    animatorRef.start();\n  }, [setText, animatorRef, id, smooth, text]);\n\n  useEffect(() => {\n    return () => {\n      animatorRef.stop();\n    };\n  }, [animatorRef]);\n\n  return useMemo(\n    () =>\n      smooth\n        ? {\n            type: \"text\",\n            text: displayedText,\n            status: text === displayedText ? state.status : SMOOTH_STATUS,\n          }\n        : state,\n    [smooth, displayedText, state, text],\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6777, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/external-store/external-message-converter.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/external-message-converter.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { ThreadMessageConverter } from \"./ThreadMessageConverter\";\nimport {\n  getExternalStoreMessages,\n  symbolInnerMessage,\n} from \"./getExternalStoreMessage\";\nimport { fromThreadMessageLike, ThreadMessageLike } from \"./ThreadMessageLike\";\nimport { getAutoStatus, isAutoStatus } from \"./auto-status\";\nimport { ThreadMessage, ToolCallMessagePart } from \"../../../types\";\nimport { ToolExecutionStatus } from \"../assistant-transport/useToolInvocations\";\nimport { ReadonlyJSONValue } from \"assistant-stream/utils\";\nimport { generateErrorMessageId } from \"../../../utils/idUtils\";\nimport { ThreadAssistantMessage } from \"../../../types/AssistantTypes\";\n\nexport namespace useExternalMessageConverter {\n  export type Message =\n    | (ThreadMessageLike & {\n        readonly convertConfig?: {\n          readonly joinStrategy?: \"concat-content\" | \"none\";\n        };\n      })\n    | {\n        role: \"tool\";\n        toolCallId: string;\n        toolName?: string | undefined;\n        result: any;\n        artifact?: any;\n        isError?: boolean;\n        messages?: readonly ThreadMessage[];\n      };\n\n  export type Metadata = {\n    readonly toolStatuses?: Record<string, ToolExecutionStatus>;\n    readonly error?: ReadonlyJSONValue;\n  };\n\n  export type Callback<T> = (\n    message: T,\n    metadata: Metadata,\n  ) => Message | Message[];\n}\n\ntype CallbackResult<T> = {\n  input: T;\n  outputs: useExternalMessageConverter.Message[];\n};\n\ntype ChunkResult<T> = {\n  inputs: T[];\n  outputs: useExternalMessageConverter.Message[];\n};\n\ntype Mutable<T> = {\n  -readonly [P in keyof T]: T[P];\n};\n\nconst joinExternalMessages = (\n  messages: readonly useExternalMessageConverter.Message[],\n): ThreadMessageLike => {\n  const assistantMessage: Mutable<Omit<ThreadMessageLike, \"metadata\">> & {\n    content: Exclude<ThreadMessageLike[\"content\"][0], string>[];\n    metadata?: Mutable<ThreadMessageLike[\"metadata\"]>;\n  } = {\n    role: \"assistant\",\n    content: [],\n  };\n  for (const output of messages) {\n    if (output.role === \"tool\") {\n      const toolCallIdx = assistantMessage.content.findIndex(\n        (c) => c.type === \"tool-call\" && c.toolCallId === output.toolCallId,\n      );\n      if (toolCallIdx !== -1) {\n        const toolCall = assistantMessage.content[\n          toolCallIdx\n        ]! as ToolCallMessagePart;\n        if (output.toolName !== undefined) {\n          if (toolCall.toolName !== output.toolName)\n            throw new Error(\n              `Tool call name ${output.toolCallId} ${output.toolName} does not match existing tool call ${toolCall.toolName}`,\n            );\n        }\n        assistantMessage.content[toolCallIdx] = {\n          ...toolCall,\n          ...{\n            [symbolInnerMessage]: [\n              ...((toolCall as any)[symbolInnerMessage] ?? []),\n              output,\n            ],\n          },\n          result: output.result,\n          artifact: output.artifact,\n          isError: output.isError,\n          messages: output.messages,\n        };\n      } else {\n        throw new Error(\n          `Tool call ${output.toolCallId} ${output.toolName} not found in assistant message`,\n        );\n      }\n    } else {\n      const role = output.role;\n      const content = (\n        typeof output.content === \"string\"\n          ? [{ type: \"text\" as const, text: output.content }]\n          : output.content\n      ).map((c) => ({\n        ...c,\n        ...{ [symbolInnerMessage]: [output] },\n      }));\n      switch (role) {\n        case \"system\":\n        case \"user\":\n          return {\n            ...output,\n            content,\n          };\n        case \"assistant\":\n          if (assistantMessage.content.length === 0) {\n            assistantMessage.id = output.id;\n            assistantMessage.createdAt ??= output.createdAt;\n            assistantMessage.status ??= output.status;\n\n            if (output.attachments) {\n              assistantMessage.attachments = [\n                ...(assistantMessage.attachments ?? []),\n                ...output.attachments,\n              ];\n            }\n\n            if (output.metadata) {\n              assistantMessage.metadata ??= {};\n              if (output.metadata.unstable_state) {\n                assistantMessage.metadata.unstable_state =\n                  output.metadata.unstable_state;\n              }\n              if (output.metadata.unstable_annotations) {\n                assistantMessage.metadata.unstable_annotations = [\n                  ...(assistantMessage.metadata.unstable_annotations ?? []),\n                  ...output.metadata.unstable_annotations,\n                ];\n              }\n              if (output.metadata.unstable_data) {\n                assistantMessage.metadata.unstable_data = [\n                  ...(assistantMessage.metadata.unstable_data ?? []),\n                  ...output.metadata.unstable_data,\n                ];\n              }\n              if (output.metadata.steps) {\n                assistantMessage.metadata.steps = [\n                  ...(assistantMessage.metadata.steps ?? []),\n                  ...output.metadata.steps,\n                ];\n              }\n              if (output.metadata.custom) {\n                assistantMessage.metadata.custom = {\n                  ...(assistantMessage.metadata.custom ?? {}),\n                  ...output.metadata.custom,\n                };\n              }\n\n              if (output.metadata.submittedFeedback) {\n                assistantMessage.metadata.submittedFeedback =\n                  output.metadata.submittedFeedback;\n              }\n            }\n            // TODO keep this in sync\n          }\n\n          // Add content parts, merging reasoning parts with same parentId\n          for (const part of content) {\n            if (\n              part.type === \"reasoning\" &&\n              \"parentId\" in part &&\n              part.parentId\n            ) {\n              const existingIdx = assistantMessage.content.findIndex(\n                (c) =>\n                  c.type === \"reasoning\" &&\n                  \"parentId\" in c &&\n                  c.parentId === part.parentId,\n              );\n              if (existingIdx !== -1) {\n                const existing = assistantMessage.content[\n                  existingIdx\n                ] as typeof part;\n                assistantMessage.content[existingIdx] = {\n                  ...existing,\n                  text: `${existing.text}\\n\\n${part.text}`,\n                  ...{\n                    [symbolInnerMessage]: [\n                      ...((existing as any)[symbolInnerMessage] ?? []),\n                      ...((part as any)[symbolInnerMessage] ?? []),\n                    ],\n                  },\n                };\n                continue;\n              }\n            }\n            assistantMessage.content.push(part);\n          }\n          break;\n        default: {\n          const unsupportedRole: never = role;\n          throw new Error(`Unknown message role: ${unsupportedRole}`);\n        }\n      }\n    }\n  }\n  return assistantMessage;\n};\n\nconst chunkExternalMessages = <T,>(\n  callbackResults: CallbackResult<T>[],\n  joinStrategy?: \"concat-content\" | \"none\",\n) => {\n  const results: ChunkResult<T>[] = [];\n  let isAssistant = false;\n  let pendingNone = false; // true if the previous assistant message had joinStrategy \"none\"\n  let inputs: T[] = [];\n  let outputs: useExternalMessageConverter.Message[] = [];\n\n  const flush = () => {\n    if (outputs.length) {\n      results.push({\n        inputs,\n        outputs,\n      });\n    }\n    inputs = [];\n    outputs = [];\n    isAssistant = false;\n    pendingNone = false;\n  };\n\n  for (const callbackResult of callbackResults) {\n    for (const output of callbackResult.outputs) {\n      if (\n        (pendingNone && output.role !== \"tool\") ||\n        !isAssistant ||\n        output.role === \"user\" ||\n        output.role === \"system\"\n      ) {\n        flush();\n      }\n      isAssistant = output.role === \"assistant\" || output.role === \"tool\";\n\n      if (inputs.at(-1) !== callbackResult.input) {\n        inputs.push(callbackResult.input);\n      }\n      outputs.push(output);\n\n      if (\n        output.role === \"assistant\" &&\n        (output.convertConfig?.joinStrategy === \"none\" ||\n          joinStrategy === \"none\")\n      ) {\n        pendingNone = true;\n      }\n    }\n  }\n  flush();\n  return results;\n};\n\nfunction createErrorAssistantMessage(\n  error: ReadonlyJSONValue,\n): ThreadAssistantMessage {\n  return Object.assign<ThreadAssistantMessage, { [symbolInnerMessage]: [] }>(\n    {\n      id: generateErrorMessageId(),\n      role: \"assistant\",\n      content: [],\n      status: { type: \"incomplete\", reason: \"error\", error },\n      createdAt: new Date(),\n      metadata: {\n        unstable_state: null,\n        unstable_annotations: [],\n        unstable_data: [],\n        custom: {},\n        steps: [],\n      },\n    },\n    { [symbolInnerMessage]: [] },\n  );\n}\n\nexport const convertExternalMessages = <T extends WeakKey>(\n  messages: T[],\n  callback: useExternalMessageConverter.Callback<T>,\n  isRunning: boolean,\n  metadata: useExternalMessageConverter.Metadata,\n) => {\n  const callbackResults: CallbackResult<T>[] = [];\n  for (const message of messages) {\n    const output = callback(message, metadata);\n    const outputs = Array.isArray(output) ? output : [output];\n    const result = { input: message, outputs };\n    callbackResults.push(result);\n  }\n\n  const chunks = chunkExternalMessages(callbackResults);\n\n  const result = chunks.map((message, idx) => {\n    const isLast = idx === chunks.length - 1;\n    const joined = joinExternalMessages(message.outputs);\n    const hasPendingToolCalls =\n      typeof joined.content === \"object\" &&\n      joined.content.some(\n        (c) => c.type === \"tool-call\" && c.result === undefined,\n      );\n    const autoStatus = getAutoStatus(\n      isLast,\n      isRunning,\n      hasPendingToolCalls,\n      hasPendingToolCalls,\n      isLast ? metadata.error : undefined,\n    );\n    const newMessage = fromThreadMessageLike(\n      joined,\n      idx.toString(),\n      autoStatus,\n    );\n    (newMessage as any)[symbolInnerMessage] = message.inputs;\n    return newMessage;\n  });\n\n  if (metadata.error) {\n    const lastMessage = result.at(-1);\n    if (!lastMessage || lastMessage.role !== \"assistant\") {\n      result.push(createErrorAssistantMessage(metadata.error));\n    }\n  }\n\n  return result;\n};\n\nexport const useExternalMessageConverter = <T extends WeakKey>({\n  callback,\n  messages,\n  isRunning,\n  joinStrategy,\n  metadata,\n}: {\n  callback: useExternalMessageConverter.Callback<T>;\n  messages: T[];\n  isRunning: boolean;\n  joinStrategy?: \"concat-content\" | \"none\" | undefined;\n  metadata?: useExternalMessageConverter.Metadata | undefined;\n}) => {\n  const state = useMemo(\n    () => ({\n      metadata: metadata ?? {},\n      callback,\n      callbackCache: new WeakMap<T, CallbackResult<T>>(),\n      chunkCache: new WeakMap<\n        useExternalMessageConverter.Message,\n        ChunkResult<T>\n      >(),\n      converterCache: new ThreadMessageConverter(),\n    }),\n    [callback, metadata],\n  );\n\n  return useMemo(() => {\n    const callbackResults: CallbackResult<T>[] = [];\n    for (const message of messages) {\n      let result = state.callbackCache.get(message);\n      if (!result) {\n        const output = state.callback(message, state.metadata);\n        const outputs = Array.isArray(output) ? output : [output];\n        result = { input: message, outputs };\n        state.callbackCache.set(message, result);\n      }\n      callbackResults.push(result);\n    }\n\n    const chunks = chunkExternalMessages(callbackResults, joinStrategy).map(\n      (m) => {\n        const key = m.outputs[0];\n        if (!key) return m;\n\n        const cached = state.chunkCache.get(key);\n        if (cached && shallowArrayEqual(cached.outputs, m.outputs))\n          return cached;\n        state.chunkCache.set(key, m);\n        return m;\n      },\n    );\n\n    const threadMessages = state.converterCache.convertMessages(\n      chunks,\n      (cache, message, idx) => {\n        const isLast = idx === chunks.length - 1;\n\n        const joined = joinExternalMessages(message.outputs);\n        const hasSuspendedToolCalls =\n          typeof joined.content === \"object\" &&\n          joined.content.some(\n            (c) => c.type === \"tool-call\" && c.result === undefined,\n          );\n        const hasPendingToolCalls =\n          typeof joined.content === \"object\" &&\n          joined.content.some(\n            (c) => c.type === \"tool-call\" && c.result === undefined,\n          );\n        const autoStatus = getAutoStatus(\n          isLast,\n          isRunning,\n          hasSuspendedToolCalls,\n          hasPendingToolCalls,\n          isLast ? state.metadata.error : undefined,\n        );\n\n        if (\n          cache &&\n          (cache.role !== \"assistant\" ||\n            !isAutoStatus(cache.status) ||\n            cache.status === autoStatus)\n        ) {\n          const inputs = getExternalStoreMessages<T>(cache);\n          if (shallowArrayEqual(inputs, message.inputs)) {\n            return cache;\n          }\n        }\n\n        const newMessage = fromThreadMessageLike(\n          joined,\n          idx.toString(),\n          autoStatus,\n        );\n        (newMessage as any)[symbolInnerMessage] = message.inputs;\n        return newMessage;\n      },\n    );\n\n    (threadMessages as unknown as { [symbolInnerMessage]: T[] })[\n      symbolInnerMessage\n    ] = messages;\n\n    if (state.metadata.error) {\n      const lastMessage = threadMessages.at(-1);\n      if (!lastMessage || lastMessage.role !== \"assistant\") {\n        threadMessages.push(createErrorAssistantMessage(state.metadata.error));\n      }\n    }\n\n    return threadMessages;\n  }, [state, messages, isRunning, joinStrategy]);\n};\n\nconst shallowArrayEqual = (a: unknown[], b: unknown[]) => {\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n};\n"],"names":[],"mappings":";;;;;;AAEA,OAAO,EAAE,OAAO,EAAE,MAAM,OAAO,CAAC;AAChC,OAAO,EAAE,sBAAsB,EAAE,oCAAiC;AAClE,OAAO,EACL,wBAAwB,EACxB,kBAAkB,GACnB,qCAAkC;AACnC,OAAO,EAAE,qBAAqB,EAAqB,+BAA4B;AAC/E,OAAO,EAAE,aAAa,EAAE,YAAY,EAAE,yBAAsB;AAI5D,OAAO,EAAE,sBAAsB,EAAE,kCAA+B;AAbhE,YAAY,CAAC;;;;;;;AA0Db,MAAM,oBAAoB,GAAG,CAC3B,QAAwD,EACrC,EAAE;IACrB,MAAM,gBAAgB,GAGlB;QACF,IAAI,EAAE,WAAW;QACjB,OAAO,EAAE,EAAE;KACZ,CAAC;IACF,KAAK,MAAM,MAAM,IAAI,QAAQ,CAAE,CAAC;QAC9B,IAAI,MAAM,CAAC,IAAI,KAAK,MAAM,EAAE,CAAC;YAC3B,MAAM,WAAW,GAAG,gBAAgB,CAAC,OAAO,CAAC,SAAS,CACpD,CAAC,CAAC,EAAE,CAAG,CAAC,AAAF,CAAG,IAAI,KAAK,WAAW,IAAI,CAAC,CAAC,UAAU,KAAK,MAAM,CAAC,UAAU,CACpE,CAAC;YACF,IAAI,WAAW,KAAK,CAAC,CAAC,EAAE,CAAC;gBACvB,MAAM,QAAQ,GAAG,gBAAgB,CAAC,OAAO,CACvC,WAAW,CACY,CAAC;gBAC1B,IAAI,MAAM,CAAC,QAAQ,KAAK,SAAS,EAAE,CAAC;oBAClC,IAAI,QAAQ,CAAC,QAAQ,KAAK,MAAM,CAAC,QAAQ,EACvC,MAAM,IAAI,KAAK,CACb,CAAA,eAAA,EAAkB,MAAM,CAAC,UAAU,CAAA,CAAA,EAAI,MAAM,CAAC,QAAQ,CAAA,mCAAA,EAAsC,QAAQ,CAAC,QAAQ,EAAE,CAChH,CAAC;gBACN,CAAC;gBACD,gBAAgB,CAAC,OAAO,CAAC,WAAW,CAAC,GAAG;oBACtC,GAAG,QAAQ;oBACX,GAAG;wBACD,CAAC,oQAAkB,CAAC,EAAE;+BACf,QAAgB,CAAC,oQAAkB,CAAC,IAAI,EAAE,CAAC;4BAChD,MAAM;yBACP;qBACF;oBACD,MAAM,EAAE,MAAM,CAAC,MAAM;oBACrB,QAAQ,EAAE,MAAM,CAAC,QAAQ;oBACzB,OAAO,EAAE,MAAM,CAAC,OAAO;oBACvB,QAAQ,EAAE,MAAM,CAAC,QAAQ;iBAC1B,CAAC;YACJ,CAAC,MAAM,CAAC;gBACN,MAAM,IAAI,KAAK,CACb,CAAA,UAAA,EAAa,MAAM,CAAC,UAAU,CAAA,CAAA,EAAI,MAAM,CAAC,QAAQ,CAAA,+BAAA,CAAiC,CACnF,CAAC;YACJ,CAAC;QACH,CAAC,MAAM,CAAC;YACN,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;YACzB,MAAM,OAAO,GAAG,CACd,OAAO,MAAM,CAAC,OAAO,KAAK,QAAQ,GAC9B;gBAAC;oBAAE,IAAI,EAAE,MAAe;oBAAE,IAAI,EAAE,MAAM,CAAC,OAAO;gBAAA,CAAE;aAAC,GACjD,MAAM,CAAC,OAAO,CACnB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAG,CAAD,AAAE;oBACZ,GAAG,CAAC;oBACJ,GAAG;wBAAE,CAAC,oQAAkB,CAAC,EAAE;4BAAC,MAAM;yBAAC;oBAAA,CAAE;iBACtC,CAAC,CAAC,CAAC;YACJ,OAAQ,IAAI,EAAE,CAAC;gBACb,KAAK,QAAQ,CAAC;gBACd,KAAK,MAAM;oBACT,OAAO;wBACL,GAAG,MAAM;wBACT,OAAO;qBACR,CAAC;gBACJ,KAAK,WAAW;oBACd,IAAI,gBAAgB,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;wBAC1C,gBAAgB,CAAC,EAAE,GAAG,MAAM,CAAC,EAAE,CAAC;wBAChC,gBAAgB,CAAC,SAAS,KAAK,MAAM,CAAC,SAAS,CAAC;wBAChD,gBAAgB,CAAC,MAAM,KAAK,MAAM,CAAC,MAAM,CAAC;wBAE1C,IAAI,MAAM,CAAC,WAAW,EAAE,CAAC;4BACvB,gBAAgB,CAAC,WAAW,GAAG;mCACzB,gBAAgB,CAAC,WAAW,IAAI,EAAE,CAAC;mCACpC,MAAM,CAAC,WAAW;6BACtB,CAAC;wBACJ,CAAC;wBAED,IAAI,MAAM,CAAC,QAAQ,EAAE,CAAC;4BACpB,gBAAgB,CAAC,QAAQ,KAAK,CAAA,CAAE,CAAC;4BACjC,IAAI,MAAM,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;gCACnC,gBAAgB,CAAC,QAAQ,CAAC,cAAc,GACtC,MAAM,CAAC,QAAQ,CAAC,cAAc,CAAC;4BACnC,CAAC;4BACD,IAAI,MAAM,CAAC,QAAQ,CAAC,oBAAoB,EAAE,CAAC;gCACzC,gBAAgB,CAAC,QAAQ,CAAC,oBAAoB,GAAG;uCAC3C,gBAAgB,CAAC,QAAQ,CAAC,oBAAoB,IAAI,EAAE,CAAC;uCACtD,MAAM,CAAC,QAAQ,CAAC,oBAAoB;iCACxC,CAAC;4BACJ,CAAC;4BACD,IAAI,MAAM,CAAC,QAAQ,CAAC,aAAa,EAAE,CAAC;gCAClC,gBAAgB,CAAC,QAAQ,CAAC,aAAa,GAAG;uCACpC,gBAAgB,CAAC,QAAQ,CAAC,aAAa,IAAI,EAAE,CAAC;uCAC/C,MAAM,CAAC,QAAQ,CAAC,aAAa;iCACjC,CAAC;4BACJ,CAAC;4BACD,IAAI,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;gCAC1B,gBAAgB,CAAC,QAAQ,CAAC,KAAK,GAAG;uCAC5B,gBAAgB,CAAC,QAAQ,CAAC,KAAK,IAAI,EAAE,CAAC;uCACvC,MAAM,CAAC,QAAQ,CAAC,KAAK;iCACzB,CAAC;4BACJ,CAAC;4BACD,IAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;gCAC3B,gBAAgB,CAAC,QAAQ,CAAC,MAAM,GAAG;oCACjC,GAAI,AAAD,gBAAiB,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAA,CAAE,CAAC;oCAC3C,GAAG,MAAM,CAAC,QAAQ,CAAC,MAAM;iCAC1B,CAAC;4BACJ,CAAC;4BAED,IAAI,MAAM,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC;gCACtC,gBAAgB,CAAC,QAAQ,CAAC,iBAAiB,GACzC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC;4BACtC,CAAC;wBACH,CAAC;oBACD,yBAAyB;oBAC3B,CAAC;oBAED,gEAAgE;oBAChE,KAAK,MAAM,IAAI,IAAI,OAAO,CAAE,CAAC;wBAC3B,IACE,IAAI,CAAC,IAAI,KAAK,WAAW,IACzB,UAAU,IAAI,IAAI,IAClB,IAAI,CAAC,QAAQ,EACb,CAAC;4BACD,MAAM,WAAW,GAAG,gBAAgB,CAAC,OAAO,CAAC,SAAS,CACpD,CAAC,CAAC,EAAE,CACF,CADI,AACH,CAAC,IAAI,KAAK,WAAW,IACtB,UAAU,IAAI,CAAC,IACf,CAAC,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ,CAC/B,CAAC;4BACF,IAAI,WAAW,KAAK,CAAC,CAAC,EAAE,CAAC;gCACvB,MAAM,QAAQ,GAAG,gBAAgB,CAAC,OAAO,CACvC,WAAW,CACG,CAAC;gCACjB,gBAAgB,CAAC,OAAO,CAAC,WAAW,CAAC,GAAG;oCACtC,GAAG,QAAQ;oCACX,IAAI,EAAE,GAAG,QAAQ,CAAC,IAAI,CAAA,IAAA,EAAO,IAAI,CAAC,IAAI,EAAE;oCACxC,GAAG;wCACD,CAAC,oQAAkB,CAAC,EAAE;+CACf,QAAgB,CAAC,oQAAkB,CAAC,IAAI,EAAE,CAAC;+CAC3C,IAAY,CAAC,oQAAkB,CAAC,IAAI,EAAE,CAAC;yCAC7C;qCACF;iCACF,CAAC;gCACF,SAAS;4BACX,CAAC;wBACH,CAAC;wBACD,gBAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACtC,CAAC;oBACD,MAAM;gBACR,OAAO,CAAC;oBAAC,CAAC;wBACR,MAAM,eAAe,GAAU,IAAI,CAAC;wBACpC,MAAM,IAAI,KAAK,CAAC,CAAA,sBAAA,EAAyB,eAAe,EAAE,CAAC,CAAC;oBAC9D,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IACD,OAAO,gBAAgB,CAAC;AAC1B,CAAC,CAAC;AAEF,MAAM,qBAAqB,GAAG,CAC5B,eAAoC,EACpC,YAAwC,EACxC,EAAE;IACF,MAAM,OAAO,GAAqB,EAAE,CAAC;IACrC,IAAI,WAAW,GAAG,KAAK,CAAC;IACxB,IAAI,WAAW,GAAG,KAAK,CAAC,CAAC,iEAAiE;IAC1F,IAAI,MAAM,GAAQ,EAAE,CAAC;IACrB,IAAI,OAAO,GAA0C,EAAE,CAAC;IAExD,MAAM,KAAK,GAAG,GAAG,EAAE;QACjB,IAAI,OAAO,CAAC,MAAM,EAAE,CAAC;YACnB,OAAO,CAAC,IAAI,CAAC;gBACX,MAAM;gBACN,OAAO;aACR,CAAC,CAAC;QACL,CAAC;QACD,MAAM,GAAG,EAAE,CAAC;QACZ,OAAO,GAAG,EAAE,CAAC;QACb,WAAW,GAAG,KAAK,CAAC;QACpB,WAAW,GAAG,KAAK,CAAC;IACtB,CAAC,CAAC;IAEF,KAAK,MAAM,cAAc,IAAI,eAAe,CAAE,CAAC;QAC7C,KAAK,MAAM,MAAM,IAAI,cAAc,CAAC,OAAO,CAAE,CAAC;YAC5C,IACE,AAAC,WAAW,IAAI,MAAM,CAAC,IAAI,KAAK,MAAM,CAAC,GACvC,CAAC,WAAW,IACZ,MAAM,CAAC,IAAI,KAAK,MAAM,IACtB,MAAM,CAAC,IAAI,KAAK,QAAQ,EACxB,CAAC;gBACD,KAAK,EAAE,CAAC;YACV,CAAC;YACD,WAAW,GAAG,MAAM,CAAC,IAAI,KAAK,WAAW,IAAI,MAAM,CAAC,IAAI,KAAK,MAAM,CAAC;YAEpE,IAAI,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,cAAc,CAAC,KAAK,EAAE,CAAC;gBAC3C,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;YACpC,CAAC;YACD,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAErB,IACE,MAAM,CAAC,IAAI,KAAK,WAAW,IAC3B,CAAC,MAAM,CAAC,aAAa,EAAE,YAAY,KAAK,MAAM,IAC5C,YAAY,KAAK,MAAM,CAAC,EAC1B,CAAC;gBACD,WAAW,GAAG,IAAI,CAAC;YACrB,CAAC;QACH,CAAC;IACH,CAAC;IACD,KAAK,EAAE,CAAC;IACR,OAAO,OAAO,CAAC;AACjB,CAAC,CAAC;AAEF,SAAS,2BAA2B,CAClC,KAAwB;IAExB,OAAO,MAAM,CAAC,MAAM,CAClB;QACE,EAAE,MAAE,mMAAsB,EAAE;QAC5B,IAAI,EAAE,WAAW;QACjB,OAAO,EAAE,EAAE;QACX,MAAM,EAAE;YAAE,IAAI,EAAE,YAAY;YAAE,MAAM,EAAE,OAAO;YAAE,KAAK;QAAA,CAAE;QACtD,SAAS,EAAE,IAAI,IAAI,EAAE;QACrB,QAAQ,EAAE;YACR,cAAc,EAAE,IAAI;YACpB,oBAAoB,EAAE,EAAE;YACxB,aAAa,EAAE,EAAE;YACjB,MAAM,EAAE,CAAA,CAAE;YACV,KAAK,EAAE,EAAE;SACV;KACF,EACD;QAAE,CAAC,oQAAkB,CAAC,EAAE,EAAE;IAAA,CAAE,CAC7B,CAAC;AACJ,CAAC;AAEM,MAAM,uBAAuB,GAAG,CACrC,QAAa,EACb,QAAiD,EACjD,SAAkB,EAClB,QAA8C,EAC9C,EAAE;IACF,MAAM,eAAe,GAAwB,EAAE,CAAC;IAChD,KAAK,MAAM,OAAO,IAAI,QAAQ,CAAE,CAAC;QAC/B,MAAM,MAAM,GAAG,QAAQ,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;QAC3C,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YAAC,MAAM;SAAC,CAAC;QAC1D,MAAM,MAAM,GAAG;YAAE,KAAK,EAAE,OAAO;YAAE,OAAO;QAAA,CAAE,CAAC;QAC3C,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC/B,CAAC;IAED,MAAM,MAAM,GAAG,qBAAqB,CAAC,eAAe,CAAC,CAAC;IAEtD,MAAM,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,GAAG,EAAE,EAAE;QACzC,MAAM,MAAM,GAAG,GAAG,KAAK,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;QACzC,MAAM,MAAM,GAAG,oBAAoB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACrD,MAAM,mBAAmB,GACvB,OAAO,MAAM,CAAC,OAAO,KAAK,QAAQ,IAClC,MAAM,CAAC,OAAO,CAAC,IAAI,CACjB,CAAC,CAAC,EAAE,CAAG,CAAD,AAAE,CAAC,IAAI,KAAK,WAAW,IAAI,CAAC,CAAC,MAAM,KAAK,SAAS,CACxD,CAAC;QACJ,MAAM,UAAU,OAAG,sPAAa,EAC9B,MAAM,EACN,SAAS,EACT,mBAAmB,EACnB,mBAAmB,EACnB,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,CACpC,CAAC;QACF,MAAM,UAAU,GAAG,qQAAqB,EACtC,MAAM,EACN,GAAG,CAAC,QAAQ,EAAE,EACd,UAAU,CACX,CAAC;QACD,UAAkB,CAAC,oQAAkB,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC;QACzD,OAAO,UAAU,CAAC;IACpB,CAAC,CAAC,CAAC;IAEH,IAAI,QAAQ,CAAC,KAAK,EAAE,CAAC;QACnB,MAAM,WAAW,GAAG,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAClC,IAAI,CAAC,WAAW,IAAI,WAAW,CAAC,IAAI,KAAK,WAAW,EAAE,CAAC;YACrD,MAAM,CAAC,IAAI,CAAC,2BAA2B,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;QAC3D,CAAC;IACH,CAAC;IAED,OAAO,MAAM,CAAC;AAChB,CAAC,CAAC;AAEK,MAAM,2BAA2B,GAAG,CAAoB,EAC7D,QAAQ,EACR,QAAQ,EACR,SAAS,EACT,YAAY,EACZ,QAAQ,EAOT,EAAE,EAAE;IACH,MAAM,KAAK,OAAG,wKAAO;sDACnB,GAAG,CAAG,CAAD,AAAE;gBACL,QAAQ,EAAE,QAAQ,IAAI,CAAA,CAAE;gBACxB,QAAQ;gBACR,aAAa,EAAE,IAAI,OAAO,EAAwB;gBAClD,UAAU,EAAE,IAAI,OAAO,EAGpB;gBACH,cAAc,EAAE,IAAI,uQAAsB,EAAE;aAC7C,CAAC;qDACF;QAAC,QAAQ;QAAE,QAAQ;KAAC,CACrB,CAAC;IAEF,WAAO,wKAAO;+CAAC,GAAG,EAAE;YAClB,MAAM,eAAe,GAAwB,EAAE,CAAC;YAChD,KAAK,MAAM,OAAO,IAAI,QAAQ,CAAE,CAAC;gBAC/B,IAAI,MAAM,GAAG,KAAK,CAAC,aAAa,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;gBAC9C,IAAI,CAAC,MAAM,EAAE,CAAC;oBACZ,MAAM,MAAM,GAAG,KAAK,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC;oBACvD,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;wBAAC,MAAM;qBAAC,CAAC;oBAC1D,MAAM,GAAG;wBAAE,KAAK,EAAE,OAAO;wBAAE,OAAO;oBAAA,CAAE,CAAC;oBACrC,KAAK,CAAC,aAAa,CAAC,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;gBAC3C,CAAC;gBACD,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC/B,CAAC;YAED,MAAM,MAAM,GAAG,qBAAqB,CAAC,eAAe,EAAE,YAAY,CAAC,CAAC,GAAG;8DACrE,CAAC,CAAC,EAAE,EAAE;oBACJ,MAAM,GAAG,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oBACzB,IAAI,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;oBAEnB,MAAM,MAAM,GAAG,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBACzC,IAAI,MAAM,IAAI,iBAAiB,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC,OAAO,CAAC,EACxD,OAAO,MAAM,CAAC;oBAChB,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;oBAC7B,OAAO,CAAC,CAAC;gBACX,CAAC,CACF,CAAC;;YAEF,MAAM,cAAc,GAAG,KAAK,CAAC,cAAc,CAAC,eAAe,CACzD,MAAM;sEACN,CAAC,KAAK,EAAE,OAAO,EAAE,GAAG,EAAE,EAAE;oBACtB,MAAM,MAAM,GAAG,GAAG,KAAK,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;oBAEzC,MAAM,MAAM,GAAG,oBAAoB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;oBACrD,MAAM,qBAAqB,GACzB,OAAO,MAAM,CAAC,OAAO,KAAK,QAAQ,IAClC,MAAM,CAAC,OAAO,CAAC,IAAI;8EACjB,CAAC,CAAC,EAAE,CAAG,CAAD,AAAE,CAAC,IAAI,KAAK,WAAW,IAAI,CAAC,CAAC,MAAM,KAAK,SAAS,CACxD,CAAC;;oBACJ,MAAM,mBAAmB,GACvB,OAAO,MAAM,CAAC,OAAO,KAAK,QAAQ,IAClC,MAAM,CAAC,OAAO,CAAC,IAAI;8EACjB,CAAC,CAAC,EAAE,CAAG,CAAD,AAAE,CAAC,IAAI,KAAK,WAAW,IAAI,CAAC,CAAC,MAAM,KAAK,SAAS,CACxD,CAAC;;oBACJ,MAAM,UAAU,OAAG,sPAAa,EAC9B,MAAM,EACN,SAAS,EACT,qBAAqB,EACrB,mBAAmB,EACnB,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,CAC1C,CAAC;oBAEF,IACE,KAAK,IACL,CAAC,KAAK,CAAC,IAAI,KAAK,WAAW,IACzB,KAAC,qPAAY,EAAC,KAAK,CAAC,MAAM,CAAC,IAC3B,KAAK,CAAC,MAAM,KAAK,UAAU,CAAC,EAC9B,CAAC;wBACD,MAAM,MAAM,OAAG,0QAAwB,EAAI,KAAK,CAAC,CAAC;wBAClD,IAAI,iBAAiB,CAAC,MAAM,EAAE,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC;4BAC9C,OAAO,KAAK,CAAC;wBACf,CAAC;oBACH,CAAC;oBAED,MAAM,UAAU,OAAG,iQAAqB,EACtC,MAAM,EACN,GAAG,CAAC,QAAQ,EAAE,EACd,UAAU,CACX,CAAC;oBACD,UAAkB,CAAC,oQAAkB,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC;oBACzD,OAAO,UAAU,CAAC;gBACpB,CAAC,CACF,CAAC;;YAED,cAA2D,CAC1D,oQAAkB,CACnB,GAAG,QAAQ,CAAC;YAEb,IAAI,KAAK,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;gBACzB,MAAM,WAAW,GAAG,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC1C,IAAI,CAAC,WAAW,IAAI,WAAW,CAAC,IAAI,KAAK,WAAW,EAAE,CAAC;oBACrD,cAAc,CAAC,IAAI,CAAC,2BAA2B,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;gBACzE,CAAC;YACH,CAAC;YAED,OAAO,cAAc,CAAC;QACxB,CAAC;8CAAE;QAAC,KAAK;QAAE,QAAQ;QAAE,SAAS;QAAE,YAAY;KAAC,CAAC,CAAC;AACjD,CAAC,CAAC;AAEF,MAAM,iBAAiB,GAAG,CAAC,CAAY,EAAE,CAAY,EAAE,EAAE;IACvD,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,MAAM,EAAE,OAAO,KAAK,CAAC;IACxC,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,CAAE,CAAC;QAClC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,OAAO,KAAK,CAAC;IAClC,CAAC;IACD,OAAO,IAAI,CAAC;AACd,CAAC,CAAC"}},
    {"offset": {"line": 7104, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/legacy-runtime/runtime-cores/external-store/createMessageConverter.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/createMessageConverter.tsx"],"sourcesContent":["\"use client\";\nimport { ThreadState } from \"../../runtime\";\nimport { useAui, useAuiState } from \"@assistant-ui/store\";\nimport { ThreadMessage } from \"../../../types\";\nimport {\n  useExternalMessageConverter,\n  convertExternalMessages,\n} from \"./external-message-converter\";\nimport { getExternalStoreMessages } from \"./getExternalStoreMessage\";\n\nexport const createMessageConverter = <T extends object>(\n  callback: useExternalMessageConverter.Callback<T>,\n) => {\n  const result = {\n    useThreadMessages: ({\n      messages,\n      isRunning,\n      joinStrategy,\n      metadata,\n    }: {\n      messages: T[];\n      isRunning: boolean;\n      joinStrategy?: \"concat-content\" | \"none\" | undefined;\n      metadata?: useExternalMessageConverter.Metadata;\n    }) => {\n      return useExternalMessageConverter<T>({\n        callback,\n        messages,\n        isRunning,\n        joinStrategy,\n        metadata,\n      });\n    },\n    toThreadMessages: (\n      messages: T[],\n      isRunning = false,\n      metadata: useExternalMessageConverter.Metadata = {},\n    ) => {\n      return convertExternalMessages(messages, callback, isRunning, metadata);\n    },\n    toOriginalMessages: (\n      input: ThreadState | ThreadMessage | ThreadMessage[\"content\"][number],\n    ) => {\n      const messages = getExternalStoreMessages(input);\n      if (messages.length === 0) throw new Error(\"No original messages found\");\n      return messages;\n    },\n    toOriginalMessage: (\n      input: ThreadState | ThreadMessage | ThreadMessage[\"content\"][number],\n    ) => {\n      const messages = result.toOriginalMessages(input);\n      return messages[0]!;\n    },\n    useOriginalMessage: () => {\n      const messageMessages = result.useOriginalMessages();\n      const first = messageMessages[0]!;\n      return first;\n    },\n    useOriginalMessages: () => {\n      const aui = useAui();\n      const partMessages = useAuiState((s) => {\n        if (aui.part.source) return getExternalStoreMessages(s.part);\n        return undefined;\n      });\n\n      const messageMessages = useAuiState<T[]>((s) =>\n        getExternalStoreMessages(s.message),\n      );\n\n      const messages = partMessages ?? messageMessages;\n      if (messages.length === 0) throw new Error(\"No original messages found\");\n      return messages;\n    },\n  };\n\n  return result;\n};\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAAE,MAAM,EAAE,WAAW,EAAE,MAAM,qBAAqB,CAAC;;AAE1D,OAAO,EACL,2BAA2B,EAC3B,uBAAuB,GACxB,wCAAqC;AACtC,OAAO,EAAE,wBAAwB,EAAE,qCAAkC;AARrE,YAAY,CAAC;;;;AAUN,MAAM,sBAAsB,GAAG,CACpC,QAAiD,EACjD,EAAE;IACF,MAAM,MAAM,GAAG;QACb,iBAAiB,EAAE,CAAC,EAClB,QAAQ,EACR,SAAS,EACT,YAAY,EACZ,QAAQ,EAMT,EAAE,EAAE;YACH,OAAO,0RAA2B,EAAI;gBACpC,QAAQ;gBACR,QAAQ;gBACR,SAAS;gBACT,YAAY;gBACZ,QAAQ;aACT,CAAC,CAAC;QACL,CAAC;QACD,gBAAgB,EAAE,CAChB,QAAa,EACb,SAAS,GAAG,KAAK,EACjB,WAAiD,CAAA,CAAE,EACnD,EAAE;YACF,WAAO,kRAAuB,EAAC,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;QAC1E,CAAC;QACD,kBAAkB,EAAE,CAClB,KAAqE,EACrE,EAAE;YACF,MAAM,QAAQ,OAAG,0QAAwB,EAAC,KAAK,CAAC,CAAC;YACjD,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;YACzE,OAAO,QAAQ,CAAC;QAClB,CAAC;QACD,iBAAiB,EAAE,CACjB,KAAqE,EACrE,EAAE;YACF,MAAM,QAAQ,GAAG,MAAM,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;YAClD,OAAO,QAAQ,CAAC,CAAC,CAAE,CAAC;QACtB,CAAC;QACD,kBAAkB,EAAE,GAAG,EAAE;YACvB,MAAM,eAAe,GAAG,MAAM,CAAC,mBAAmB,EAAE,CAAC;YACrD,MAAM,KAAK,GAAG,eAAe,CAAC,CAAC,CAAE,CAAC;YAClC,OAAO,KAAK,CAAC;QACf,CAAC;QACD,mBAAmB,EAAE,GAAG,EAAE;YACxB,MAAM,GAAG,OAAG,yKAAM,EAAE,CAAC;YACrB,MAAM,YAAY,OAAG,mLAAW;oEAAC,CAAC,CAAC,EAAE,EAAE;oBACrC,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,WAAO,0QAAwB,EAAC,CAAC,CAAC,IAAI,CAAC,CAAC;oBAC7D,OAAO,SAAS,CAAC;gBACnB,CAAC,CAAC,CAAC;;YAEH,MAAM,eAAe,OAAG,mLAAW;uEAAM,CAAC,CAAC,EAAE,EAAE,GAC7C,0QAAwB,EAAC,CAAC,CAAC,OAAO,CAAC,CACpC,CAAC;;YAEF,MAAM,QAAQ,GAAG,YAAY,IAAI,eAAe,CAAC;YACjD,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;YACzE,OAAO,QAAQ,CAAC;QAClB,CAAC;KACF,CAAC;IAEF,OAAO,MAAM,CAAC;AAChB,CAAC,CAAC"}},
    {"offset": {"line": 7175, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadListItemMore/index.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadListItemMore/index.ts"],"sourcesContent":["export { ThreadListItemMorePrimitiveRoot as Root } from \"./ThreadListItemMoreRoot\";\nexport { ThreadListItemMorePrimitiveTrigger as Trigger } from \"./ThreadListItemMoreTrigger\";\nexport { ThreadListItemMorePrimitiveContent as Content } from \"./ThreadListItemMoreContent\";\nexport { ThreadListItemMorePrimitiveItem as Item } from \"./ThreadListItemMoreItem\";\nexport { ThreadListItemMorePrimitiveSeparator as Separator } from \"./ThreadListItemMoreSeparator\";\n"],"names":[],"mappings":""}},
    {"offset": {"line": 7186, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadListItemMore/scope.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadListItemMore/scope.tsx"],"sourcesContent":["import * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport type { Scope } from \"@radix-ui/react-context\";\n\nexport const useDropdownMenuScope: ReturnType<\n  typeof DropdownMenuPrimitive.createDropdownMenuScope\n> = DropdownMenuPrimitive.createDropdownMenuScope();\n\nexport type ScopedProps<P> = P & { __scopeThreadListItemMore?: Scope };\n"],"names":[],"mappings":";;;;AAAA,OAAO,KAAK,qBAAqB,MAAM,+BAA+B,CAAC;;AAGhE,MAAM,oBAAoB,GAE7B,qBAAqB,CAAC,oLAAuB,EAAE,CAAC"}},
    {"offset": {"line": 7197, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadListItemMore/ThreadListItemMoreRoot.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadListItemMore/ThreadListItemMoreRoot.tsx"],"sourcesContent":["\"use client\";\n\nimport { FC } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ThreadListItemMorePrimitiveRoot {\n  export type Props = DropdownMenuPrimitive.DropdownMenuProps;\n}\n\nexport const ThreadListItemMorePrimitiveRoot: FC<\n  ThreadListItemMorePrimitiveRoot.Props\n> = ({\n  __scopeThreadListItemMore,\n  ...rest\n}: ScopedProps<ThreadListItemMorePrimitiveRoot.Props>) => {\n  const scope = useDropdownMenuScope(__scopeThreadListItemMore);\n\n  return <DropdownMenuPrimitive.Root {...scope} {...rest} />;\n};\n\nThreadListItemMorePrimitiveRoot.displayName =\n  \"ThreadListItemMorePrimitive.Root\";\n"],"names":[],"mappings":";;;;;AAGA,OAAO,KAAK,qBAAqB,MAAM,+BAA+B,CAAC;AACvE,OAAO,EAAe,oBAAoB,EAAE,mBAAgB;AAJ5D,YAAY,CAAC;;;;AAUN,MAAM,+BAA+B,GAExC,CAAC,EACH,yBAAyB,EACzB,GAAG,IAAI,EAC4C,EAAE,EAAE;IACvD,MAAM,KAAK,OAAG,0NAAoB,EAAC,yBAAyB,CAAC,CAAC;IAE9D,WAAO,6KAAA,EAAC,qBAAqB,CAAC,iKAAI,EAAA;QAAA,GAAK,KAAK;QAAA,GAAM,IAAI;IAAA,EAAI,CAAC;AAC7D,CAAC,CAAC;AAEF,+BAA+B,CAAC,WAAW,GACzC,kCAAkC,CAAC"}},
    {"offset": {"line": 7220, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadListItemMore/ThreadListItemMoreTrigger.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadListItemMore/ThreadListItemMoreTrigger.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ThreadListItemMorePrimitiveTrigger {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Trigger>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Trigger\n  >;\n}\n\nexport const ThreadListItemMorePrimitiveTrigger = forwardRef<\n  ThreadListItemMorePrimitiveTrigger.Element,\n  ThreadListItemMorePrimitiveTrigger.Props\n>(\n  (\n    {\n      __scopeThreadListItemMore,\n      ...rest\n    }: ScopedProps<ThreadListItemMorePrimitiveTrigger.Props>,\n    ref,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeThreadListItemMore);\n\n    return <DropdownMenuPrimitive.Trigger {...scope} {...rest} ref={ref} />;\n  },\n);\n\nThreadListItemMorePrimitiveTrigger.displayName =\n  \"ThreadListItemMorePrimitive.Trigger\";\n"],"names":[],"mappings":";;;;;AAEA,OAAO,EAA0C,UAAU,EAAE,MAAM,OAAO,CAAC;AAC3E,OAAO,KAAK,qBAAqB,MAAM,+BAA+B,CAAC;AACvE,OAAO,EAAe,oBAAoB,EAAE,mBAAgB;AAJ5D,YAAY,CAAC;;;;;AAaN,MAAM,kCAAkC,OAAG,2KAAU,EAI1D,CACE,EACE,yBAAyB,EACzB,GAAG,IAAI,EAC+C,EACxD,GAAG,EACH,EAAE;IACF,MAAM,KAAK,OAAG,0NAAoB,EAAC,yBAAyB,CAAC,CAAC;IAE9D,WAAO,6KAAA,EAAC,qBAAqB,CAAC,oKAAO,EAAA;QAAA,GAAK,KAAK;QAAA,GAAM,IAAI;QAAE,GAAG,EAAE,GAAG;IAAA,EAAI,CAAC;AAC1E,CAAC,CACF,CAAC;AAEF,kCAAkC,CAAC,WAAW,GAC5C,qCAAqC,CAAC"}},
    {"offset": {"line": 7246, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadListItemMore/ThreadListItemMoreContent.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadListItemMore/ThreadListItemMoreContent.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ThreadListItemMorePrimitiveContent {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Content>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Content\n  > & {\n    portalProps?:\n      | ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Portal>\n      | undefined;\n  };\n}\n\nexport const ThreadListItemMorePrimitiveContent = forwardRef<\n  ThreadListItemMorePrimitiveContent.Element,\n  ThreadListItemMorePrimitiveContent.Props\n>(\n  (\n    {\n      __scopeThreadListItemMore,\n      portalProps,\n      sideOffset = 4,\n      ...props\n    }: ScopedProps<ThreadListItemMorePrimitiveContent.Props>,\n    forwardedRef,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeThreadListItemMore);\n\n    return (\n      <DropdownMenuPrimitive.Portal {...scope} {...portalProps}>\n        <DropdownMenuPrimitive.Content\n          {...scope}\n          {...props}\n          ref={forwardedRef}\n          sideOffset={sideOffset}\n        />\n      </DropdownMenuPrimitive.Portal>\n    );\n  },\n);\n\nThreadListItemMorePrimitiveContent.displayName =\n  \"ThreadListItemMorePrimitive.Content\";\n"],"names":[],"mappings":";;;;;AAEA,OAAO,EAA0C,UAAU,EAAE,MAAM,OAAO,CAAC;AAC3E,OAAO,KAAK,qBAAqB,MAAM,+BAA+B,CAAC;AACvE,OAAO,EAAe,oBAAoB,EAAE,mBAAgB;AAJ5D,YAAY,CAAC;;;;;AAiBN,MAAM,kCAAkC,OAAG,2KAAU,EAI1D,CACE,EACE,yBAAyB,EACzB,WAAW,EACX,UAAU,GAAG,CAAC,EACd,GAAG,KAAK,EAC8C,EACxD,YAAY,EACZ,EAAE;IACF,MAAM,KAAK,OAAG,0NAAoB,EAAC,yBAAyB,CAAC,CAAC;IAE9D,OAAO,IACL,6KAAA,EAAC,qBAAqB,CAAC,mKAAM,EAAA;QAAA,GAAK,KAAK;QAAA,GAAM,WAAW;QAAA,cACtD,6KAAA,EAAC,qBAAqB,CAAC,oKAAO,EAAA;YAAA,GACxB,KAAK;YAAA,GACL,KAAK;YACT,GAAG,EAAE,YAAY;YACjB,UAAU,EAAE,UAAU;QAAA,EACtB;IAAA,EAC2B,CAChC,CAAC;AACJ,CAAC,CACF,CAAC;AAEF,kCAAkC,CAAC,WAAW,GAC5C,qCAAqC,CAAC"}},
    {"offset": {"line": 7277, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadListItemMore/ThreadListItemMoreItem.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadListItemMore/ThreadListItemMoreItem.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ThreadListItemMorePrimitiveItem {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Item>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Item\n  >;\n}\n\nexport const ThreadListItemMorePrimitiveItem = forwardRef<\n  ThreadListItemMorePrimitiveItem.Element,\n  ThreadListItemMorePrimitiveItem.Props\n>(\n  (\n    {\n      __scopeThreadListItemMore,\n      ...rest\n    }: ScopedProps<ThreadListItemMorePrimitiveItem.Props>,\n    ref,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeThreadListItemMore);\n\n    return <DropdownMenuPrimitive.Item {...scope} {...rest} ref={ref} />;\n  },\n);\n\nThreadListItemMorePrimitiveItem.displayName =\n  \"ThreadListItemMorePrimitive.Item\";\n"],"names":[],"mappings":";;;;;AAEA,OAAO,EAA0C,UAAU,EAAE,MAAM,OAAO,CAAC;AAC3E,OAAO,KAAK,qBAAqB,MAAM,+BAA+B,CAAC;AACvE,OAAO,EAAe,oBAAoB,EAAE,mBAAgB;AAJ5D,YAAY,CAAC;;;;;AAaN,MAAM,+BAA+B,OAAG,2KAAU,EAIvD,CACE,EACE,yBAAyB,EACzB,GAAG,IAAI,EAC4C,EACrD,GAAG,EACH,EAAE;IACF,MAAM,KAAK,OAAG,0NAAoB,EAAC,yBAAyB,CAAC,CAAC;IAE9D,WAAO,6KAAA,EAAC,qBAAqB,CAAC,iKAAI,EAAA;QAAA,GAAK,KAAK;QAAA,GAAM,IAAI;QAAE,GAAG,EAAE,GAAG;IAAA,EAAI,CAAC;AACvE,CAAC,CACF,CAAC;AAEF,+BAA+B,CAAC,WAAW,GACzC,kCAAkC,CAAC"}},
    {"offset": {"line": 7303, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadListItemMore/ThreadListItemMoreSeparator.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadListItemMore/ThreadListItemMoreSeparator.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ThreadListItemMorePrimitiveSeparator {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Separator>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Separator\n  >;\n}\n\nexport const ThreadListItemMorePrimitiveSeparator = forwardRef<\n  ThreadListItemMorePrimitiveSeparator.Element,\n  ThreadListItemMorePrimitiveSeparator.Props\n>(\n  (\n    {\n      __scopeThreadListItemMore,\n      ...rest\n    }: ScopedProps<ThreadListItemMorePrimitiveSeparator.Props>,\n    ref,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeThreadListItemMore);\n\n    return <DropdownMenuPrimitive.Separator {...scope} {...rest} ref={ref} />;\n  },\n);\n\nThreadListItemMorePrimitiveSeparator.displayName =\n  \"ThreadListItemMorePrimitive.Separator\";\n"],"names":[],"mappings":";;;;;AAEA,OAAO,EAA0C,UAAU,EAAE,MAAM,OAAO,CAAC;AAC3E,OAAO,KAAK,qBAAqB,MAAM,+BAA+B,CAAC;AACvE,OAAO,EAAe,oBAAoB,EAAE,mBAAgB;AAJ5D,YAAY,CAAC;;;;;AAaN,MAAM,oCAAoC,OAAG,2KAAU,EAI5D,CACE,EACE,yBAAyB,EACzB,GAAG,IAAI,EACiD,EAC1D,GAAG,EACH,EAAE;IACF,MAAM,KAAK,OAAG,0NAAoB,EAAC,yBAAyB,CAAC,CAAC;IAE9D,WAAO,6KAAA,EAAC,qBAAqB,CAAC,sKAAS,EAAA;QAAA,GAAK,KAAK;QAAA,GAAM,IAAI;QAAE,GAAG,EAAE,GAAG;IAAA,EAAI,CAAC;AAC5E,CAAC,CACF,CAAC;AAEF,oCAAoC,CAAC,WAAW,GAC9C,uCAAuC,CAAC"}},
    {"offset": {"line": 7360, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadListItem/index.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadListItem/index.ts"],"sourcesContent":["export { ThreadListItemPrimitiveRoot as Root } from \"./ThreadListItemRoot\";\nexport { ThreadListItemPrimitiveArchive as Archive } from \"./ThreadListItemArchive\";\nexport { ThreadListItemPrimitiveUnarchive as Unarchive } from \"./ThreadListItemUnarchive\";\nexport { ThreadListItemPrimitiveDelete as Delete } from \"./ThreadListItemDelete\";\nexport { ThreadListItemPrimitiveTrigger as Trigger } from \"./ThreadListItemTrigger\";\nexport { ThreadListItemPrimitiveTitle as Title } from \"./ThreadListItemTitle\";\n"],"names":[],"mappings":""}},
    {"offset": {"line": 7372, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadListItem/ThreadListItemRoot.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadListItem/ThreadListItemRoot.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace ThreadListItemPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = PrimitiveDivProps;\n}\n\nexport const ThreadListItemPrimitiveRoot = forwardRef<\n  ThreadListItemPrimitiveRoot.Element,\n  ThreadListItemPrimitiveRoot.Props\n>((props, ref) => {\n  const isMain = useAuiState(\n    (s) => s.threads.mainThreadId === s.threadListItem.id,\n  );\n\n  return (\n    <Primitive.div\n      {...(isMain ? { \"data-active\": \"true\", \"aria-current\": \"true\" } : null)}\n      {...props}\n      ref={ref}\n    />\n  );\n});\n\nThreadListItemPrimitiveRoot.displayName = \"ThreadListItemPrimitive.Root\";\n"],"names":[],"mappings":";;;;;AAEA,OAAO,EAAE,SAAS,EAAE,MAAM,2BAA2B,CAAC;AACtD,OAAO,EAAqB,UAAU,EAA4B,MAAM,OAAO,CAAC;AAChF,OAAO,EAAE,WAAW,EAAE,MAAM,qBAAqB,CAAC;AAJlD,YAAY,CAAC;;;;;AAaN,MAAM,2BAA2B,OAAG,2KAAU,EAGnD,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE;IACf,MAAM,MAAM,OAAG,mLAAW;2DACxB,CAAC,CAAC,EAAE,CAAG,CAAD,AAAE,CAAC,OAAO,CAAC,YAAY,KAAK,CAAC,CAAC,cAAc,CAAC,EAAE,CACtD,CAAC;;IAEF,OAAO,IACL,6KAAA,EAAC,qLAAS,CAAC,GAAG,EAAA;QAAA,GACR,AAAC,MAAM,CAAC,CAAC,CAAC;YAAE,aAAa,EAAE,MAAM;YAAE,cAAc,EAAE,MAAM;QAAA,CAAE,CAAC,CAAC,CAAC,IAAI,CAAC;QAAA,GACnE,KAAK;QACT,GAAG,EAAE,GAAG;IAAA,EACR,CACH,CAAC;AACJ,CAAC,CAAC,CAAC;AAEH,2BAA2B,CAAC,WAAW,GAAG,8BAA8B,CAAC"}},
    {"offset": {"line": 7403, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/utils/createActionButton.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/utils/createActionButton.tsx"],"sourcesContent":["import {\n  ComponentRef,\n  forwardRef,\n  ComponentPropsWithoutRef,\n  MouseEventHandler,\n} from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\n\ntype ActionButtonCallback<TProps> = (\n  props: TProps,\n) => MouseEventHandler<HTMLButtonElement> | null;\n\ntype PrimitiveButtonProps = ComponentPropsWithoutRef<typeof Primitive.button>;\n\nexport type ActionButtonProps<THook> = PrimitiveButtonProps &\n  (THook extends (props: infer TProps) => unknown ? TProps : never);\n\nexport type ActionButtonElement = ComponentRef<typeof Primitive.button>;\n\nexport const createActionButton = <TProps,>(\n  displayName: string,\n  useActionButton: ActionButtonCallback<TProps>,\n  forwardProps: (keyof NonNullable<TProps>)[] = [],\n) => {\n  const ActionButton = forwardRef<\n    ActionButtonElement,\n    PrimitiveButtonProps & TProps\n  >((props, forwardedRef) => {\n    const forwardedProps = {} as TProps;\n    const primitiveProps = {} as PrimitiveButtonProps;\n\n    (Object.keys(props) as Array<keyof typeof props>).forEach((key) => {\n      if (forwardProps.includes(key as keyof TProps)) {\n        (forwardedProps as any)[key] = props[key];\n      } else {\n        (primitiveProps as any)[key] = props[key];\n      }\n    });\n\n    const callback = useActionButton(forwardedProps as TProps) ?? undefined;\n    return (\n      <Primitive.button\n        type=\"button\"\n        {...primitiveProps}\n        ref={forwardedRef}\n        disabled={primitiveProps.disabled || !callback}\n        onClick={composeEventHandlers(primitiveProps.onClick, callback)}\n      />\n    );\n  });\n\n  ActionButton.displayName = displayName;\n\n  return ActionButton;\n};\n"],"names":[],"mappings":";;;;;AAAA,OAAO,EAEL,UAAU,GAGX,MAAM,OAAO,CAAC;AACf,OAAO,EAAE,SAAS,EAAE,MAAM,2BAA2B,CAAC;AACtD,OAAO,EAAE,oBAAoB,EAAE,MAAM,qBAAqB,CAAC;;;;;AAapD,MAAM,kBAAkB,GAAG,CAChC,WAAmB,EACnB,eAA6C,EAC7C,eAA8C,EAAE,EAChD,EAAE;IACF,MAAM,YAAY,OAAG,2KAAU,EAG7B,CAAC,KAAK,EAAE,YAAY,EAAE,EAAE;QACxB,MAAM,cAAc,GAAG,CAAA,CAAY,CAAC;QACpC,MAAM,cAAc,GAAG,CAAA,CAA0B,CAAC;QAEjD,MAAM,CAAC,IAAI,CAAC,KAAK,CAA+B,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;YAChE,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAmB,CAAC,EAAE,CAAC;gBAC9C,cAAsB,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC;YAC5C,CAAC,MAAM,CAAC;gBACL,cAAsB,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC;YAC5C,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,MAAM,QAAQ,GAAG,eAAe,CAAC,cAAwB,CAAC,IAAI,SAAS,CAAC;QACxE,OAAO,IACL,6KAAA,EAAC,qLAAS,CAAC,MAAM,EAAA;YACf,IAAI,EAAC,QAAQ;YAAA,GACT,cAAc;YAClB,GAAG,EAAE,YAAY;YACjB,QAAQ,EAAE,cAAc,CAAC,QAAQ,IAAI,CAAC,QAAQ;YAC9C,OAAO,MAAE,uLAAoB,EAAC,cAAc,CAAC,OAAO,EAAE,QAAQ,CAAC;QAAA,EAC/D,CACH,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,YAAY,CAAC,WAAW,GAAG,WAAW,CAAC;IAEvC,OAAO,YAAY,CAAC;AACtB,CAAC,CAAC"}},
    {"offset": {"line": 7442, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadListItem/ThreadListItemArchive.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadListItem/ThreadListItemArchive.ts"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useAui } from \"@assistant-ui/store\";\nimport { useCallback } from \"react\";\n\nconst useThreadListItemArchive = () => {\n  const aui = useAui();\n  return useCallback(() => {\n    aui.threadListItem().archive();\n  }, [aui]);\n};\n\nexport namespace ThreadListItemPrimitiveArchive {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadListItemArchive>;\n}\n\nexport const ThreadListItemPrimitiveArchive = createActionButton(\n  \"ThreadListItemPrimitive.Archive\",\n  useThreadListItemArchive,\n);\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAGL,kBAAkB,GACnB,0CAAuC;AACxC,OAAO,EAAE,MAAM,EAAE,MAAM,qBAAqB,CAAC;AAC7C,OAAO,EAAE,WAAW,EAAE,MAAM,OAAO,CAAC;AARpC,YAAY,CAAC;;;;AAUb,MAAM,wBAAwB,GAAG,GAAG,EAAE;IACpC,MAAM,GAAG,OAAG,yKAAM,EAAE,CAAC;IACrB,WAAO,4KAAW;gDAAC,GAAG,EAAE;YACtB,GAAG,CAAC,cAAc,EAAE,CAAC,OAAO,EAAE,CAAC;QACjC,CAAC;+CAAE;QAAC,GAAG;KAAC,CAAC,CAAC;AACZ,CAAC,CAAC;AAOK,MAAM,8BAA8B,OAAG,0MAAkB,EAC9D,iCAAiC,EACjC,wBAAwB,CACzB,CAAC"}},
    {"offset": {"line": 7468, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadListItem/ThreadListItemUnarchive.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadListItem/ThreadListItemUnarchive.ts"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useAui } from \"@assistant-ui/store\";\nimport { useCallback } from \"react\";\n\nconst useThreadListItemUnarchive = () => {\n  const aui = useAui();\n  return useCallback(() => {\n    aui.threadListItem().unarchive();\n  }, [aui]);\n};\n\nexport namespace ThreadListItemPrimitiveUnarchive {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadListItemUnarchive>;\n}\n\nexport const ThreadListItemPrimitiveUnarchive = createActionButton(\n  \"ThreadListItemPrimitive.Unarchive\",\n  useThreadListItemUnarchive,\n);\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAGL,kBAAkB,GACnB,0CAAuC;AACxC,OAAO,EAAE,MAAM,EAAE,MAAM,qBAAqB,CAAC;AAC7C,OAAO,EAAE,WAAW,EAAE,MAAM,OAAO,CAAC;AARpC,YAAY,CAAC;;;;AAUb,MAAM,0BAA0B,GAAG,GAAG,EAAE;IACtC,MAAM,GAAG,OAAG,yKAAM,EAAE,CAAC;IACrB,WAAO,4KAAW;kDAAC,GAAG,EAAE;YACtB,GAAG,CAAC,cAAc,EAAE,CAAC,SAAS,EAAE,CAAC;QACnC,CAAC;iDAAE;QAAC,GAAG;KAAC,CAAC,CAAC;AACZ,CAAC,CAAC;AAOK,MAAM,gCAAgC,OAAG,0MAAkB,EAChE,mCAAmC,EACnC,0BAA0B,CAC3B,CAAC"}},
    {"offset": {"line": 7494, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadListItem/ThreadListItemDelete.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadListItem/ThreadListItemDelete.ts"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useAui } from \"@assistant-ui/store\";\nimport { useCallback } from \"react\";\n\nconst useThreadListItemDelete = () => {\n  const aui = useAui();\n  return useCallback(() => {\n    aui.threadListItem().delete();\n  }, [aui]);\n};\n\nexport namespace ThreadListItemPrimitiveDelete {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadListItemDelete>;\n}\n\nexport const ThreadListItemPrimitiveDelete = createActionButton(\n  \"ThreadListItemPrimitive.Delete\",\n  useThreadListItemDelete,\n);\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAGL,kBAAkB,GACnB,0CAAuC;AACxC,OAAO,EAAE,MAAM,EAAE,MAAM,qBAAqB,CAAC;AAC7C,OAAO,EAAE,WAAW,EAAE,MAAM,OAAO,CAAC;AARpC,YAAY,CAAC;;;;AAUb,MAAM,uBAAuB,GAAG,GAAG,EAAE;IACnC,MAAM,GAAG,OAAG,yKAAM,EAAE,CAAC;IACrB,WAAO,4KAAW;+CAAC,GAAG,EAAE;YACtB,GAAG,CAAC,cAAc,EAAE,CAAC,MAAM,EAAE,CAAC;QAChC,CAAC;8CAAE;QAAC,GAAG;KAAC,CAAC,CAAC;AACZ,CAAC,CAAC;AAOK,MAAM,6BAA6B,OAAG,0MAAkB,EAC7D,gCAAgC,EAChC,uBAAuB,CACxB,CAAC"}},
    {"offset": {"line": 7520, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadListItem/ThreadListItemTrigger.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadListItem/ThreadListItemTrigger.ts"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useAui } from \"@assistant-ui/store\";\nimport { useCallback } from \"react\";\n\nconst useThreadListItemTrigger = () => {\n  const aui = useAui();\n  return useCallback(() => {\n    aui.threadListItem().switchTo();\n  }, [aui]);\n};\n\nexport namespace ThreadListItemPrimitiveTrigger {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadListItemTrigger>;\n}\n\nexport const ThreadListItemPrimitiveTrigger = createActionButton(\n  \"ThreadListItemPrimitive.Trigger\",\n  useThreadListItemTrigger,\n);\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAGL,kBAAkB,GACnB,0CAAuC;AACxC,OAAO,EAAE,MAAM,EAAE,MAAM,qBAAqB,CAAC;AAC7C,OAAO,EAAE,WAAW,EAAE,MAAM,OAAO,CAAC;AARpC,YAAY,CAAC;;;;AAUb,MAAM,wBAAwB,GAAG,GAAG,EAAE;IACpC,MAAM,GAAG,OAAG,yKAAM,EAAE,CAAC;IACrB,WAAO,4KAAW;gDAAC,GAAG,EAAE;YACtB,GAAG,CAAC,cAAc,EAAE,CAAC,QAAQ,EAAE,CAAC;QAClC,CAAC;+CAAE;QAAC,GAAG;KAAC,CAAC,CAAC;AACZ,CAAC,CAAC;AAOK,MAAM,8BAA8B,OAAG,0MAAkB,EAC9D,iCAAiC,EACjC,wBAAwB,CACzB,CAAC"}},
    {"offset": {"line": 7546, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadListItem/ThreadListItemTitle.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadListItem/ThreadListItemTitle.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC, ReactNode } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\nexport namespace ThreadListItemPrimitiveTitle {\n  export type Props = {\n    fallback?: ReactNode;\n  };\n}\n\nexport const ThreadListItemPrimitiveTitle: FC<\n  ThreadListItemPrimitiveTitle.Props\n> = ({ fallback }) => {\n  const title = useAuiState((s) => s.threadListItem.title);\n  return <>{title || fallback}</>;\n};\n\nThreadListItemPrimitiveTitle.displayName = \"ThreadListItemPrimitive.Title\";\n"],"names":[],"mappings":";;;;;AAGA,OAAO,EAAE,WAAW,EAAE,MAAM,qBAAqB,CAAC;AAHlD,YAAY,CAAC;;;AAWN,MAAM,4BAA4B,GAErC,CAAC,EAAE,QAAQ,EAAE,EAAE,EAAE;IACnB,MAAM,KAAK,OAAG,mLAAW;2DAAC,CAAC,CAAC,EAAE,CAAG,CAAD,AAAE,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;;IACzD,WAAO,6KAAA,EAAA,kLAAA,EAAA;QAAA,UAAG,KAAK,IAAI,QAAQ;IAAA,EAAI,CAAC;AAClC,CAAC,CAAC;AAEF,4BAA4B,CAAC,WAAW,GAAG,+BAA+B,CAAC"}},
    {"offset": {"line": 7602, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadList/index.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadList/index.ts"],"sourcesContent":["export { ThreadListPrimitiveNew as New } from \"./ThreadListNew\";\nexport { ThreadListPrimitiveItems as Items } from \"./ThreadListItems\";\nexport { ThreadListPrimitiveItemByIndex as ItemByIndex } from \"./ThreadListItems\";\nexport { ThreadListPrimitiveRoot as Root } from \"./ThreadListRoot\";\n"],"names":[],"mappings":""}},
    {"offset": {"line": 7612, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadList/ThreadListNew.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadList/ThreadListNew.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n} from \"../../utils/createActionButton\";\nimport { forwardRef } from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\nexport namespace ThreadListPrimitiveNew {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<() => void>;\n}\n\nexport const ThreadListPrimitiveNew = forwardRef<\n  ThreadListPrimitiveNew.Element,\n  ThreadListPrimitiveNew.Props\n>(({ onClick, disabled, ...props }, forwardedRef) => {\n  const isMain = useAuiState(\n    (s) => s.threads.newThreadId === s.threads.mainThreadId,\n  );\n\n  const aui = useAui();\n\n  return (\n    <Primitive.button\n      type=\"button\"\n      {...(isMain ? { \"data-active\": \"true\", \"aria-current\": \"true\" } : null)}\n      {...props}\n      ref={forwardedRef}\n      disabled={disabled}\n      onClick={composeEventHandlers(onClick, () => {\n        aui.threads().switchToNewThread();\n      })}\n    />\n  );\n});\n\nThreadListPrimitiveNew.displayName = \"ThreadListPrimitive.New\";\n"],"names":[],"mappings":";;;;;AAMA,OAAO,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AACnC,OAAO,EAAE,SAAS,EAAE,MAAM,2BAA2B,CAAC;AACtD,OAAO,EAAE,oBAAoB,EAAE,MAAM,qBAAqB,CAAC;;AAC3D,OAAO,EAAE,WAAW,EAAE,MAAM,EAAE,MAAM,qBAAqB,CAAC;AAT1D,YAAY,CAAC;;;;;;AAgBN,MAAM,sBAAsB,OAAG,2KAAU,EAG9C,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,KAAK,EAAE,EAAE,YAAY,EAAE,EAAE;IAClD,MAAM,MAAM,GAAG,uLAAW;sDACxB,CAAC,CAAC,EAAE,CAAG,CAAD,AAAE,CAAC,OAAO,CAAC,WAAW,KAAK,CAAC,CAAC,OAAO,CAAC,YAAY,CACxD,CAAC;;IAEF,MAAM,GAAG,OAAG,yKAAM,EAAE,CAAC;IAErB,OAAO,IACL,6KAAA,EAAC,qLAAS,CAAC,MAAM,EAAA;QACf,IAAI,EAAC,QAAQ;QAAA,GACT,AAAC,MAAM,CAAC,CAAC,CAAC;YAAE,aAAa,EAAE,MAAM;YAAE,cAAc,EAAE,MAAM;QAAA,CAAE,CAAC,CAAC,CAAC,IAAI,CAAC;QAAA,GACnE,KAAK;QACT,GAAG,EAAE,YAAY;QACjB,QAAQ,EAAE,QAAQ;QAClB,OAAO,MAAE,uLAAoB,EAAC,OAAO,EAAE,GAAG,EAAE;YAC1C,GAAG,CAAC,OAAO,EAAE,CAAC,iBAAiB,EAAE,CAAC;QACpC,CAAC,CAAC;IAAA,EACF,CACH,CAAC;AACJ,CAAC,CAAC,CAAC;AAEH,sBAAsB,CAAC,WAAW,GAAG,yBAAyB,CAAC"}},
    {"offset": {"line": 7652, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadList/ThreadListItems.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadList/ThreadListItems.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentType, FC, memo, useMemo } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport { ThreadListItemByIndexProvider } from \"../../context/providers\";\n\nexport namespace ThreadListPrimitiveItems {\n  export type Props = {\n    archived?: boolean | undefined;\n    components: {\n      ThreadListItem: ComponentType;\n    };\n  };\n}\n\nexport namespace ThreadListPrimitiveItemByIndex {\n  export type Props = {\n    index: number;\n    archived?: boolean | undefined;\n    components: ThreadListPrimitiveItems.Props[\"components\"];\n  };\n}\n\n/**\n * Renders a single thread list item at the specified index.\n *\n * This component provides direct access to render a specific thread\n * from the thread list using the provided component configuration.\n *\n * @example\n * ```tsx\n * <ThreadListPrimitive.ItemByIndex\n *   index={0}\n *   components={{\n *     ThreadListItem: MyThreadListItem\n *   }}\n * />\n * ```\n */\nexport const ThreadListPrimitiveItemByIndex: FC<ThreadListPrimitiveItemByIndex.Props> =\n  memo(\n    ({ index, archived = false, components }) => {\n      const ThreadListItemComponent = components.ThreadListItem;\n\n      return (\n        <ThreadListItemByIndexProvider index={index} archived={archived}>\n          <ThreadListItemComponent />\n        </ThreadListItemByIndexProvider>\n      );\n    },\n    (prev, next) =>\n      prev.index === next.index &&\n      prev.archived === next.archived &&\n      prev.components.ThreadListItem === next.components.ThreadListItem,\n  );\n\nThreadListPrimitiveItemByIndex.displayName = \"ThreadListPrimitive.ItemByIndex\";\n\nexport const ThreadListPrimitiveItems: FC<ThreadListPrimitiveItems.Props> = ({\n  archived = false,\n  components,\n}) => {\n  const contentLength = useAuiState((s) =>\n    archived ? s.threads.archivedThreadIds.length : s.threads.threadIds.length,\n  );\n\n  const listElements = useMemo(() => {\n    return Array.from({ length: contentLength }, (_, index) => (\n      <ThreadListPrimitiveItemByIndex\n        key={index}\n        index={index}\n        archived={archived}\n        components={components}\n      />\n    ));\n  }, [contentLength, archived, components]);\n\n  return listElements;\n};\n\nThreadListPrimitiveItems.displayName = \"ThreadListPrimitive.Items\";\n"],"names":[],"mappings":";;;;;;;AAEA,OAAO,EAAqB,IAAI,EAAE,OAAO,EAAE,MAAM,OAAO,CAAC;AACzD,OAAO,EAAE,WAAW,EAAE,MAAM,qBAAqB,CAAC;AAClD,OAAO,EAAE,6BAA6B,EAAE,yCAAgC;AAJxE,YAAY,CAAC;;;;;AAuCN,MAAM,8BAA8B,OACzC,qKAAI,EACF,CAAC,EAAE,KAAK,EAAE,QAAQ,GAAG,KAAK,EAAE,UAAU,EAAE,EAAE,EAAE;IAC1C,MAAM,uBAAuB,GAAG,UAAU,CAAC,cAAc,CAAC;IAE1D,OAAO,IACL,6KAAA,EAAC,wOAA6B,EAAA;QAAC,KAAK,EAAE,KAAK;QAAE,QAAQ,EAAE,QAAQ;QAAA,cAC7D,6KAAA,EAAC,uBAAuB,EAAA,CAAA,EAAG;IAAA,EACG,CACjC,CAAC;AACJ,CAAC,EACD,CAAC,IAAI,EAAE,IAAI,EAAE,CACX,CADa,GACT,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,IACzB,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ,IAC/B,IAAI,CAAC,UAAU,CAAC,cAAc,KAAK,IAAI,CAAC,UAAU,CAAC,cAAc,CACpE,CAAC;AAEJ,8BAA8B,CAAC,WAAW,GAAG,iCAAiC,CAAC;AAExE,MAAM,wBAAwB,GAAuC,CAAC,EAC3E,QAAQ,GAAG,KAAK,EAChB,UAAU,EACX,EAAE,EAAE;IACH,MAAM,aAAa,OAAG,mLAAW;+DAAC,CAAC,CAAC,EAAE,CACpC,CADsC,OAC9B,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAC3E,CAAC;;IAEF,MAAM,YAAY,OAAG,wKAAO;0DAAC,GAAG,EAAE;YAChC,OAAO,KAAK,CAAC,IAAI,CAAC;gBAAE,MAAM,EAAE,aAAa;YAAA,CAAE;kEAAE,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC,EACzD,6KAAA,EAAC,8BAA8B,EAAA;wBAE7B,KAAK,EAAE,KAAK;wBACZ,QAAQ,EAAE,QAAQ;wBAClB,UAAU,EAAE,UAAU;oBAAA,GAHjB,KAAK,CAIV,CACH,CAAC,CAAC;;QACL,CAAC;yDAAE;QAAC,aAAa;QAAE,QAAQ;QAAE,UAAU;KAAC,CAAC,CAAC;IAE1C,OAAO,YAAY,CAAC;AACtB,CAAC,CAAC;AAEF,wBAAwB,CAAC,WAAW,GAAG,2BAA2B,CAAC"}},
    {"offset": {"line": 7704, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@assistant-ui/react/dist/primitives/threadList/ThreadListRoot.js","sources":["file:///C:/Users/HORIZON/OneDrive/Desktop/chat-gpt/my-app/node_modules/%40assistant-ui/react/src/primitives/threadList/ThreadListRoot.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace ThreadListPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = PrimitiveDivProps;\n}\n\nexport const ThreadListPrimitiveRoot = forwardRef<\n  ThreadListPrimitiveRoot.Element,\n  ThreadListPrimitiveRoot.Props\n>((props, ref) => {\n  return <Primitive.div {...props} ref={ref} />;\n});\n\nThreadListPrimitiveRoot.displayName = \"ThreadListPrimitive.Root\";\n"],"names":[],"mappings":";;;;;AAEA,OAAO,EAAE,SAAS,EAAE,MAAM,2BAA2B,CAAC;AACtD,OAAO,EAA0C,UAAU,EAAE,MAAM,OAAO,CAAC;AAH3E,YAAY,CAAC;;;;AAYN,MAAM,uBAAuB,OAAG,2KAAU,EAG/C,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE;IACf,WAAO,6KAAA,EAAC,qLAAS,CAAC,GAAG,EAAA;QAAA,GAAK,KAAK;QAAE,GAAG,EAAE,GAAG;IAAA,EAAI,CAAC;AAChD,CAAC,CAAC,CAAC;AAEH,uBAAuB,CAAC,WAAW,GAAG,0BAA0B,CAAC"}}]
}